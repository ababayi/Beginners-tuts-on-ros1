# ุฏูุฑู ููุฏูุงุช ุขููุฒุด ุณุณุชู ุนุงูู ROS

![ุชุตูุฑ ูุนุฑู ุณุณุชู ุนุงูู ุฑุจุงุช](image.png)

ุณุณุชู ุนุงูู ุฑุจุงุช ูุง (ROS)ุ ุจุณุชุฑ ูุฏุฑุชููุฏ ู ุณุฑุน ุฑุง ุจุฑุง ฺฉูพุงุฑฺู ุณุงุฒ ฺฉุฏูุง ูุฑุจูุท ุจู ูุฑ ฺฉ ุงุฒ ูุงุญุฏูุง ุฑุจุงุช ูุฑุงูู ู ุณุงุฒุฏ. ุจู ฺฉูฺฉ ุณุณุชู ุนุงูู ุฑุจุงุช ูุง ู ุชูุงูุฏ ุชุญุช ูููฺฉุณ ฺฉุฏ ูุฑุจูุท ุจู ูุฑ ฺฉ ุงุฒ ูุงุญุฏูุง ููู ุฑุง ุฏุฑ ฺฉ ฺฏุฑู (Node) ุจููุณุฏ ู ุงุฑุชุจุงุท ููุซุฑ ุจู ุงู ฺฏุฑู ูุง ุฑุง ุงุฒ ุทุฑู ูพุงู ูุง (Topic) ุงุฌุงุฏ ฺฉูุฏ. ุณุณุชู ุนุงูู ุฑุจุงุช ูุง ุง ููุงู ROS ุนูุงูู ุจุฑ ุงุฌุงุฏ ฺฉ ุณุงุฎุชุงุฑ ููุธู ู ฺฉุงุฑุจุฑุฏ ุจุฑุง ุชูุณุนู ุฑุจุงุช ูุงุ ูพฺฉุฌ ูุง ุงุณุชุงูุฏุงุฑุฏ ุจุฑุง ฺฉุงุฑุจุฑุฏูุง ุจูุงุ ฺฉูุชุฑู ู ุฏุฑุงูุ ุทุฑุงุญ ูุณุฑุ ููุงุด ุฏุงุฏู ูุง ู ... ูุฑุงูู ู ฺฉูุฏ. ุฏุฑ ุงู ุขููุฒุด ูุง ูุตุฏ ุฏุงุฑู ุชุง ุจุง ุงู ุณุชุณู ุนุงูู ุฑุจุงุชฺฉ ุขุดูุง ุดูู. ูุจุงุญุซ ุงู ุขููุฒุด:

- [ุขุดูุง ุจุง ููุฏูุงุช ู ฺุงุฑฺูุจ ฺฉู ุณุณุชู ุนุงูู ุฑุจุงุช](#ุขุดูุง-ุจุง-ููุฏูุงุช-ู-ฺุงุฑฺูุจ-ุณุณุชู-ุนุงูู-ุฑุจุงุช)
- [ุขุดูุง ุจุง ุฏุณุชูุฑุงุช ููู ูููฺฉุณ](#ุขุดูุง-ุจุง-ุฏุณุชูุฑุงุช-ุงุจุชุฏุง-ูููฺฉุณ)
- [ุขููุฒุด ูุตุจ ROSุ ุงุฌุงุฏ ูุญุท ฺฉุงุฑ ู ุงุฌุงุฏ ุงููู ูพฺฉุฌ](#ุขุดูุง-ุจุง-ูุญูู-ูุตุจ-ros-ุงุฌุงุฏ-ูุญุท-ฺฉุงุฑ-ู-ุงููู-ูพฺฉุฌ)
- [ุขุดูุง ุจุง ูุญูู ุงุฌุงุฏ ฺฏุฑู ูุง ู ุชุงูพฺฉ ูุง](#ุขุดูุง-ุจุง-ูุญูู-ุงุฌุงุฏ-ฺฏุฑู-ูุง-ู-ุชุงูพฺฉ-ูุง)
- [ุขุดูุง ุจุง ูพุงู ูุง ู ุณุฑูุณ ูุง](#ุขุดูุง-ุจุง-ูพุงู-ูุง-ู-ุณุฑูุณ-ูุง)
- [ุขุดูุง ุจุง ูพุงุฑุงูุชุฑูุง](#ุขุดูุง-ุจุง-ูพุงุฑุงูุชุฑูุง)
- [ุขุดูุง ุจุง rosbag](#ุขุดูุง-ุจุง-rosbag)
- [ุขุดูุง ุจุง roswtf](#ุขุดูุง-ุจุง-roswtf)
- [ุขุดูุง ุจุง ุงุจุฒุงุฑูุง rqt](#ุขุดูุง-ุจุง-ุงุจุฒุงุฑูุง-rqt)
- [ูุงุญุฏ ูุง ุงุณุชุงูุฏุงุฑุฏ](#ูุงุญุฏ-ูุง-ุงุณุชุงูุฏุงุฑุฏ)
- [ุขุดูุง ุจุง ูุงู ูุง launch](#ุขุดูุง-ุจุง-ูุงู-ูุง-launch)
- [ุขุดูุง ุจุง TFูุง](#ุขุดูุง-ุจุง-tfูุง)
- [ุฒูุงู ุฏุฑ ROS](#ุฒูุงู-ุฏุฑ-ros)
- [ุงุฌุฑุง ุชุญุช ุดุจฺฉู ROS](#ุงุฌุฑุง-ุชุญุช-ุดุจฺฉู-ros)
- [ุงุฑุชุจุงุท Action ุฏุฑ ูุญุท ROS](#ุงุฑุชุจุงุท-action-ุฏุฑ-ูุญุท-ros)
- [ุชูุธู ูุฌุฏุฏ ูพุงุฑุงูุชุฑูุง ุจุง ฺฉูฺฉ Dynamic Reconfigure](#ุชูุธู-ูุฌุฏุฏ-ูพุงุฑุงูุชุฑูุง-ุจุง-ฺฉูฺฉ-dynamic-reconfigure)
- [ุขุดูุง ุจุง ูุญุท rviz ู ุงุฌุฑุง ฺูุฏ ูุซุงู](#ุขุดูุง-ุจุง-ูุญุท-rviz-ู-ุงุฌุฑุง-ฺูุฏ-ูุซุงู)

ุฏุฑ ุงุฏุงูู ุจู ุจุฑุณ ูุฑ ฺฉุฏุงู ุงุฒ ุนูุงูู ูุทุฑุญ ุดุฏู ู ูพุฑุฏุงุฒู. ูุงุฒู ุจู ุฐฺฉุฑ ุงุณุช ฺฉู ุฏุฑ ุขูุฏู ุขููุฒุด ูุฏู ุถุจุท ู ููฺฉ ุขู ุจู ุงู ุตูุญู ุงุถุงูู ุฎูุงูุฏ ุดุฏ. ุชูุฌู ุดูุฏ ฺฉู ุงู ุขููุฒุด ุฏุฑ ุจุฑฺฏุฑูุฏู ูุทุงูุจ ุฏุฑ ููุฑุฏ ูุณุฎู ุงูู ุณุณุชู ุนุงูู ุฑุจุงุชฺฉ (ROS) ู ุจุงุดุฏ.

## ุขุดูุง ุจุง ููุฏูุงุช ู ฺุงุฑฺูุจ ุณุณุชู ุนุงูู ุฑุจุงุช

ููุงู ฺฏููู ฺฉู ุฐฺฉุฑ ุดุฏ ุณุณุชู ุนุงูู ุฑุจุงุช (ROS) ฺฉ ฺุงุฑฺูุจ (Framework) ุจุฑุง ุชูุณุนู ุงุณุชุงูุฏุงุฑุฏ ู ุณุฑุน ุจุฑูุงูู ูุง ุฑุจุงุชฺฉ ู ุจุงุดุฏ ฺฉู ุงุฒ ูุฒุงุง ุงุตู ุงู ฺุงุฑฺูุจ ู ุชูุงู ุจู ูุชู ุจุงุฒ (Open-Sourse) ู ุญุงู ูพฺฉุฌ ู ุงุจุฒุงุฑูุง ฺฉุงุฑุจุฑุฏ ุจูุฏู ุงุดุงุฑู ฺฉุฑุฏู. ุงู ูพฺฉุฌ ุฏุฑ ุณุงู 2009 ุชูุณุท ฺฉ ุงุณุชุงุฑุช ุขูพ ุจู ูุงู Willow Garage ู ุชูุณุท ุฏู ูุฑุฏ ุจู ูุงู ูุง Eric Berger ู Keenan Wyrobek ุชูุณุนู ุงูุชู ุงุณุช ู ุงุฒ ุญุฏูุฏ ุณุงู 2014 ุจู ุตูุฑุช ูุชู ุจุงุฒ ููุชุดุฑ ุดุฏู ุงุณุช. ูุณุช ูุฑฺู ูุง ูุฎุชูู ุงู ุณุณุชู ุนุงูู ุฑุง ู ุชูุงูุฏ ุฏุฑ ููฺฉ ุฒุฑ ูุดุงูุฏู ููุงุฏ:

https://wiki.ros.org/Distributions

ฺฉ ุงุฒ ุฏูุงู ุงุณุชูุงุฏู ุงุฒ ุณุณุชู ุนุงูู ุฑุจุงุช (ROS) ุงู ุงุณุช ฺฉู ุฏุฑ ุงฺฉุซุฑ ูพุฑูฺู ูุง ุฑุจุงุชฺฉ ูุง ุจุง ฺุงูุด ูุง ุจุฑุง ุฏุฑุงูุฑ ฺฉุฑุฏู ุนููฺฏุฑูุง (Actuators) ู ุญุณฺฏุฑูุง (Sensors) ู ุงุฌุฑุง ุงู ุจุฎุด ุงฺฏุฑ ูุฑุงุฑ ุจุงุดุฏ ุงุฒ ุตูุฑ ุตูุฑุช ุจูพุฐุฑุฏุ ุนูุงูู ุจุฑ ููุช ฺฏุฑ ุจูุฏูุ ูุง ุฑุง ุจุงฺฏ ูุง ู ูุดฺฉูุงุช ูุฑุงูุงู ุฏุฑ ูุฑุงุญู ุจุนุฏ ุฑูุจุฑู ู ฺฉูุฏ.ุณุณุชู ุนุงูู ุฑุจุงุช ุดุฑุงุท ุฑุง ุจุฑุง ูุง ูุฑุงูู ู ฺฉูุฏ ุชุง ูุง ุตุฑูุงู ุจุฑ ุฑู ุจุฎุด ููุทู ุฑุจุงุช ฺฉุงุฑ ฺฉูู ู ุจุฑุง ุฏู ุจุฎุด ุญุณฺฏุฑูุง ู ุนููฺฏุฑูุง ุงุฒ ูพฺฉุฌ ูุง ุงุณุชุงูุฏุงุฑุฏ ROS ุจูุฑู ุจุจุฑู. ุงุฒ ูุฒุงุง ุฏฺฏุฑ ุณุณุชู ุนุงูู ุฑุจุงุช ู ุชูุงู ุจู ุณุงุฒฺฏุงุฑ ุจูุฏู ุจุง ุฒุจุงู ูุง ูุฎุชูู (ุจุงูุงุฎุต ุฒุจุงู C++ , ูพุงุชูู)ุ ููุงุณุจ ุจุฑุง ุฑุดุชู ูุง ู ุญูุฒู ูุง ูุฎุชููุ ุจุฑูุฒุฑุณุงู ุฏุงุฆู ู ุฌุงูุนู ฺฉุงุฑุจุฑ ุจุฒุฑฺฏ ุงุดุงุฑู ฺฉุฑุฏ. ููฺูู ูพฺฉุฌ ูุง ฺฉู ุชูุณุท ูุง ุจุฑ ฺุงุฑฺูุจ ROS ุงุฌุงุฏ ู ุดููุฏุ ูุงุจูุช ุงุณุชูุงุฏู ูุฌุฏุฏ ุฏุฑ ฺฉูุงุฑ ุณุงุฑ ูพุฑูฺู ูุง (ูุง ุง ุฏฺฏุฑุงู) ุฑุง ุฏุงุฑูุฏ.

![ุชุตูุฑ ุณุงุฎุชุงุฑ ฺฉู ุฑุจุงุช](image-1.png)

ุณุณุชู ุนุงูู ุฑุจุงุช (ROS) ุจู ูุง ุงู ุงูฺฉุงู ุฑุง ู ุฏูุฏ ุชุง ฺฉ ุจุฑูุงูู ุฑุจุงุชฺฉ ุฑุง ุจู ุจุฎุด ูุง ูุฎุชูู ุชูุณู ฺฉูู ฺฉู ูุฑ ฺฉุฏุงู ุงุฒ ุงู ุจุฎุด ูุง ฺฉ ฺฏุฑู (Node) ู ุจุงุดุฏ. ุงู ููุฏูุง ู ุชูุงููุฏ ุจู ุฑูุด ูุง ูุฎุชูู ุจุง ฺฉ ุฏฺฏุฑ ูุฑุชุจุท ุจุงุดูุฏ:

- ุชุงูพฺฉ ูุง (Topics)
- ุณุฑูุณ ูุง (Services)
- ุงฺฉุดู ูุง (Actions)

![ููุฏูุง ุฏุฑ  ุณุณุชู ุนุงูู ุฑุจุงุช](image-2.png)

ุฏุฑ ููุน ุงุฑุชุจุงุท ุชุงูพฺฉุ ฺฉ ููุฏ ูุธูู ุงูุชุดุงุฑ ุงุทูุงุนุงุช ุฑุง ุฏุงุฑุฏ ฺฉู ุจู ุขู Publisher ู ฺฏููุฏ ู ุจู ุณุงุฑ ฺฏุฑู ูุง ฺฉู ุงุทูุงุนุงุช ุฑุง ุฏุฑุงูุช ู ฺฉูุฏุ Subscriber ู ฺฏููุฏ. ุชูุฌู ุดูุฏ ฺฉู ุงู ุงุฑุชุจุงุทุงุช ูุฏุงูู ุงุณุช. ุนู ูพุณ ุงุชุตุงู ุงู ุฏู ฺฏุฑู ุจู ูู ุงุทูุงุนุงุช ุจุง ูุฑฺฉุงูุณ ุฎุงุต ุจู ุตูุฑุช ูุฏุงูู ุฑุฏ ู ุจุฏู ู ุดูุฏ. ููุน ุจุนุฏ ุงุฑุชุจุงุท ุณุฑูุณ ูุง ู ุจุงุดุฏ. ุฏุฑ ุงู ุฑูุด ุงุฑุชุจุงุท ฺฉ ฺฏุฑู ุณุฑูุฑ ู ฺฉ ฺฏุฑู ฺฉูุงูุช ุฏุงุฑู. ุฏุฑ ุงุจุชุฏุง ูุฑฺฏุงู ฺฉูุงูฺฉ ุจู ุงุทูุงุนุงุช ูุงุฒ ุฏุงุดุชู ุจุงุดุฏ ุจู ุณุฑูุฑ ฺฉ ุฏุฑุฎูุงุณุช (Request) ู ุณุฑูุฑ ูุฒ ุฏุฑ ุฌูุงุจ ูพุณ ุงุฒ ุงูุฌุงู ูพุฑุฏุงุฒุด ูุงุ ุงุทูุงุนุงุช ุฑุง ูพุงุณุฎ (Respond) ู ุฏูุฏ. ุฏุฑ ุงู ุฑูุด ุงุฑุชุจุงุท ุฏุฑ ุจุงุฒู ุฒูุงู ฺฉู ุฏุฑุฎูุงุณุช ุงุฑุณุงู ุดุฏู ุชุง ูุญุธู ุฏุฑุงูุช ูพุงุณุฎุ ุจุฑูุงูู ฺฉูุงูุช ูุชููู ุจุงู ู ูุงูุฏ. ุฑูุด ุณุฑูุณ ุฒูุงู ฺฉู ูพุฑุฏุงุฒุด ูุง ุณุฑูุฑ ุทููุงู ุจุงุดุฏ ุง ูุง ุจุฎูุงูู ุฏุฑ ุญู ุงู ุฒูุงู ูพุฑุฏุงุฒุด ุงูุฌุงู ุฏูู ูุงูุฏ ฺฉุงุฑุจุฑุฏ ู ุดูุฏุ ูพุณ ุจุฑุง ุงู ุญุงูุช ุจู ุณุฑุงุบ ุฑูุด ุณูู ู ุฑูู ฺฉู ุงฺฉุดู ูุงู ุฏุงุฑุฏ ู ูุดุงุจู ุณุฑูุณ ูุง ุงุณุช ุจุง ุงู ุชูุงูุช ฺฉู ุฏุฑ ุจู ุฒูุงู ุงุฑุณุงู ุฏุฑุฎูุงุณุช ู ุฏุฑุงูุช ูพุงุณุฎุ ุจุฑูุงูู ูุชููู ูู ุดูุฏ.

![ุฑุงู ูุง ุงุฑุชุจุงุท ฺฏุฑู ูุง](image-3.png)

ุงู ุฑูุด ูุง ุงุฑุชุจุงุท ุฏุฑ ุจุฎุด ูุง ุจุนุฏ ุจุฑุณ ุจุดุชุฑ ุฎูุงูุฏ ุดุฏ. ูุงุฒู ุจู ุฐฺฉุฑ ุงุณุช ฺฉู ุจุฑุง ุชูุณุนู ูุฑ ููุฏ ู ุชูุงู ุงุฒ ุฒุจุงู ูุง ูุฎุชูู ุงุณุชูุงุฏู ฺฉุฑุฏุ ุงูุจุชู API ุงุฑุงู ุดุฏู ุจุฑุง ูพุงุชูู ู ุณ ูพูุงุณ ูพูุงุณ ุงุณุชุงูุฏุงุฑุฏ ุชุฑ ุงุณุช.

## ุขุดูุง ุจุง ุฏุณุชูุฑุงุช ุงุจุชุฏุง ูููฺฉุณ

ุฏุฑ ุงู ุจุฎุด ูุตุฏ ุฏุงุฑู ุชุง ุจุฑุฎ ุงุฒ ุฏุณุชูุฑุงุช (command) ูุนุฑูู ุณุณุชู ุนุงูู ูููฺฉุณ ุฑุง ุจุง ูู ูุฑูุฑ ฺฉูู. ุงู ุฏุณุชูุฑุงุช ุฏุฑ ูุญุท ุชุฑููุงู (Terminal) ูููฺฉุณ ุงุณุชูุงุฏู ู ุดูุฏ ู ุชุง ุญุฏูุฏ ุฒุงุฏ ฺฉุงุฑ ูุง ุฑุง ุฏุฑ ูุญุท ูููฺฉุณ ุฑุงุญุช ู ฺฉูุฏ. ุฏุฑ ุจุฎุด ุฒุฑ ู ุชูุงูุฏ ูุณุช ุงู ฺฉุงููุฏ ูุง ุฑุง ุจุง ุชูุถุญุงุช ูุฑุจูุทู ูุฑูุฑ ููุงุฏ:

```bash
# Sending ping packets to a ip or address
$ ping [ip/address] -c [number-of-packets]

# Open Manual of a linux command
$ man [command-name]

# List the recent directory files and dirs
$ ls

# Navigate to a dir
$ cd [directory-name]

# Show the active directory address from root
$ pwd

# Create a directory
$ mkdir [dir-name]

# Create a file
$ touch [file-name]

# Open a file with editor
$ nano/gedit/code [file-name]

# Remove a file
$ rm [file-name]

# Remove a dir
$ rm -r [dir-name]
#or
$ rmdir [dir-name]

# Dir tree
$ tree # install: sudo apt-get install tree

# Copy files
$ cp [file-name] [goal-dir] [new-name]

# Move files
$ mv [file-name] [goal-dir] [new-name]

# Add Executability to a file
$ chmod +x [file-name]

# Shut down
$ poweroff

# Restart
$ reboot
```

ุชูุฌู ุดูุฏ ฺฉู ุฏุฑ ุชุฑููุงู ููุธูุฑ ุงุฒ ~ ุดุงุฎู Home ู ููุธูุฑ ุงุฒ / ุดุงุฎู root ู ุจุงุดุฏ.

## ุขุดูุง ุจุง ูุญูู ูุตุจ ROSุ ุงุฌุงุฏ ูุญุท ฺฉุงุฑ ู ุงููู ูพฺฉุฌ

ุฏุฑ ุงู ุจุฎุด ูุตุฏ ุฏุงุฑู ุชุง ุจู ูุญูู ูุตุจ ุณุณุชู ุนุงูู ุฑุจุงุช ุจูพุฑุฏุงุฒูุ ุณูพุณ ุจู ูุญูู ุงุฌุงุฏ ฺฉ ูุถุง ฺฉุงุฑ ุงุณุชุงูุฏุงุฑุฏ ุจุฑูู ู ุงููู ูพฺฉุฌ ุฎูุฏูุงู ุฑุง ูุฒ ุงุฌุงุฏ ููุงู. ุจุฑุง ูุตุจ ูุฑฺู Neotic ุณุณุชู ุนุงูู ROS ู ุชูุงูุฏ ุจู ููฺฉ ุฒุฑ ูุฑุงุฌุนู ููุงุฏ:

http://wiki.ros.org/ROS/Installation

ุฏุณุชูุฑุงุช ูุตุจ ุจู ุตูุฑุช ุฎูุงุตู ุจุง ฺฉุงููุช ุฏุฑ ุจุฎุด ุฒุฑ ุขูุฑุฏู ุดุฏู ุงุณุช.

```bash
# Add the ros rep to apt dir
$ sudo sh -c 'echo "deb http://packages.ros.org/ros/ubuntu $(lsb_release -sc) main" > /etc/apt/sources.list.d/ros-latest.list'

# Install curl
$ sudo apt install curl # if you haven't already installed curl

# load curl asc file and pass key
$ curl -s https://raw.githubusercontent.com/ros/rosdistro/master/ros.asc | sudo apt-key add -

# Update the apt rep
$ sudo apt update

# Install ROS neotic
$ sudo apt install ros-noetic-desktop-full

# Add ros to Enviromental vars
$ echo "source /opt/ros/noetic/setup.bash" >> ~/.bashrc

# Source the bashrc file
$ source ~/.bashrc

```

ูพุณ ุงุฒ ูุตุจ ROS ุจุฑุง ฺฺฉ ฺฉุฑุฏู ุงูฺฉู ุขุง ูููู ู ุชูุงูุฏ ฺฉุงููุฏ ุฒุฑ ูุณุชู ROS ุฑุง ุงุฌุฑุง ู ููุงุฏ ุชุณุช ฺฉูุฏ:

```bash
$ roscore
```

ููฺูู ุจุง ฺฉุงููุฏ ุฒุฑ ู ุชูุงูุฏ ุจู ูุญู ูุตุจ ูพฺฉุฌ ูุง ROS ุจุฑูุฏ:

```bash
$ cd /opt/ros/noetic/share/
```

ูพฺฉุฌ ูุง ููุฌูุฏ ุฏุฑ ุฏุงุฑฺฉุชูุฑ ุจุงูุง ุฏุฑ ูุงูุน ูุณุช ูพฺฉุฌ ูุง ูุณุชูุฏ ฺฉู ุจู ุตูุฑุช ูพุดูุฑุถ ุจุฑ ุฑู ROS ููู ูุฑฺู ููุฌูุฏ ูุณุชูุฏ. ุงฺฏุฑ ูพฺฉุฌ ุฑุง ุฏุฑ ุงู ุฏุงุฑฺฉุชูุฑ ูุฑุงุฑ ุฏูุฏุ ู ุชูุงูุฏ ุงุฒ ุขู ุจู ุตูุฑุช ฺฏููุจุงู ุจุฏูู ูุงุฒ ุจู ุงุถุงูู ฺฉุฑุฏู ูุฌุฏุฏ ุจูุฑู ุจุจุฑุฏ. ุฏุฑ ฺฉู ุจุง ฺฉูฺฉ ุฏุณุชูุฑ ุฒุฑ ู ุชูุงูุฏุ ูุณุช ูุญู ูุง ฺฉู ูพฺฉุฌ ูุง ุฑุงุณ ุฐุฎุฑู ู ุดููุฏ ุฑุง ูุดุงูุฏู ููุงุฏ:

```bash
$ echo $ROS_PACKAGE_PATH
```

ููฺูู ROS ฺฉุงููุฏูุง ุจุฑุง ูุดุงูุฏู ูพฺฉุฌ ูุง ู ุงุทูุงุนุงุช ุขููุง ุฏุงุฑุฏ. ุจุฑุฎ ุงุฒ ุงู ฺฉุงููุฏูุง (ุฏุฑ ุงุฏุงูู ูุฒ ุฏุฑ ุจุณุชู ุจู ูุงุฒ ุจุฎุด ูุฑุจูุทู ฺฉุงููุช ูุง ุงุฑุงู ุฎูุงููุฏ ุดุฏ):

- ุจุฑุง ูุดุงูุฏู ูุญู ูุตุจ ฺฉ ูพฺฉุฌ (ุจุฑุง ูุซุงู ูพฺฉุฌ roscpp) ู ุชูุงูุฏ ุงุฒ ุฏุณุชูุฑ ุฒุฑ ฺฉูฺฉ ุจฺฏุฑุฏ:

```bash
$ rospack find roscpp
```

- ููฺูู ุจุฑุง ุฑูุชู ุจู ูุญู ูุตุจ ุขูุ ู ุชูุงูุฏ ุงุฒ ุฏุณุชูุฑ ุฒุฑ ุจูุฑู ุจฺฏุฑุฏ:

```bash
$ roscd roscpp
```

- ููฺูู ุจุฑุง ูุดุงูุฏู ูุญุชูุงุช ฺฉ ูพฺฉุฌ ู ุชูุงูุฏ ุงุฒ ุฏุณุชูุฑ ุฒุฑ ุจูุฑู ุจุจุฑุฏ:

```bash
$ rosls roscpp
```

ููฺูู ุจุง ูุฑุงุฑ ุฏุงุฏู help ุฌูู ุณู ฺฉุงููุฏ ุฐฺฉุฑ ุดุฏู ู ุชูุงูุฏุ ุจุง ุนููฺฉุฑุฏ ุจุดุชุฑ ุงู ูพฺฉุฌ ูุง ุขุดูุง ุดูุฏ.
(ุงุฒ ุณูุฆฺุฑ -h ูุฒ ู ุชูุงู ุงุณุชูุงุฏู ฺฉุฑุฏ.)

ุงฺฉููู ฺฉู ROS ุฑุง ุจุง ููููุช ูุตุจ ฺฉุฑุฏู ุจู ุณุฑุงุบ ุงุฌุงุฏ ฺฉ ูุถุง ฺฉุงุฑ ู ุฑูู. ูุถุง ฺฉุงุฑ ูุฌุงุฒ ุง Virtual environment ฺฉ ูุญุท ุงุณุชุงูุฏุงุฑุฏ ุงุณุช ฺฉู ูุงู ฺฉุฏูุง ุฎูุฏ ุฑุง ุฏุฑ ุฏุงุฎู ุขู ูุฑุงุฑ ู ุฏูู. ุจุฑุง ุงุฌุงุฏ ุงู ูุญุท ุงุจุชุฏุง ฺฉ ูพูุดู ุจู ูุงู catkin_ws ุงุฌุงุฏ ฺฉุฑุฏู ู ููฺูู ุฏุฑ ุฏุงุฎู ุขู ฺฉ ุฏุงุฑฺฉุชูุฑ ุฎุงู ุจู ูุงู src ุงุฌุงุฏ ู ฺฉูู. ุณูพุณ ฺฉุงููุฏ ุฒุฑ ุฑุง ุงุฌุฑุง ู ฺฉูู ุชุง ฺฉุงููพุงูุฑ ROS ุงู ูุญุท ุฑุง ุจุฑุง ุงุฌุงุฏ ฺฉูุฏ.

```bash
$ catkin_make
```

ูุญุท ฺฉุงุฑ ูุง ุจุง ููููุช ุงุฌุงุฏ ุดุฏู. ูุงุฒู ุจู ุฐฺฉุฑ ุงุณุช ุฏุฑ ูุฑุงุญู ุจุนุฏ ูุฑฺฏุงู ูุงุฒ ุดุฏ ูุฌุฏุฏ ุจุฑูุงูู ุฑุง ฺฉุงููพุงู ฺฉููุ ุญุชูุง ุจู ุดุงุฎู ุงุตู catkin_ws ุขูุฏู ู ฺฉุงููุฏ ุจุงูุง ุฑุง ุงุฌุฑุง ฺฉูุฏ.

ุงฺฉููู ฺฉู ูุญุท ฺฉุงุฑ ูุฌุงุฒ ุฑุง ุขูุงุฏู ฺฉุฑุฏูุ ู ุชูุงูู ุจู ุณุฑุงุบ ุงุฌุงุฏ ุงููู ูพฺฉุฌ ุฎูุฏ ุจุฑูู. ุจุฑุง ุงุฌุงุฏ ูพฺฉุฌ ฺฉุงู ุงุณุช ุจู ุฏุงุฎู ูพูุดู src ูุญุท ฺฉุงุฑ ฺฉุชฺฉู ุฎูุฏ ุจุฑูู ู ุจุง ฺฉูฺฉ ูุฑูุช ุฏุณุชูุฑ ุฒุฑ ฺฉ ูพฺฉุฌ ุงุฌุงุฏ ฺฉูู:

```bash
$ cd ~/catkin_ws/src
$ catkin_create_pkg <package_name> [depend1] [depend2] [depend3]
```

ุจุฑุง ูุซุงู:

```bash
$ catkin_create_pkg beginner_tuts std_msgs rospy roscpp
```

ุจุนุฏ ูุฌุฏุฏ ุจู ูพูุดู catkin_ws ูุฑุงุฌุนู ุดูุฏ ู ูุฌุฏุฏ ุจุง ุฏุณุชูุฑ catkin_make ฺฉุงููพุงู ุงูุฌุงู ุดูุฏ. ู ููฺูู ุฏุณุชูุฑ ุฑุง ุฏุฑ ูุงู bashrc ูุฑุงุฑ ุฏูู. (ุชูุฌู ุดูุฏ ฺฉู ุงฺฏุฑ ุฏุฑ ุฏุงุฑฺฉุชูุฑ ูููุ ูุฑฺฉ ุงุณูพุณ ุฑุง ุงุฌุงุฏ ูฺฉุฑุฏู ุงุฏ ุขุฏุฑุณ ุฒุฑ ุฑุง ุงุตูุงุญ ฺฉูุฏ!)

```bash
$ source ~/catkin_ws/devel/setup.bash
```

ููฺูู ุจุฑุง ูุดุงูุฏู ูพุด ูุงุฒูุง ู dependencies ูุง ฺฉ ูพฺฉุฌ ู ุชูุงูุฏ ุงุฒ ุฏุณุชูุฑ ุฒุฑ ฺฉูฺฉ ุจฺฏุฑุฏ (ุฏุณุชูุฑ ุฒุฑ ููุท ูพุด ูุงุฒูุง ูุฑุญูู ุงูู ุฑุง ููุงุด ู ุฏูุฏ):

```bash
$ rospack denpend1 [package-name]
```

ุฏุฑ ุตูุฑุชฺฉู ุจุฎูุงูุฏ ุชูุงู ูพุด ูุงุฒ ูุง ุฑุง ุจุจูุฏ ุงุฒ ุฏุณุชูุฑ ุฒุฑ ุจูุฑู ุจฺฏุฑุฏ:

```bash
$ rospack denpend [package-name]
```

ูฺฉุชู: ุฏุฑ ูุงู package.xml ุงุทูุงุนุงุช ูพฺฉุฌุ ูุฑฺูุ ูพุดูุงุฒ ูุง ู ุณุงุฑ ุงุทูุงุนุงุช ููุงุด ุฏุงุฏู ู ุดูุฏ.

ูฺฉุชู: ุฏุฑ ูุงู CMakeLists.txt ูุฑุจูุท ุจู ุชูุธูุงุช ฺฉุงููพุงูุฑ ู ุจุงุดุฏ ฺฉู ูุณุช ูพฺฉุฌ ูุง ูพุดูุงุฒุ ูพุงู ูุงุ ุณุฑูุณ ูุงุ ุงฺฉุดู ูุงุ ุงุทูุงุนุงุช ฺฉุงููพุงู ู ... ูุฑุงุฑ ฺฏุฑูุชู ุงุณุช ู ูุนูููุง ุงฺฏุฑ ูุฑุงุฑ ุจุงุดุฏ ฺฉ ููุฏ ุจุง ุณ ูพูุงุณ ูพูุงุณ ููุดุชู ุดูุฏุ ุจุง ุงู ูุงู ุจุณุงุฑ ฺฉุงุฑ ู ุดูุฏ.

ุจุฑุง ุฏุฑุงูุช ุงุทูุงุนุงุช ุจุดุชุฑ ุจู ุตูุญู ุฎูุฏ ุฏุงฺฉูููุช ุฑุงุณ ุจู ุขุฏุฑุณ ุฒุฑ ูุฑุงุฌุนู ุดูุฏ:

http://wiki.ros.org/ROS/Tutorials/CreatingPackage

## ุขุดูุง ุจุง ูุญูู ุงุฌุงุฏ ฺฏุฑู ูุง ู ุชุงูพฺฉ ูุง

ุฏุฑ ุงู ูุณูุช ูุตุฏ ุฏุงุฑู ุชุง ุฏุฑ ููุฑุฏ ูุญูู ุงุฌุงุฏ ฺฏุฑู ูุง (Nodes) ู ูุญูู ุงุฌุงุฏ ุชุงูพฺฉ (Topics) ุชูุถุญุงุช ุฑุง ุงุฑุงู ฺฉูู. ุฏุฑ ุงุจุชุฏุง ูุจู ุงุฌุงุฏ ฺฉ ฺฏุฑู ู ุชุงูพฺฉุ ฺูุฏ ฺฏุฑู ูุนุฑูู ุฏุฑ ROS ุฑุง ุงุฌุฑุง ูฺฉูู. ุฏุฑ ุงู ุณุณุชู ุนุงูู ฺฉ ูพฺฉุฌ ุจุง ูุงู turtlesim ูุฌูุฏ ุฏุงุฑุฏ ฺฉู ุจุฑุง ุชุณุช ฺฉุฑุฏู ุฏุณุชูุฑุงุช ROS ููุฑุฏ ุงุณุชูุงุฏู ูุฑุงุฑ ู ฺฏุฑุฏ. ุจุฑุง ุงุฌุฑุง ูุฑ ุจุฑูุงูู ROS ูุงุฒ ุงุณุช ุชุง ุงุจุชุฏุง ฺฉุงุฑ ูุณุชู ุขู ุงุฌุฑุง ุดูุฏ. ูุณุชู ููุงูฺฏููู ฺฉู ุฒูุฏุชุฑ ุจุงู ุดุฏ ุจุง ฺฉุงููุฏ ุฒุฑ ุงุฌุฑุง ู ุดูุฏ:

```bash
$ roscore
```

ุจุฑุง ุงุฌุฑุง ููุฏูุง ูุฒ ุงุฒ ฺฉุงููุฏ ุฒุฑ ุจูุฑู ู ุจุฑู:

```bash
$ rosrun [package-name] [node-name]
```

ุจุฑุง ูุซุงู ุจุฑูุงูู ูุงฺฉูพุดุช ุฑุง ุงุฌุฑุง ู ฺฉููุ ุงู ุจุฑูุงูู ุจู ุฏู ููุฏ turtlesim_node ู turtle_teleop_key ุฑุง ุงุฌุฑุง ููุงู:

```bash
$ roscore
$ rosrun turtlesim turtlesim_node
$ rosrun turtlesim turtle_teleop_key
```

ุฎุฑูุฌ ุงู ุจุฑูุงูู ุจู ุดฺฉู ุฒุฑ ุฎูุงูุฏ ุจูุฏ. ุจุง ุชุบุฑ ุฏฺฉูู ูุง ููุณ ุฏุฑ ุชุฑููุงู ูุฑุจูุท ุจู turtle_teleop_key ูุงฺฉูพุดุช ุดุฑูุน ุจู ุญุฑฺฉุช ู ฺฉูุฏ.

![Alt text](image-4.png)

ุฏุฑ ุงุฏุงูู ุจู ุจุฑุณ ุจุฑุฎ ุงุฒ ุฏุณุชูุฑุงุช ฺฉุงุฑุจุฑุฏ ุฏุฑ ููุฑุฏ ฺฏุฑู ูุง ู ุชุงูพฺฉ ูุง ู ูพุฑุฏุงุฒู. ุดูุง ู ุชูุงูุฏ ุจุง ุชฺฉุฑุงุฑ ุงู ุฏุณุชูุฑูุง ุจุง ุจุฑูุงูู turtle ุงู ุฏุณุชูุฑุงุช ุฑุง ุชูุฑู ููุงุฏ:

ุจุฑุง ูุดุงูุฏู ุงุทูุงุนุงุช ฺฉ ููุฏ ุงุฒ ุฏุณุชูุฑ ุฒุฑ ุงุณุชูุงุฏู ฺฉูุฏ:

```bash
$ rosnode info /rosout
```

ูุจุฑุง ุงุฌุฑุง ฺฉ ููุฏ ุงุฒ ฺฉ ูพฺฉุฌ ุงุฒ ุฏุณุชูุฑ ุฒุฑ ุงุณุชูุงุฏู ููุงุฏ:

```bash
$ rosrun [package-name] [node-name]
```

ูุชูุฌู ุดูุฏ ฺฉู ููุฏูุง ุฏุงุฎู ุฑุงุณ ุชุญุช ุดุจฺฉู ุงุฌุฑุง ู ุดูุฏุ ุจุฑุง ูพูฺฏ ฺฏุฑูุชู ุงุฒ ฺฉ ููุฏ ุงุฒ ุฏุณุชูุฑ ุฒุฑ ู ุชูุงู ุจูุฑู ุจุฑุฏ:

```bash
$ rosnode ping /rosout
```

ุจุฑุง ูุดุงูุฏู ฺฏุฑุงู ููุฏูุง ู ุชูุงูุฏ ุงุฒ ุฏุณุชูุฑ ุฒุฑ ุจูุฑู ุจุจุฑุฏ:

```bash
$ rosrun rqt_graph rqt_graph
```

ุง ุฏุณุชูุฑ ุฒุฑ ุฑุง ุจู ุตูุฑุช ุฎูุงุตู ูุงุฑุฏ ฺฉูุฏ (ุงุฒ ูุฆูุชฺฉ ุจ ุจุนุฏ):

```bash
$ rqt_graph
```

ุจุฑุง ูุดุงูุฏู ุงุทูุงุนุงุช ฺฉ ุชุงูพฺฉ ู ุชูุงูุฏ ุงุฒ ุฏุณุชูุฑ rostopic ุจูุฑู ุจุจุฑุฏุ ุจุฑุง ุงุทูุงุน ฺฉุงูู ุงุฒ ุงู ุฏุณุชูุฑ ฺฉุงููุฏ ุฒุฑ ุฑุง ูุงุฑุฏ ููุงุฏ ุชุง help ุขูุฑุง ูุดุงูุฏู ููุงุฏ:

```bash
$ rostopic -h
```

ุจุฑุง ูุซุงู ุจุง ฺฉูฺฉ ุฏุณุชูุฑ ุฒุฑ ู ุชูุงูุฏ ูุณุช ุชุงูพฺฉ ูุง ุฑุง ุจุจูุฏ:

```bash
$ rostopic list
```

ูฺฉุชู: ุจุฑุง ูุดุงูุฏู ูุณุช ุชุงูพฺฉ ูุง ุจู ุตูุฑุช ุฏุณุชู ุจูุฏ ุดุฏูุ ุงุฒ ุฏุณุชูุฑ ุฒุฑ ุจูุฑู ู ุจุฑู:

```bash
$ rostopic list -v
```

ุจุง ฺฉูฺฉ ุฏุณุชูุฑ ุฒุฑ ู ุชูุงูุฏ ูพุงู ูุง ุฑุฏ ู ุจุฏู ุดุฏู ุฏุฑ ฺฉ ุชุงูพฺฉ ุฑุง ูุดุงูุฏู ฺฉูุฏ:

```bash
$ rostopic echo /topic-name
```

ุจุง ฺฉูฺฉ ุฏุณุชูุฑ ุฒุฑ ู ุชูุงูุฏ ููุน ุชุงูพฺฉ ุฑุง ูุดุงูุฏู ููุงุฏ:

```bash
$ rostopic type /topic-name
```

ุจุฑุง ูพุงุจูุด ฺฉุฑุฏู ุฏุชุง ุฏุฑ ฺฉ ุชุงูพฺฉ ู ุชูุงูุฏ ุงุฒ ุฏุณุชูุฑ rostopic pub ุงู ฺฉุงุฑ ุฑุง ุงูุฌุงู ุฏูุฏุ ุงูุจุชู ูุจู ุงุฒ ุขู ูุงุฒ ุงุณุช ุชุง ุณุงุฎุชุงุฑ ุชุงูพฺฉ ุฑุง ุจุฏุงููุ ุจุง ฺฉูฺฉ ุฏุณุชูุฑ ุฒุฑ ู ุชูุงูุฏ ุณุงุฎุชุงุฑ ุชุงูพฺฉ (ููุน message) ุฑุง ูุดุงูุฏู ฺฉูุฏ:

```bash
$ rosmsg show [message-name]
```

ู ุณูพุณ ุจุง ุฏุณุชูุฑ ุฒุฑ ุฏุงุฎู ุชุงูพฺฉ ูพุงู ุฏูุฎูุงู ุฎูุฏ ุฑุง ููุชุดุฑ ฺฉูุฏ:

```bash
$ rostopic pub [topic-name] [message-type] data
```

ุชูุฌู ุดูุฏ ุงฺฏุฑ ูุชูุงูุณุชุฏ ููุน ูุณุฌ ุฑุง ุชุงูพ ฺฉูุฏ ุงุฒ ฺฉูุฏ TAB ุงุณุชูุงุฏู ููุงุฏุ ููฺูู ุงฺฏุฑ ูุชูุงูุณุชุฏ ุณุงุฎุชุงุฑ ุฏุชุง ุฑุง ูุงุฑุฏ ููุงุฏุ ุฏูุจุงุฑู TAB ุฑุง ุจุฒูุฏ. (ูุฏู ุฑุง ุจุจูุฏ ูุชูุฌู ู ุดูุฏ)

ุจุฑุง ูุชูุงูุจ ฺฉุฑุฏู ุฏุณุชูุฑ ูพุงุจ ู ุชูุงูู ุงุฒ ุณูุฆฺุฑ -r ุจูุฑู ุจุจุฑู:

```bash
$ rostopic pub [topic-name] [message-type] data -r 3
```

ุจุฑุง ูุซุงู ุฏุฑ ฺฉุงููุฏ ุจุงูุง ฺฏูุชู ุจุง ูุฑฺฉุงูุณ 3 ูุฑุชุฒ ุญุฑฺฉุช ุฐฺฉุฑ ุดุฏู ุฑุง ุชฺฉุฑุงุฑ ฺฉู!

ุจุง ฺฉูฺฉ ุฏุณุชูุฑ ุฒุฑ ู ุชูุงูู ูุฑฺฉุงูุณ ูพุงุจูุด ฺฉ ูพุงู ุฏุฑ ฺฉ ุชุงูพฺฉ ุฑุง ูุดุงูุฏู ฺฉูู

```bash
$ rostopic hz [topic-name]
```

ุจุฑุง ูพูุงุช ฺฉุฑุฏู ฺฉ ุชุงูพฺฉ ู ุชูุงูุฏ ุงุฒ ูพูุฌุฑู rqt_plot ุจูุฑู ุจุจุฑุฏ:

```bash
$ rosrun rqt_plot rqt_plot
```

ุฏุฑ ุงุฏุงูู ุจู ูุญูู ุงุฌุงุฏ ุฏู ุนุฏุฏ ฺฏุฑู ุจุฑุง ุชุจุงุฏู ูพุงู ุฏุฑ ุจุณุชุฑ ฺฉ ุชุงูพฺฉ ู ูพุฑุฏุงุฒู. ุงุจุชุฏุง ุงู ููุฏูุง ุฑุง ุจุง ฺฉูฺฉ ุณ ูพูุงุณ ูพูุงุณ ุงุฌุงุฏ ู ฺฉูู ู ุณูพุณ ุจู ุณุฑุงุบ ูพุงุชูู ู ุฑูู. ุจุฑุง ุงุฌุงุฏ ฺฉ ุชุงูพฺฉ ฺฉุงู ุงุณุช ุจู ูพฺฉุฌ ุฎูุฏ ู ุฏุฑ ูพูุดู src ุจุฑูุฏ ู ฺฉ ูุงู ุงุฌุงุฏ ฺฉูุฏุ ุจุฑุง ูุซุงู ู ุฎูุงูู ุฏู ููุฏ ุงุฌุงุฏ ฺฉููุ ฺฉ ููุฏ ูุฑุณุชูุฏู ู ฺฉ ููุฏ ุฏุฑุงูุช ฺฉููุฏ ฺฉู ุจุง ฺฉ ุชุงูพฺฉ ุจุง ูู ุฏุฑ ุงุฑุชุจุงุท ูุณุชูุฏ. ุฏุฑ ุงุจุชุฏุง ุจุง ฺฉูฺฉ ฺฉุงููุฏ ุฒุฑ ุจู ูพูุดู ูพฺฉุฌ ุฎูุฏ ุจุฑูุฏ:

```bash
$ roscd beginner_tutorials
```

ุณูพุณ ุจู ูพูุดู src ุจุฑูุฏ ู ุจุง ฺฉูฺฉ ฺฉุงููุฏ ุฒุฑ ููุฏ ูุฑุจูุท ุจู ูุฑุณุชูุฏู (talker) ุงุฌุงุฏ ููุงุฏ. ุฏุฑ ุงุจุชุฏุง ุฏุฑ ุณ ูพูุงุณ ูพูุงุณ ุฑุง ุชูุถุญ ู ุฏูู ุณูพุณ ุจู ุณุฑุงุบ ููุน ูพุงุชูู ู ุฑูู:

```bash
$ cd src
$ touch talker.cpp
```

ุงฺฉููู ุฏุฑ ุฏุงุฎู ูุงู ุงุฌุงุฏ ุดุฏู ฺฉุฏ ุฒุฑ ุฑุง ูุฑุงุฑ ู ุฏูู (ุฏุฑ ฺฉุงููุช ูุง ฺฉุฏ ุฒุฑุ ุชูุถุญุงุช ุฎูุงุตู ู ุงูุจุชู ฺฉุงู ุฏุงุฏู ุดุฏู ุงุณุช):

```c++
// Adding ROS Libs to our cpp code
#include "ros/ros.h"
#include "std_msgs/String.h"
#include <sstream>

// cpp main loop
int main(int argc, char \*\*argv)
{
// create a node with the name of "talker"
ros::init(argc, argv, "talker");

// creat a class for calling node (n)
ros::NodeHandle n;

// create a publisher-topic with the name of chatter (the topic name is chatter)
ros::Publisher chatter_pub = n.advertise<std_msgs::String>("chatter", 1000); // 1000 msg available
ros::Rate loop_rate(10); // 100ms delay

int count = 0;
while (ros::ok()) // when roscore is ok!
{

    // create msg and add it to class
    std_msgs::String msg;
    std::stringstream ss;

    // print hello world as msg
    ss << "hello world " << count;

    // log the msg in terminal
    msg.data = ss.str();
    ROS_INFO("%s", msg.data.c_str());

    // publishing the created msg
    chatter_pub.publish(msg);

    // re-match with roscore
    ros::spinOnce();
    loop_rate.sleep(); // 100ms delay
    ++count;

}

return 0;
}
```

ุจุฑุง ูุดุงูุฏู ุงู ูุซุงู ุฏุฑ ุฏุงฺฉููุช ุฑุงุณ ุจู ููฺฉ ุฒุฑ ูุฑุงุฌุนู ููุงุฏ:

http://wiki.ros.org/ROS/Tutorials/WritingPublisherSubscriber%28c%2B%2B%29

ุญุงู ฺฉู ุจุฑูุงูู ูุฑุณุชูุฏู ุง ููุงู ูพุงุจูุดุฑ (talker.cpp) ุงุฌุงุฏ ุดุฏ ุจู ุณุฑุงุบ ุงุฌุงุฏ ุจุฑูุงูู ุฏุฑุงูุช ฺฉููุฏ ุง ููุงู ุณุงุจุณฺฉุฑุงุจุฑ (listener.cpp) ู ุฑูู. ุจุง ฺฉูฺฉ ฺฉุงููุฏ ุฒุฑ ุขูุฑุง ุงุฌุงุฏ ฺฉูุฏ:

```bash
$ touch listener.cpp
```

ู ุณูพุณ ุฏุฑูู ุขู ฺฉุฏูุง ุฒุฑ ุฑุง ูุฑุงุฑ ุฏูุฏ:

```c++
// libs
#include "ros/ros.h"
#include "std_msgs/String.h"

// call-back function for receive data
void chatterCallback(const std_msgs::String::ConstPtr& msg) // Input: String
{
  ROS_INFO("I heard: [%s]", msg->data.c_str()); // log received data in terminal
}


int main(int argc, char **argv)
{

  // create a node with the name of "listener"
  ros::init(argc, argv, "listener");
  ros::NodeHandle n;

  // create a subscriber-topic with the name of chatter (the topic name is chatter)
  ros::Subscriber sub = n.subscribe("chatter", 1000, chatterCallback); // listen to topic with name of chatter
  ros::spin(); // re-match with ros core

  return 0;
}
```

ุญุงู ุจุฑุง ฺฉุงููพุงู ฺฉุฑุฏู ุงุจุชุฏุง ุจุงุฏ ุชุบุฑุงุช ูุงุฒู ุฑุง ุฏุฑ ูุงู CMakeList ุงุฌุงุฏ ฺฉูู. ุจุงุฏ ุฏู ูุงู talker.cpp ู listener.cpp ุฑุง ุจู ุนููุงู ุฏู ูุงู ฺฉู ูุฑุงุฑ ุงุณุช ฺฉุงููพุงู ุดููุฏ ูุนุฑู ฺฉูู. ุฏู ฺฉุฏ ุฒุฑ ุฑุง ุฏุฑ ุจุฎุด build ูุฑุงุฑ ุฏูุฏ:

```c
add_executable(talker src/talker.cpp)
target_link_libraries(talker ${catkin_LIBRARIES})
add_dependencies(talker beginner_tutorials_generate_messages_cpp)

add_executable(listener src/listener.cpp)
target_link_libraries(listener ${catkin_LIBRARIES})
add_dependencies(listener beginner_tutorials_generate_messages_cpp)
```

ุงูุจุชู ุชูุงูุช ูู ฺฉูุฏ ฺฉุฌุง ูุงู ูุฑุงุฑ ฺฏุฑูุชู ุจุงุดุฏ ๐

ุชูุฌู ฺฉูุฏ ุงฺฏุฑ ุงุฒ ูุฑฺู ูููุฏฺฉ ู ูุฆูุชฺฉ ุฑุงุณ ุงุณุชูุงุฏู ูฺฉูุฏ ุฏู ุฎุท ุฒุฑ ุฑุง ูุฑุงุฑ ุฏูุฏ:

```c
add_executable(talker src/talker.cpp)
target_link_libraries(talker ${catkin_LIBRARIES})


add_executable(listener src/listener.cpp)
target_link_libraries(listener ${catkin_LIBRARIES})
```

ุญุงู ุจู ุดุงุฎู ุงุตู ุจุฑูุฏ ู ุจุง catkin_make ุจุฑูุงูู ุฑุง ฺฉุงููพุงู ููุงุฏ ู ุจุง ฺฉูฺฉ ุฏุณุชูุฑ rosrun ููุฏ ูุง ููุดุชู ุดุฏู ุฑุง ุงุฌุฑุง ููุงุฏ:

```bash
$ cd ..
$ catkin_make
$ roscore
$ rosrun beginner_tuts listener
$ rosrun beginner_tuts talker
```

ุงฺฉููู ุงุฌุฑุง ุดุฏู ุจุฑูุงูู ุฑุง ูุดุงูุฏู ุฎูุงูุฏ ฺฉุฑุฏุ ูุฑุงููุด ูฺฉุชู ูุณุชู ุฑุงุณ ุฑุง ุฑูุดู ููุงุฏ. ููฺูู ุงฺฏุฑ ุฏุฑ ฺฉุฏ ุณ ูพูุงุณ ูพูุงุณ ุชุบุฑ ฺฉุฑุฏุฏ ูุฌุฏุฏ ฺฉุงููพูุงู ููุงุฏ (ุจุง ฺฉูุชุฑู ุงุณุ ุชุบุฑุงุช ุงุนูุงู ููุดู ๐) ุจุฑุง ูุดุงูุฏู ุฌุฒุฆุงุช ุจุดุชุฑ ู ุชูุงูุฏ ุจู ููฺฉ ุฒุฑ ุฏุฑ ุฏุงฺฉูููุช ุฎูุฏ ุฑุงุณ ูุฑุงุฌุนู ููุงุฏ:

http://wiki.ros.org/ROS/Tutorials/WritingPublisherSubscriber%28c%2B%2B%29

ุงุฌุงุฏ ููู ูพุงุจูุดุฑ ุณุงุจุณฺฉุฑุงุจุฑ ุฏุฑ ูพุงุชูู ุจุณุงุฑ ุฑุงุญุช ุชุฑ ู ุจุงุดุฏุ ฺุฑุงฺฉู ูุงุฒ ุจู ฺฉุงููพุงู ูุฏุงุฑุฏ ู ุจุฑูุงูู ูุง ูพุงุชูู ุจู ุตูุฑุช ุขููุงู (ฺูู ููุณุฑูุฏ) ุงุฌุฑุง ู ุดูุฏ. ฺฉ ูพูุดู ุชุญุช ุนููุงู scripts ุฏุฑ ุฏุงุฑฺฉุชูุฑ ุงุตู ูพฺฉุฌ beginner_tuts ุงุฌุงุฏ ฺฉูุฏ ู ุฏู ูุงู ูพุงุชูู ุจุง ูุงู ูุง talker.py ู listener.py ุงุฌุงุฏ ฺฉูุฏ:

```bash
$ roscd beginner_tuts
$ mkdir scripts
$ cd scripts
$ touch talker.py listener.py
```

ุงฺฉููู ฺฉุฏ ุฒุฑ ุฑุง ุฏุฑ ูุงู talker.py ูุฑุงุฑ ุฏูุฏ:

```python
#!/usr/bin/env python
import rospy
from std_msgs.msg import String

def talker(): # create a node with name of talker
rospy.init_node('talker', anonymous=True)

    # create a topic (publisher) with name of chatter
    pub = rospy.Publisher('chatter', String, queue_size=10)
    rate = rospy.Rate(10) # 10hz or 100ms
    while not rospy.is_shutdown(): # until when roscore is ok
        hello_str = "hello world %s" % rospy.get_time() # make an string
        rospy.loginfo(hello_str) # log it in terminal
        pub.publish(hello_str) # publish it in chatter topic
        rate.sleep() # 100ms delay

if **name** == '**main**': # run it if we are in this file
try:
talker()
except rospy.ROSInterruptException: # any error then pass it
pass
```

ู ฺฉุฏ ุฒุฑ ุฑุง ูุฒ ุฏุฑ listener.py ูุฑุงุฑ ุฏูุฏ:

```python
#!/usr/bin/env python
import rospy
from std_msgs.msg import String

# call-back function

def callback(data):
rospy.loginfo(rospy.get_caller_id() + 'I heard %s', data.data)

def listener(): # create a node with name of listener
rospy.init_node('listener', anonymous=True)

    # create a topic (subscriber) with name of chatter
    rospy.Subscriber('chatter', String, callback)

    rospy.spin() # re-match with roscore

if **name** == '**main**':
listener()
```

ุจุฑุง ุงุฌุฑุง ฺฉุฏูุง ูพุงุชูู ุจุงุฏ ุฏุณุชุฑุณ ุขููุง ุฑุง ุจุง ฺฉูฺฉ ฺฉุงููุฏ chmod ุชุบุฑ ุจุฏููุ ฺฉุงูุณุช ุฏุฑ ูพูุดู script ฺฉ ุฏูุฑ ฺฉุงููุฏ ุฒุฑ ุฑุง ุงุฌุฑุง ููุงู (ููู ุจุฑูุงูู ูุง ูุงุจู ุงุฌุฑุง ู ุดููุฏ):

```bash
$ roscd beginner_tuts
$ cd scripts
$ chmod +x *
```

ุญุงู ุจุง ฺฉูฺฉ ฺฉุงููุฏูุง ุฒุฑ ู ุชูุงูุฏ ุงู ูุซุงู ุฑุง ุงุฌุฑุง ููุงุฏ:

```bash
$ roscore
$ rosrun beginner_tuts talker.py
$ rosrun beginner_tuts listener.py
```

ุชูุฌู ุดูุฏ ฺฉู ุงฺฏุฑ ุจุง ุฎุทุง ุฑูุจุฑู ุดุฏุฏ ฺฉุงููุฏูุง ุฒุฑ ุฑุง ูุฒ ุงูุชุญุงู ฺฉูุฏ (ุฑู ุจุฑุฎ ุงุฒ ูููฺฉุณ ูุง ุจุง python ู ุฑู ุจุฑุฎ ุฏฺฏุฑ ุจุง python3)

```bash
$ roscore
$ python3 talker.py
$ python3 listner.py
```

ุชูุฌู ุดูุฏ ฺฉู ุงฺฏุฑ ุงุฒ ุฏุฑ ุฏุงุฎู ROS ูููุฏฺฉ ูุณุชุฏ ุฏุฑ ุจุฑูุงูู ูุง ูพุงุชูู ุฎูุฏ ุงุฒ ฺฉุงููุช ูุฏุฑ ุฒุฑ ุงุณุชูุงุฏู ฺฉูุฏ:

```python
#!/usr/bin/env python
```

ู ุงฺฏุฑ ุฏุฑ ุฏุงุฎู ูุฆูุชฺฉ ูุณุชุฏ ุงุฒ ฺฉุฏ ุฒุฑ ุงุณุชูุงุฏู ฺฉูุฏ:

```python
#!/usr/bin/env python3
```

ุจุง ุงู ฺฉุงููุช ูุฑฺู ูพุงุชูู ุณูุฏ ูพุงุชูู ุฑุง ุจู ููุณุฑ ูพุงุชูู ู ูููุงูุฏ.

## ุขุดูุง ุจุง ูพุงู ูุง ู ุณุฑูุณ ูุง

ุฏุฑ ุจุฑุฎ ุงุฒ ููุงูุน ูุงุฒ ู ุดูุฏ ุชุง ูุฑูุช ุฎุงุต ุจุฑุง ุงุฑุชุจุงุท ุงุฒ ููุน ุชุงูพฺฉ ุชุนุฑู ฺฉูู. ุฏุฑ ุงู ููุงูุน ุงุฒ ูพุงู ูุง (Message) ุงุณุชูุงุฏู ู ฺฉูู. ุณุงุฎุชุงุฑ ฺฉ ูพุงู ุฑุง ู ุชูุงู ุจุง ฺฉูฺฉ ุฏุชุง-ุชุงูพ ูุง ุฒุฑ ุชุนุฑู ฺฉุฑุฏ:

```
int8 (also uint8)
int16
int32
int64
float32
string
time
duration
(other types of msg)
(using arrays [])
header
```

ุจุฑุง ุงุฌุงุฏ ฺฉ ูุณุฌ ุงุฎุชุตุงุต (ุจุฑุง ูุซุงู ูุณุฌ Student) ุฏุฑ ุงุจุชุฏุง ูุงุฒ ุงุณุช ุชุง ุงุจุชุฏุง ุฏุฑ ุฏุงุฎู ูพูุดู ูพฺฉุฌ ูุงู ฺฉ ูพูุดู ุจู ูุงู msg ุงุฌุงุฏ ฺฉูู ู ุณูพุณ ุฏุฑ ุฏุงุฎู ุงู ูพูุดูุ ฺฉ ูุงู ุจุง ูุงู ูุณุฌ ููุฑุฏ ูุธุฑ (ูุซูุง Student.msg) ุงุฌุงุฏ ููุงู:

```bash
$ roscd beginner_tuts
$ mkdir msg && cd msg
$ touch Student.msg
```

ุณูพุณ ุฏุฑ ูุงู Student.msg ุณุงุฎุชุงุฑ ูพุงู ุฎูุฏ ุฑุง ุจุง ฺฉูฺฉ ุฏุชุงุชุงูพ ูุง ฺฉู ูุดุฎุต ุดุฏ ุชุนุฑู ฺฉูู (ุจุฑุง ูุซุงู ูุงู ู ูุงู ุฎุงููุงุฏฺฏ ุฑุง ุจุง ุฑุดุชูุ ุณู ุฑุง ุนุฏุฏ ุงูุชุฌุฑ ู ููุฑุฏู ุฑุง ุจุง float32 ูุดุฎุต ู ฺฉูู):

```
string name
string lastname
int8 age
float32 score
```

ุญุงู ฺฉู ูุณุฌ ุฑุง ุชุนุฑู ฺฉุฑุฏู ูุงุฒ ุงุณุช ุชุง ุขูุฑุง ุจู ุฑุงุณ ู ฺฉุงููพุงูุฑ ุจุดูุงุณุงูู. ุฏุฑูู ูพูุดู ูพฺฉุฌ ุฏุฑ ุฏุงุฎู ูุงู package.xml ุฏู ุฎุท ุฒุฑ ุฑุง uncomment ฺฉูุฏ:

```xml
<build_depend>message_generation</build_depend>
<exec_depend>message_runtime</exec_depend>
```

ุจุฑุง ุดูุงุณุงูุฏู ุงู ููุน ูพุงู ุจู ฺฉุงููพุงูุฑ ูุงุฒ ุงุณุช ุชุง ุฏุฑ ูุงู CMakeList.txt ูุฒ ุชุบุฑุงุช ุงุนูุงู ฺฉูู. ุฏุฑ ุงุจุชุฏุง ูุงุฒ ุงุณุช ุชุง ูพฺฉุฌ message_generation ุฑุง ุจู ูุณุช ูพฺฉุฌ ูุง ูพุด ูุงุฒ ุงุถุงูู ฺฉููุ ุนู ุฏุฑ ุฏุงุฎู ุชุงุจุน find_package ูุฑุงุฑ ุฏููุ ฺฉู ุฏุฑ ูุงูุน ุงู ุชุงุจุน ุจู ุตูุฑุช ุฒุฑ ุฏุฑ ู ุขุฏ:

```c++
find_package(catkin REQUIRED COMPONENTS
  roscpp
  rospy
  std_msgs
  message_generation
)
```

ููฺูู ูุงุฒ ุงุณุช ุชุง ุฎุท ุฒุฑ ุฏุฑ ุฏุงุฎู ุชุงุจุน catkin_package ฺฉุงููุชุด ุบุฑูุนุงู ู message_runtime ุจู ุงูุชูุง ุขู ุงุถุงูู ุดูุฏ:

```c++
catkin_package(
  CATKIN_DEPENDS roscpp rospy std_msgs message_runtime
)
```

ุญุงู ูุงุฒ ุงุณุช ุชุง ุขุฏุฑุณ ูุงู ูุณุฌ ุฑุง ุจู ุชุงุจุน add_message_file ุจุฏูู (ุญุชูุง Uncomment ฺฉูุฏ ู ุฏุฑ ููุงู ูุญู ูุฑุงุฑ ุฏูุฏ):

```c++
 add_message_files(
   FILES
   Student.msg
 )
```

ููฺูู ุจุฎุด generate_message ุฑุง ูุฒ ุจู ุญุงูุช uncomment ุฏุฑ ุจุงูุฑุฏ:

```c++
 generate_messages(
   DEPENDENCIES
   std_msgs
 )
```

ุงฺฉููู ูุฌุฏุฏ ุจู ุดุงุฎู ุงุตู ูพุฑูฺู ุจุฑูุฏ ู ฺฉ ุฏูุฑู catkin_make ุฑุง ุงุฌุฑุง ฺฉูุฏ. ุณูพุณ ุงฺฏุฑ ูุญุท ฺฉุงุฑ ุฑุง ุณูุฑุณ ูฺฉุฑุฏุฏุ ุณูุฑุณ ฺฉูุฏ (ุงฺฏุฑ ูู ฺฉู ฺฉุฑุฏุฏ ฺฉู ูฺ) . ุงฺฉููู ุจุง ฺฉูฺฉ ุฏุณุชูุฑ ุฒุฑ ู ุชูุงูุฏ ูุณุฌ ุงุฌุงุฏ ุดุฏู ุฑุง ูุดุงูุฏู ููุงุฏ:

```bash
$ rosmsg show Student
```

ุจุฑุง ูุดุงูุฏู ุฌุฒุฆุงุช ุจุดุชุฑ ุฏุฑ ููุฑุฏ ูพุงู ูุง (Messages) ู ุชูุงูุฏ ุจู ููฺฉ ุฒุฑ ุฏุฑ ุฏุงุฎู ุฎูุฏ ูฺฉ ุฑุงุณ ูุฑุงุฌุนุช ููุงุฏ:

http://wiki.ros.org/ROS/Tutorials/CreatingMsgAndSrv

ุฏุฑ ุงุฏุงูู ุจู ุณุฑุงุบ ุณุฑูุณ ูุง ู ุฑูู. ุณุฑูุณ ฺฉ ููุน ุงุฑุชุจุงุท ุฏู ุทุฑูู ู ุจุงุดุฏุ ุดุจู ุชูุงุจุน ุฏุฑ ุจุฑูุงูู ููุณ ุงุณุช. ุจุฑุฎ ุงุฒ ฺฉุงููุฏูุง ฺฉู ุฏุฑ ฺฉุงุฑ ุจุง ุณุฑูุฑุณ ูุง ุจฺฉุงุฑ ู ุขูุฏ ุฑุง ุจุง ูู ูุฑูุฑ ู ฺฉูู. ูุณุช ุงุฒ ุงู ฺฉุงููุฏูุง

```bash
$ rosservice -h
$ rosservice list
$ rosservice type /clear
$ rosservice info /clear
```

ุจุฑุง ุงุณุชูุงุฏู ุงุฒ ฺฉ ุณุฑูุณ ุฏุฑ ุฏุฑูู ุชุฑููุงู ุงุฒ ุณูุฆฺุฑ call ุงุณุชูุงุฏู ู ฺฉููุ ุจุฑุง ูุซุงู ูุตุฏ ุฏุงุฑู ุงุฒ ุณุฑูุณ /clear ฺฉู ูุฑุจูุท ุจู ูพฺฉุฌ turtlesim ุงุณุช ุงุณุชูุงุฏู ฺฉูู. ุฏุฑ ุฏุฑูู ุงู ุณุฑูุณ ฺฉ ุชุงุจุน ูุฑุงุฑ ฺฏุฑูุชู ฺฉู ูุณุฑ ฺฉู ูุงฺฉูพุดุช ุฑูุชู ุฑุง ูพุงฺฉ ูฺฉูุฏ (ุชูุฌู ฺฉูุฏ ฺฉู ุงู ุณุฑูุณ ุฏุฑ ูุฑูุฏ ฺุฒ ูู ฺฏุฑุฏ):

```bash
$ rosservice call /[service-name] [value]
$ rosservice call /clear
```

ุจุฑุง ูุดุงูุฏู ููุน ูุณุฌ ูุง ฺฉู ุฏุฑ ุณุฑูุณ ูุง ุฑุฏ ุจุฏู ู ุดูุฏ ุงุฒ ฺฉุงููุฏ ุฒุฑ ุงุณุชูุงุฏู ู ฺฉูู:

```bash
$ rossrv show turtlesim/Spawn

```

ุชูุฌู ุดูุฏ ฺฉู ููุฏุงุฑ turtlesim/Spawn ุฏุฑ ฺฉุงููุฏ ุจุงูุง ุจุง ฺฉูฺฉ rosservice type ุงุณุชุฎุฑุงุฌ ุดุฏู ุงุณุช. ุจุง ฺฉูฺฉ ฺฉุงููุฏ ุจุงูุง ูุง ุณุงุฎุชุงุฑ ุงู ูุณุฌ ุฑุง ู ุจูู! ุจุฑุง ุฑุงุญุช ู ุชูุงูู ุจุง ฺฉูฺฉ ุฏุณุชูุฑ ูพุงูพ (|) ุฏู ุฏุณุชูุฑ ุฑุง ุฏุฑ ฺฉ ฺฉุงููุฏ ูุงู ุงุฌุฑุง ฺฉูู. ุฏุณุชูุฑ ูพุงูพ ุฎุฑูุฌ ุฏุณุชูุฑ ุงูู ุฑุง ุฏุฑ ูุฑูุฏ ุฏุณุชูุฑ ุฏูู ูุฑุงุฑ ู ุฏูุฏ:

```bash
$ rosservice type /spawn | rossrv show
```

ุฏุฑ ุงุฏุงูู ู ุฎูุงูู ุฏุฑ ูพูฺุฑู ฺฉ ูุงฺฉูพุดุช ุฏฺฏุฑ ุจุง ฺฉูฺฉ ุณุฑูุณ spawn ุงุฌุงุฏ ฺฉูู. ุณุงุฎุชุงุฑ ุฏุณุชูุฑ ุฒุฑ ุฑุง ุงุฌุฑุง ู ฺฉูู:

```bash
$ rosservice call /[service-name] [datas]
$ rosservice call /spawn "x: -1.0 y: 1.0 theta: 2.0 name: 'myturtle'"
```

ุชูุฌู ฺฉูุฏ ฺฉู ุจุง ุฏูุจุงุฑ ุชุจ ุฒุฏู ู ุชูุงูุฏ ุณุงุฎุชุงุฑ ุฏุชุง ุฑุง ููุฏ ฺฉูุฏ! ุชูุฌู ฺฉูุฏ ฺฉู ุณุฑูุณ spawn ุจู ูุง ุจู ุนููุงู ุฎุฑูุฌ ูุงู ุงูุชุฎุงุจ ุฑุง ุจุงุฒุฎูุงูุฏ ฺฏุฑุฏุงูุฏ!

ุฏุฑ ุงุฏุงูู ุจู ูุญูู ุงุฌุงุฏ ฺฉ ุณุฑูุณ ุฏุฑ ุฏุงุฎู ูพฺฉุฌ ูุงู ู ูพุฑุฏุงุฒู. ุจุฑุง ุงูฺฉุงุฑ ูุงุฒ ุงุณุช ุชุง ุงุจุชุฏุง ุจู ุฏุงุฑฺฉุชูุฑ ูพุฑูฺู ูุง ุจุฑูู ู ูุงุฒ ุงุณุช ุฏุฑ ุฏุงุฎู ูพฺฉุฌ ูุงู ูพุงู ูุง ูุฎุตูุต ุณุฑูุณ ูุง (ฺฉู ุจุง ูุฑูุช .srv ูุณุชูุฏ) ุฑุง ุงุฌุงุฏ ฺฉูู. ุจุฏู ููุธูุฑ ุงุจุชุฏุง ฺฉ ูพูุดู ุจู ูุงู srv ฺฉู ุญุงู ูพุงู ูุง ุณุฑูุณ ูุง ูุณุช ุฑุง ุงุฌุฑุง ุงุฌุงุฏ ู ฺฉูู ู ุฏุฑ ุฏุงุฎู ุขู ฺฉ ูุงู ุจุง ูุงู ุฏูุฎูุงู ู ูุฑูุช .srv (ูุซูุง AddTwoInts.srv) ุฑุง ุงุฌุงุฏ ูฺฉูู:

```bash
$ roscd beginner_tuts/
$ mkdir srv && cd srv
$ touch AddTwoInts.srv
```

ุฏุฑ ุงุฏุงูู ุจุงุฏ ูุณุฌ ุณุฑูุณ ุฑุง ุงุฌุงุฏ ฺฉูู (ูุฑูุช ูุดุงุจู ููุงู ูุณุฌ ูุง ุนุงุฏ ุงุณุช ุจุง ุงู ุชูุงูุช ฺฉู ุฏุฑ ุงูุฌุง ุจุงุฏ ููุน ุฎุฑูุฌ ุฑุง ูุฒ ูุดุฎุต ฺฉููุ ุจุฑุง ูุดุฎุต ฺฉุฑุฏู ุฎุฑูุฌ ุงุฒ "---" ุงุณุชูุงุฏู ูฺฉูู:

```
int64 a
int64 b
---
int64 sum
```

ููฺูู ุงุฒ ุขูุฌุง ฺฉู ูุง ุฏุงุฑู ุงุฒ ูพฺฉุฌ ุขููุฒุด ุฎูุฏ ุฑุง ุงุณุชูุงุฏู ู ฺฉูู ู ุชูุงูุฏ ูุณุชููู ุงู ูุงู ุฑุง ุจู ูพูุดู srv ฺฉูพ ฺฉูุฏ. ุจุฑุง ฺฉูพ ฺฉุฑุฏู ูุงู ูุง ุฏุงุฎู ุฎูุฏ ูพฺฉุฌ ุฑุงุณ ุงุฒ ุฏุณุชูุฑ roscp ุงุณุชูุงุฏู ูฺฉูู:

```bash
$ roscd rospy_tutorials AddTwoInts.srv srv/AddTwoInts.srv
```

ุฏุฑ ุงุฏุงูู ุจุฑุง ูููุงูุฏู ุงู ููุน ูุณุฌ ุจู ฺฉุงููพุงูุฑ ุงุฒ ุฏุฑ ุฏุงุฎู ูุงู CmakeLists.txt ุฏุฑ ุจุฎุด ุณุฑูุณุ ุชุงุจุน add_service_files ุฑุง ุงุฒ ุญุงูุช ฺฉุงููุช ุฎุงุฑุฌ ู ูุงู ูุงู srv ูุงู ุฑุง ูุนุฑู ูฺฉูู:

```python
## Generate services in the 'srv' folder
 add_service_files(
   FILES
   AddTwoInts.srv
 )
```

ุฏุฑ ุงุฏุงูู ุจุง ฺฉูฺฉ ุฏุณุชูุฑ catkin_make ฺฉ ุฏูุฑ ุงุฒ ูพฺฉุฌ ฺฉุงููพุงู ู ฺฏุฑู. ุงฺฉููู ูุง ุณุฑูุณ ุฑุง ุงุฌุงุฏ ฺฉุฑุฏู (ุฏุฑ ูุงูุน ุณุฑูุณ ฺฉ ููุน ูุณุฌ ุงุณุช) ู ุงฺฉููู ุจุฑุง ุจูุฑู ฺฏุฑ ุงุฒ ุงู ุณุฑูุณ ูุงุฒ ุจู ฺฉ ุณุฑูุฑ ู ฺฉูุงูุช ุฏุงุฑู. ุจุฑุง ุงุฌุงุฏ ุณุฑูุฑ ู ฺฉูุงูุช ู ุชูุงูู ุงุฒ ูพุงุชูู ุง ุณ ูพูุงุณ ูพูุงุณ ุจูุฑู ฺฏุฑ ฺฉูู. ุงุจุชุฏุง ูุง ุจุง ฺฉูฺฉ ุณ ูพูุงุณ ูพูุงุณ ุงู ฺฉุงุฑ ุฑุง ุงูุฌุงู ู ุฏูู.

ุจุฑุง ุงุฌุงุฏ ุจุฑูุงูู ุณ ูพูุงุณ ูพูุงุณ ูุง ุฏู ููุฏ ูุงุฒ ุฏุงุฑู ฺฉ ููุฏ ฺฉู ูุธูู ุณุฑูุฑ ุฑุง ุจุฑุง ูุง ุงูุฌุงู ุฏูุฏ ู ฺฉ ููุฏ ฺฉู ุจุฑุง ูุง ูุธูู ฺฉูุงูุช ุฑุง ุจุฑ ุนูุฏู ุจฺฏุฑุฏ. ูุง ุฏู ูุงู add_two_ints_client.cpp ู add_two_ints_server.cpp ุฑุง ุฏุฑ ุฏุงุฎู ูพูุดู src ุงุฌุงุฏ ู ฺฉูู. ฺฉุฏ ูุงู add_two_ints_server.cpp ุจู ุดุฑุญ ุฒุฑ ู ุจุงุดุฏ (ฺฉุงููุช ูุง ฺฏูุง ฺฉุฏ ุงุณุช):

```c++
#include "ros/ros.h"
#include "beginner_tuts/AddTwoInts.h"


// Service Servicer Function: add
bool add(beginner_tuts::AddTwoInts::Request  &req,
         beginner_tuts::AddTwoInts::Response &res)
{
  res.sum = req.a + req.b; // res = {sum}, req ={a,b}
  ROS_INFO("request: x=%ld, y=%ld", (long int)req.a, (long int)req.b);
  ROS_INFO("sending back response: [%ld]", (long int)res.sum);
  return true;
}


int main(int argc, char **argv)
{
  // Initiazte Node
  ros::init(argc, argv, "add_two_ints_server");
  ros::NodeHandle n;


  // Initiate Creating Service Server & And Publishing A "add" Service
  ros::ServiceServer service = n.advertiseService("add_two_ints", add);
  ROS_INFO("Ready to add two ints.");
  ros::spin();


  return 0;
}
```

ู ฺฉุฏ ูุงู add_two_ints_client.cpp ุญุงู ฺฉุฏ ุฒุฑ ู ุจุงุดุฏ:

```c++
#include "ros/ros.h"
#include "beginner_tuts/AddTwoInts.h"
#include <cstdlib>


int main(int argc, char **argv)
{

  // Create A Node
  ros::init(argc, argv, "add_two_ints_client");
  if (argc != 3) // 3 Arguments in Terminal
  {
    ROS_INFO("usage: add_two_ints_client X Y");
    return 1;
  }


  // Create A Service Client
  ros::NodeHandle n;
  ros::ServiceClient client = n.serviceClient<beginner_tuts::AddTwoInts>("add_two_ints");

  // Create A Service
  beginner_tuts::AddTwoInts srv;


  // Getting Service a,b From Terminal Argument
  srv.request.a = atoll(argv[1]);
  srv.request.b = atoll(argv[2]);
  if (client.call(srv))
  {
    ROS_INFO("Sum: %ld", (long int)srv.response.sum);
  }
  else
  {
    ROS_ERROR("Failed to call service add_two_ints");
    return 1;
  }


  return 0;
}
```

ูพุณ ุงุฒ ุชูุธู ฺฉุฏูุง ฺฉ ุฏูุฑ catkin_make ุฑุง ุงุฌุฑุง ฺฉูุฏ ุชุง ูุงู ูุง ฺฉุงููพุงู ุดูุฏ. ุชูุฌู ฺฉูุฏ ฺฉู ุญุชูุง ฺูุงุฑ ุฎุท ุฒุฑ ุฑุง ุฏุฑ ูุงู CMakeList.txt ูุฑุงุฑ ุฏูุฏ ุชุง ุงู ูุงู ูุง ุจู ฺฉุงููพุงูุฑ ูุนุฑู ุดููุฏ:

```c++
add_executable(add_two_ints_server src/add_two_ints_server.cpp)
target_link_libraries(add_two_ints_server ${catkin_LIBRARIES})


add_executable(add_two_ints_client src/add_two_ints_client.cpp)
target_link_libraries(add_two_ints_client ${catkin_LIBRARIES})
```

ุฏุฑ ุงุฏุงูู ุจุฑุง ุงุฌุฑุง ุงู ฺฉุฏุ ฺฉุงููุฏ ูุง ุฒุฑ ุฑุง ุงุฌุฑุง ู ฺฉูู:

```bash
$ roscore
$ rosrun beginner_tuts add_two_ints_serve
$ rosservice call /add_two_ints 1 2
$ rosrun beginner_tuts add_two_ints_client 2 3
```

ุฏุฑ ุงุฏุงูู ุจู ูุญูู ุงุฌุงุฏ ุงู ุจุฑูุงูู ุฏุฑ ูพุงุชูู ู ูพุฑุฏุงุฒู.

ุจุฑุง ูพุงุชูู ูู ุจู ุตูุฑุช ูุดุงุจู ุฏู ููุฏ ุจุง ูุงู ูุง add_two_ints_client.py ู add_two_ints_server.py ุงุฌุงุฏ ู ฺฉูู. ฺฉุฏ ููุฌูุฏ ุฏุฑ add_two_ints_server.py ุจู ุดุฑุญ ุฒุฑ ุงุณุช:

```python
#!/usr/bin/env python


from __future__ import print_function


from beginner_tuts.srv import AddTwoInts,AddTwoIntsResponse
import rospy


def handle_add_two_ints(req):
    print("Returning [%s + %s = %s]"%(req.a, req.b, (req.a + req.b)))
    return AddTwoIntsResponse(req.a + req.b)


def add_two_ints_server():
    rospy.init_node('add_two_ints_server')
    s = rospy.Service('add_two_ints', AddTwoInts, handle_add_two_ints)
    print("Ready to add two ints.")
    rospy.spin()


if __name__ == "__main__":
    add_two_ints_server()

```

ฺฉุฏ ููุฌูุฏ ุฏุฑ add_two_ints_client.py ุจู ุดุฑุญ ุฒุฑ ุงุณุช:

```python
#!/usr/bin/env python

from **future** import print_function

import sys
import rospy
from beginner_tutorials.srv import \*

def add_two_ints_client(x, y):
rospy.wait_for_service('add_two_ints')
try:
add_two_ints = rospy.ServiceProxy('add_two_ints', AddTwoInts)
resp1 = add_two_ints(x, y)
return resp1.sum
except rospy.ServiceException as e:
print("Service call failed: %s"%e)

def usage():
return "%s [x y]"%sys.argv[0]

if **name** == "**main**":
if len(sys.argv) == 3:
x = int(sys.argv[1])
y = int(sys.argv[2])
else:
print(usage())
sys.exit(1)
print("Requesting %s+%s"%(x, y))
print("%s + %s = %s"%(x, y, add_two_ints_client(x, y)))
```

## ุขุดูุง ุจุง ูพุงุฑุงูุชุฑูุง

ุฏุฑ ุงุฏุงูู ุจู ุฑูุด ุงุฑุชุจุงุท ูพุงุฑุงูุชุฑ ู ูพุฑุฏุงุฒู. ูพุงุฑุงูุชุฑูุง ุซุงุจุช ูุง ูุณุชูุฏ ฺฉู ุฏุฑ ูุณุชู ุฑุงุณ ุฐุฎุฑู ู ุดููุฏ. ุจุง ฺฉูฺฉ ุฏุณุชูุฑ ุฒุฑ ู ุชูุงูู ุจุง ูพุงุฑุงูุชุฑูุง ฺฉุงุฑ ฺฉูู:

```bash
$ rosparam -h
$ rosparam set
$ rosparam get
$ rosparam delete
$ rosparam list
```

ุจุฑุง ุฎูุงูุฏู ุง ุฐุฎุฑู ฺฉุฑุฏู ูพุงุฑุงูุชุฑูุง ุฏุงุฎู ฺฉ ูุงู ุงุฒ ุฏู ฺฉุงููุฏ ุฒุฑ ุจูุฑู ู ุจุฑู:

```bash
$ rosparam load [file-address]
$ rosparam dump [file-address]
```

ุจุฑุง ุงุณุชูุงุฏู ุงุฒ ูพุงุฑุงูุชุฑูุง ุฏุฑ ุจุฑูุงูู ุณ ูพูุงุณ ูพูุงุณ ุจู ุดูู ุฒุฑ ุนูู ู ฺฉูู:

```c++
ros::NodeHandle nh;
std::string global_name, relative_name, default_param;
if (nh.getParam("/global_name", global_name))
{
  ...
}

if (nh.getParam("relative_name", relative_name))
{
...
}

// Default value version
nh.param<std::string>("default_param", default_param, "default_value");
```

ููฺูู ุจุฏูู ุงุฌุงุฏ ููุฏ ูู ู ุชูุงูุฏ ุจู ุทุฑู ุฒุฑ ุนูู ฺฉูุฏ:

```c++
std::string global_name, relative_name, default_param;
if (ros::param::get("/global_name", global_name))
{
  ...
}

if (ros::param::get("relative_name", relative_name))
{
...
}

// Default value version
ros::param::param<std::string>("default_param", default_param, "default_value");
```

ุจุฑุง ุณุช ฺฉุฑุฏู ููุงุฏุฑ ุจุฑ ุฑู ูพุงุฑุงูุชุฑ ุฏุฑ ุณ ูพูุงุณ ูพูุงุณ ุจู ุดูู ุฒุฑ ุนูู ู ฺฉูู:

```c++
ros::NodeHandle nh;
nh.setParam("/global_param", 5);
nh.setParam("relative_param", "my_string");
nh.setParam("bool_param", false);
```

ููฺูู ุจุฏูู ุงุฌุงุฏ ููุฏ ู ุชูุงูุฏ ูพุงุฑุงูุชุฑูุง ููุฏุงุฑ ุฏู ฺฉูุฏ:

```c++
ros::param::set("/global_param", 5);
ros::param::set("relative_param", "my_string");
ros::param::set("bool_param", false);
```

ุจุฑุง ูุดุงูุฏู ููุฌูุฏ ุจูุฏู ฺฉ ูพุงุฑุงูุชุฑ ู ุชูุงูุฏ ุจู ุฏู ุฑูุด ุฒุฑ ุนูู ฺฉูุฏ:

```c++
ros::NodeHandle nh;
if (nh.hasParam("my_param"))
{
  ...
}
```

ุง

```c++
if (ros::param::has("my_param"))
{
  ...
}
```

ููฺูู ุจุฑุง ูพุงฺฉ ฺฉุฑุฏู ฺฉ ูพุงุฑุงูุชุฑ ุฏุฑ ุณ ูพูุงุณ ูพูุงุณ ู ุชูุงูุฏ ุจู ุฑูุด ุฒุฑ ุนูู ฺฉูุฏ:

```c++
ros::NodeHandle nh;
nh.deleteParam("my_param");
```

ุง

```c++
ros::param::del("my_param");
```

ุฏุฑ ุฒุจุงู ูพุงุชูู ูุฒ ูุดุงุจู ู ุณุงุฏู ุชุฑ ู ุจุงุดุฏ:

ุฏุฑุงูุช ุงุทูุงุนุงุช ฺฉ ูพุงุฑุงูุชุฑ:

```python
global_name = rospy.get_param("/global_name")
relative_name = rospy.get_param("relative_name")
private_param = rospy.get_param('~private_name')
default_param = rospy.get_param('default_param', 'default_value')

# fetch a group (dictionary) of parameters
gains = rospy.get_param('gains')
p, i, d = gains['p'], gains['i'], gains['d']
```

ููุฏุงุฑุฏู ูพุงุฑุงูุชุฑูุง:

```python
# Using rospy and raw python objects
rospy.set_param('a_string', 'baz')
rospy.set_param('~private_int', 2)
rospy.set_param('list_of_floats', [1., 2., 3., 4.])
rospy.set_param('bool_True', True)
rospy.set_param('gains', {'p': 1, 'i': 2, 'd': 3})

# Using rosparam and yaml strings
rosparam.set_param('a_string', 'baz')
rosparam.set_param('~private_int', '2')
rosparam.set_param('list_of_floats', "[1., 2., 3., 4.]")
rosparam.set_param('bool_True', "true")
rosparam.set_param('gains', "{'p': 1, 'i': 2, 'd': 3}")

rospy.get_param('gains/p') #should return 1
```

ูุดุงูุฏู ููุฌูุฏ ุจูุฏู ฺฉ ูพุงุฑุงูุชุฑ ู ุญุฐู ุขู:

```python
if rospy.has_param('to_delete'):
    rospy.delete_param('to_delete')
```

ุจุฑุง ูุดุงูุฏู ุฌุฒุฆุงุช ุจุดุชุฑ ุจู ููฺฉ ูุง ุฒุฑ ูุฑุงุฌุนู ููุงุฏ:

ูพุงุชูู: http://wiki.ros.org/rospy/Overview/Parameter%20Server

ุณ ูพูุงุณ ูพูุงุณ: http://wiki.ros.org/roscpp/Overview/Parameter%20Server

ุชูุฌู ุดูุฏ ฺฉู ูพุงุฑุงูุชุฑูุง ุจุฑุง ุชูุธูุงุช ุงุณุชูุงุฏู ูุดู!

## ุขุดูุง ุจุง rosbag

ููฺฏุงู ฺฉู ูุงุฒ ุจุงุดุฏ ูพุงู ูุง ุฏุงุฎู ฺฉ ุง ฺูุฏ ุชุงูพฺฉ ุฑุง ุถุจุท ฺฉููุ ุงุฒ rosbag ุจูุฑู ู ุจุฑู. ุจุฑุง ุงุฌุงุฏ ูุงู ุจฺฏ ุฎูุจ ุงุณุช ฺฉู ฺฉ ุฏุงุฑฺฉุชูุฑ ุฏุฑ ูพูุดู ูุถุง ฺฉุงุฑ ูุงู ุงุฌุงุฏ ูฺฉูู ู ูุงู ูุง ุจฺฏ ุฑุง ุฏุฑ ุฏุงุฎู ุขู ุฐุฎุฑู ุณุงุฒ ู ฺฉูู. ุจุฑุง ุฐุฎุฑู ฺฉุฑุฏู ูพุงู ูุง ุฏุงุฎู ุชูุงู ุชุงูพฺฉ ูุง ุงุฒ ุฏุณุชูุฑ ุฒุฑ ุจูุฑู ู ุจุฑู:

```bash
$ mkdir rosbag
$ cd rosbag
$ rosbag record -a
```

ุจุฑุง ูพุงุงู ุฏุงุฏู ุจู ุถุจุท ุงุฒ ุฏุณุชูุฑ control+c ุงุณุชูุงุฏู ู ฺฉูู. ุจุฑุง ูุดุงูุฏู ูุงู ุจฺฏ ุงุฌุงุฏ ุดุฏู ู ูุดุงูุฏู ุฌุฒุฆุงุช ุขู (ูุฎู ุฐุฎุฑูุ ูุฑฺูุ ุทูู ุฒูุงูุ ุฒูุงู ุงุณุชุงุฑุช ู ูพุงุงูุ ุญุฌูุ ููุน ูุณุฌ ูุงุ ุชุงูพฺฉ ูุงุ ุชุนุฏุงุฏ ูพุงู ูุง ุถุจุท ุดุฏู ู ...) ุงุฒ ุฏุณุชูุฑ ุฒุฑ ู ุชูุงู ุงุณุชูุงุฏู ฺฉุฑุฏ:

```bash
$ ls
$ rosbag info [bag-name]
```

ุงฺฉููู ุจุฑุง ุงุฌุฑุง ฺฉุฑุฏู ูุงู ุจฺฏ ุงุฒ ุฏุณุชูุฑ play ุงุณุชูุงุฏู ู ฺฉูู. ุฏุฑ ูุซุงู ูุฏู ุงุฒ ูุงฺูู turtle ุจุฑุง ุงุฌุฑุง ุชุณุช rosbag ุงุณุชูุงุฏู ุดุฏู ุจูุฏุ ูุง ุจุฑุง ุชุณุช ููุฏ teleop_key ุฑุง ู ุจูุฏู ู ููฺูู ุชุงูพฺฉ cmd_vel ุฑุง ุงฺฉู ู ฺฉูู ู ุณูพุณ ูุงู ุจฺฏ ุฑุง play ู ฺฉูู:

```bash
$ rostopic echo /turtle1/cmd_vel
$ rosbag play [bag-name]
```

ูุดุงูุฏู ุฎูุงูุฏ ุดุฏ ฺฉู ุชุงูพฺฉ ูุง ุถุจุท ุดุฏู ููุชุดุฑ ุดุฏู ู ูุงฺฉูพุดุช ุญุฑฺฉุช ู ฺฉูุฏ. ุจุฑุง puase/play ฺฉุฑุฏู ู ุชูุงู ุงุฒ ุฏฺฉูู space ุจูุฑู ุจุฑุฏ. ุจุง ฺฉูุฏ s ูู ู ุชูุงูู ูุฑู ุจู ูุฑู ุจฺฏ ุฑุง ุงุฌุฑุง ฺฉูู. ููฺูู ุจุง ุณูุฆฺุฑ -r ู ุชูุงูู ุณุฑุนุช ูพู ุดุฏู ุฑุง ุงูุฒุงุด ุง ฺฉุงูุด ุฏูู. ุจุฑุง ูุซุงู ู ุฎูุงูู ุจุง ุณุฑุนุช 2 ุจุฑุงุจุฑ ูพุฎุด ุดูุฏ:

```bash
$ rosbag play [bag-name] -r 2
```

ุจุฑุง ุฑฺฉูุฑุฏ ฺฉุฑุฏู ฺฉ ุชุงูพฺฉ ุฎุงุต ู ุชูุงู ุงุฒ ุฏุณุชูุฑ ุฒุฑ ุจูุฑู ุจุฑุฏ (ููฺูู ฺฉ ูุงู ู ุชูุงู ุจู ุจฺฏ ุงุฎุชุตุงุต ุฏุงุฏ):

```bash
$ rosbag record [topic1] [topic2] -O [bag-name]
```

ุจุฑุง ูุดุงูุฏู ุฌุฒุฆุงุช ุจุดุชุฑ ุฏุฑ ููุฑุฏ rosbag ู ุชูุงูุฏ ุจู ููฺฉ ูุง ุฒุฑ ุฏุฑ ุฏุงฺฉูููุช ุฑุงุณ ูุฑุงุฌุนู ููุงุฏ:

http://wiki.ros.org/ROS/Tutorials/Recording%20and%20playing%20back%20data

http://wiki.ros.org/ROS/Tutorials/reading%20msgs%20from%20a%20bag%20file

## ุขุดูุง ุจุง roswtf

ุงุจุฒุงุฑ ุจุนุฏ roswtf ูุณุช ฺฉู ุฎู ฺฉู ุงุณุชูุงุฏู ู ุดูุฏ. ุฏุงุฎู ูุฑ ุฏุงุฑฺฉุชูุฑ ูุงุฑุฏ ฺฉูุฏ ุงุทูุงุนุงุช ููุฏ ุจุฑุง ุฏุจุงฺฏ ฺฉุฑุฏู ู ุฏูุฏ. ุจุฑุง ูุดุงูุฏู ุฌุฒุฆุงุช ุจุดุชุฑ ุจู ููฺฉ ุฒุฑ ูุฑุงุฌุนู ููุงุฏ:

http://wiki.ros.org/ROS/Tutorials/Getting%20started%20with%20roswtf

## ุขุดูุง ุจุง ุงุจุฒุงุฑูุง rqt

ุฏุฑ ุงุฏุงูู ุจู ุจุฑุณ ุงุจุฒุงุฑูุง rqt ู ูพุฑุฏุงุฒู. ุงุจุฒุงุฑ ุฒุฑ ูููุฏุงุฑ ููุฏูุง ู ุชุงูพฺฉ ูุง ุฑุง ุจู ุตูุฑุช ฺฏุฑุงูฺฉ ุจู ูุง ููุงุด ู ุฏูุฏ:

```bash
$ rosrun rqt_graph rqt_graph
```

ุฎุฑูุฌ ุงู ุฏุณุชูุฑ ุจู ุดฺฉู ุฒุฑ ู ุจุงุดุฏ:

![Alt text](image-5.png)

ุฏุณุชูุฑ ุฒุฑ ุจู ูุง ูพุงู ูุง ุฑุฏ ุจุฏู ุดุฏู ุจู ููุฏูุง ุฑุง ุฏุฑ ุฏุงุฎู ฺฉูุณูู ุฒุจุง ููุงุด ูุฏูุฏุ ููฺูู ุงูฺฉุงู ููุชุฑูฺฏ ุฏุชุง ูุฒ ูุณุช:

```bash
$ rosrun rqt_console rqt_console
```

ุฎุฑูุฌ ุงู ุฏุณุชูุฑ ุจู ุดฺฉู ุฒุฑ ุฎูุงูุฏ ุจูุฏ:

![Alt text](image-6.png)

ุชูุฌู ุดูุฏ ฺฉู ุณุทุญ ุงููุช ูพุงู ูุง ุจู ุดุฑุญ ุฒุฑ ุงุณุช:

```
debug
info
warning
error
fatal
```

ฺฉู ุจุฑุง Api ูุฑุจูุท ุจู rospy ุงุณุชูุงุฏู ุงุฒ ุงู ูุงฺฏ ูุง ุจู ุดุฑุญ ุฒุฑ ู ุดูุฏ:

```python
rospy.logdebug(msg, *args, \*\*kwargs)
rospy.loginfo(msg, *args, **kwargs)
rospy.logwarn(msg, \*args, **kwargs)
rospy.logerr(msg, *args, \*\*kwargs)
rospy.logfatal(msg, *args, \*\*kwargs)
```

ุชูุฌู ุดูุฏ ฺฉู ุงฺฏุฑ ูุงุฒ ุดุฏ ุงุฒ ูุชุบุฑ ุฑุง ุฏุฑ ูพุงู ูุงฺฏ ูุง ฺุงูพ ฺฉูุฏ ุงุฒ ูุฑูุช ุฒุฑ ุจูุฑู ุจุจุฑุฏ:

```python
rospy.logerr("%s returned the invalid value %s", other_name, other_value)
```

ููฺูู ุงฺฏุฑ ูุงุฒ ุดุฏ ูุชุบุฑ ุตุญุญ ู ูููุช ูุงฺฏ ุดูุฏ ุงุฒ ูุฑูุช ุฒุฑ ู ุชูุงูุฏ ุจูุฑู ุจุจุฑุฏ:

```python
rospy.logerr("This is a integer %d num and this is float %f", 23, 23.232)
```

ุจุฑุง ูุดุงูุฏู ุฌุฒุฆุงุช ุจุดุชุฑ ุจู ููฺฉ ุฒุฑ ูุฑุงุฌุนู ููุงุฏ:

ุขุดูุง ุจุง ุงุจุฒุงุฑูุง rqt:
http://wiki.ros.org/ROS/Tutorials/UsingRqtconsoleRoslaunch

ูุงฺฏ ูุง ุฏุฑูพุงุชูู: http://wiki.ros.org/rospy/Overview/Logging

ูุงฺฏ ูุง ุฏุฑ ุณ ูพูุงุณ ูพูุงุณ: http://wiki.ros.org/roscpp/Overview/Logging

## ูุงุญุฏ ูุง ุงุณุชุงูุฏุงุฑุฏ

ูุงุญุฏูุง ุงุณุชุงูุฏุงุฑุฏ ROS ุจู ุดุฑุญ ุฒุฑ ูุณุช:

- ุทูู ู ูุงุตูู: ูุชุฑ
- ุฌุฑู: ฺฉููฺฏุฑู
- ุฒูุงู: ุซุงูู
- ุฌุฑุงู: ุขููพุฑ
- ุงุฎุชูุงู ูพุชุงูุณู: ููุช
- ูุบูุงุทุณ: ุชุณูุง
- ุฒุงูู: ุฑุงุฏุงู
- ูุฑฺฉุงูุณ: ูุฑุชุฒ
- ูุฑู: ูุงุช
- ุฏูุง: ุณูุณูุณ

ุจูู ูุงุญุฏ ูุง ูุซู ุณุฑุนุช ู ุดุชุงุจ ู ... ุงุฒ ุชูุณู ูุงุญุฏ ูุง ุจุงูุง ุจุฑ ูู ุจุฏุณุช ู ุขูุฏ.

## ุขุดูุง ุจุง ูุงู ูุง launch

ุฏุฑ ุงุฏุงูู ุจู ูุงูฺ ูุงู ูุง ู ูพุฑุฏุงุฒู ฺฉู ุจู ูุง ุงู ุงูฺฉุงู ุฑุง ู ุฏููุฏ ฺฉู ุจุง ุงุฌุฑุง ฺฉ ูุงูุ ฺูุฏู ููุฏ ุฑุง ููุฒูุงู ุฏุฑูู ฺฉ ุชุฑููุงู ุงุฌุฑุง ฺฉูู ฺฉู ุฎู ุจู ุฎููุช ุดุฏู ูุญุท ฺฉุงุฑ ฺฉูฺฉ ู ฺฉูุฏ. ุจุฑุง ุงูฺฉุงุฑ ฺฉ ูพูุดู ูุฌุฒุง ุฏุฑ ูพฺฉุฌ ูุงู ุชุญุช ุนููุงู launch ุงุฌุงุฏ ู ฺฉูู ู ูุงู ูุง launch ูุงู ุฑุง ุฏุฑ ุฏุงุฎู ุงู ูพูุดู ูุฑุงุฑ ู ุฏูู:

```bash
$ roscd beginner_tuts/
$ mkdir launch
```

ุญุงู ูุซุงู ู ุฎูุงูู ุจุฑูุงูู ูุงฺฉูพุดุช ุฑุง ุจู ฺฉูฺฉ ฺฉ ูุงูฺ ูุงู ุงุฌุฑุง ฺฉูู. ฺฉ ูุงู ุจุง ูุงู turtle_run.launch ุงุฌุงุฏ ู ฺฉูู:

```bash
$ touch turtle_run.launch
```

ู ฺฉุฏ ุฒุฑ ุฑุง ุฏุฑ ุฏุงุฎู ุขู ูุฑุงุฑ ู ุฏูู:

```xml
<launch>
    <node pkg="turtlesim" type="turtlesim_node" name="sim" />
    <node pkg="turtlesim" type="turtle_teleop_key" name="control" />
</launch>
```

ุฏุฑ ฺฉุฏ ุจุงูุง 2 ููุฏ turtlesim_node ู turtle_teleop_key ุงุฒ ูพฺฉุฌ turtlesim ูุฑุงุฑ ุงุณุช ุงุฌุฑุง ุดูุฏ. (ุชูุฌู ุดูุฏ ฺฉู type ููุงู ููุฏ ุงุณุช) ู ฺฉ ูุงู ูู ุจู ูุฑ ฺฉุฏุงู ุงุฒ ููุฏ ูุง ุงุฎุชุตุงุต ู ุฏูู. ุชูุฌู ุดูุฏ ฺฉู ูุจู ุงุฒ ุงุฌุฑุง ฺฉุฑุฏู ฺฉ ูุงู launch ุญุชูุง ุจุงุฏ ูุณุชู ูุนุงู ุจุงุดุฏ ูู ุงฺฏุฑ ูู ูุนุงู ูุจูุฏุ ุฎูุฏ ุฏุณุชูุฑ roslaunch ุขูุฑุง ุงุฌุฑุง ู ฺฉูุฏ. ุจุง ุฏุณุชูุฑ ุฒุฑ ู ุชูุงูู ูุงู ูุงูฺ ุงุฌุงุฏ ุดุฏู ุฑุง ุงุฌุฑุง ฺฉูู:

```bash
$ roslaunch turtle_run.launch
```

ููฺูู ุชูุฌู ุดูุฏ ฺฉู ูุง ู ุชูุงูู ุจุง ฺฉูฺฉ ุฏุณุชูุฑ ุฒุฑ ุงุฒ ุณุงุฑ ุฏุงุฑฺฉุชูุฑ ูุง ูุงู ูุงูฺ ููุฌูุฏ ุฏุฑ ูพฺฉุฌ ูุฏูุธุฑ ุฑุง ุงุฌุฑุง ฺฉูู:

```bash
$ roslaunch beginner_tuts turtle_run.launch
```

ุฏุฑูู ูุงู ูุงูฺ ู ุชูุงู ุงุฒ attribute ูุง ูุฎุชูู ุจูุฑู ุจุฑุฏ. ฺฉ ุงุฒ ุงู attribute ูุง respawn ู ุจุงุดุฏ ฺฉู ููุฏ ุฑุง ูุฑ ฺูุฏ ุจุงุฑ ูู ฺฉู ุจุจูุฏู ูุฌุฏุฏ ุงุฌุฑุง ฺฉูุฏ (ุฏุฑ ุงู ูุซุงู ูพูุฌุฑู ูุงฺฉูพุดุช ูพุณ ุงุฒ ูุฑ ุจุงุฑ ุจุณุชู ุดุฏูุ ูุฌุฏุฏ ูพุณ ุงุฒ 3 ุซุงูู ุชุงุฎุฑ ุงุฒ ูู ุงุฌุฑุง ู ุดูุฏ. ุชูุฌู ุดูุฏ ฺฉู ุชุงุฎุฑ ุงุชุฑุจูุช ุงุฌุจุงุฑ ูุณุช!)

```xml
<launch>
    <node pkg="turtlesim" type="turtlesim_node" name="sim" respawn="true" respawn_deley="3"/>
    <node pkg="turtlesim" type="turtle_teleop_key" name="control" />
</launch>
```

ุง ู ุชูุงูู ุจุง ฺฉูฺฉ ุงุชุฑุจูุช required ฺฉ ููุฏ ุฑุง ุงุฌุจุงุฑ ฺฉูู (ุฏุฑ ุตูุฑุชฺฉู ุงู ููุฏ ุจุณุชู ุดูุฏุ ฺฉู ูุณุชู ูุชููู ู ุดูุฏ.):

```xml
<launch>
    <node pkg="turtlesim" type="turtlesim_node" name="sim" required="true" />
    <node pkg="turtlesim" type="turtle_teleop_key" name="control" />
</launch>
```

ุง ู ุชูุงูู ุฏุฑ ุตูุฑุช ฺฉู ููุฏ ุขุฑฺฏููุงู ูุฑูุฏ ุฏุงุฑุฏุ ุจุฑุง ุขู ููุงุฏุฑ ุฑุง ูุฒ ุชุนู ฺฉูู:

```xml
<launch>
    <node pkg="turtlesim" type="turtlesim_node" name="sim" args="1 2 3" />
    <node pkg="turtlesim" type="turtle_teleop_key" name="control" />
</launch>
```

ุง ู ุชูุงูู ุจฺฏูู ุฏุฑ ุตูุฑุชฺฉู ฺฉู ฺฉ ููุฏ ุงุฌุฑุง ุดุฏุ ุชูุงู ูพุงุฑุงูุชุฑูุง ูุจู ุฐุฎุฑู ุดุฏู ุฏุฑ ุฑู ุญุฐู ุดูุฏ:

```xml
<launch>
    <node pkg="turtlesim" type="turtlesim_node" name="sim" clear_params="true" />
    <node pkg="turtlesim" type="turtle_teleop_key" name="control" />
</launch>
```

ุชูุฌู ุดูุฏ ฺฉู ุฏุฑ ุฒุจุงู xml ุชฺฏ ูุง ฺฉู ุชฺฏ ูุง ุจุณุชู ุดููุฏู ู ุชฺฉ ุจู ุดฺฉู ุฒุฑ ุงุณุช:

```xml
<closing></closing>
<non-closing>
```

ุชฺฏ node ุฑุง ู ุชูุงูู ุจู ุตูุฑุช ุฏูุชุง ูุฒ ุชุนุฑู ฺฉูู ู ุฏุฑ ุฏุงุฎู ุขู ุงุฒ ุชฺฏูุง ูุฎุชูู ุงุณุชูุงุฏู ฺฉูู ุงุฒ ุฌููู ุชฺฏ env ฺฉู ุจุฑุง ุชุนุฑู ูุฌุฏุฏ ูุชุบุฑูุง ูุญุท ฺฉุงุฑ ุชุนุฑู ู ุดูุฏุ ููุฏุงุฑ name ูุงู ุขู ูุชุบุฑ ู ููุฏุงุฑ value ุจุฑุงุจุฑ ููุฏุงุฑ ุฌุฏุฏ ุงุณุช ฺฉู ู ุฎูุงูู ุจู ุขู ุงุฎุชุตุงุต ุฏูู:

```xml
<launch>
    <node pkg="turtlesim" type="turtlesim_node" name="sim">
        <env name="Env_Varaible_Name" value="New_Value" />
    </node>
    <node pkg="turtlesim" type="turtle_teleop_key" name="control" />
</launch>
```

ููฺูู ู ุชูุงู ุชุงูพฺฉ ูุง ุฑุง re-map ฺฉุฑุฏ (ุนู ฺฉ ูุงู ุฏฺฏุฑ ุจุฌุง ูุงู ูพุดูุฑุถ ุชุงูพฺฉ ฺฉููุ ุงู ููุฑุฏ ุฒูุงู ฺฉุงุฑุจุฑุฏ ู ุดูุฏ ฺฉู ูุงุฒ ุจุงุดุฏ ุงุฒ ฺฉ ููุฏ ู ุชุงูพฺฉ ฺูุฏู ุจุงุฑ ุงุณุชูุงุฏู ฺฉูู ู ู ุฎูุงูู ุชุงูพฺฉ ูุฑ ููุฏ ูุฌุฒุง ุจุงุดุฏ). ุจุฑุง ูุซุงู ุฏุฑ ูุซุงู ูุงฺฉูพุดุช ู ุฎูุงูู ฺฉู ุชุงูพฺฉ cmd_vel ุจุง ูุงู vel2 ุฑููพ ุดูุฏุ ุฏุฑ ูุญุท ุชุฑููุงู ุงู ุฑููพ ฺฉุฑุฏู ุจู ุดฺฉู ุฒุฑ ุฏุฑ ู ุขุฏ:

```bash
$ roscore
$ rosrun turtlesim turtlesim_node /turtle1/cmd_vel:=vel2
$ rosrun turtlesim turtle_teleop_key /turtle1/cmd_vel:=vel2
```

ู ุฏุฑ ูุญุท ูุงูฺ ูุงู ูุซุงู ูุงฺฉูพุดุช ุจู ุตูุฑุช ุฒุฑ ุฏุฑ ู ุขุฏ:

```xml
<launch>
    <node pkg="turtlesim" type="turtlesim_node" name="sim">
        <remap from="/turtle1/cmd_vel" to="vel2" />
    </node>
    <node pkg="turtlesim" type="turtle_teleop_key" name="control">
        <remap from="/turtle1/cmd_vel" to="vel2" />
    </node>
</launch>
```

ููฺูู ู ุชูุงูู ุฏุฑ ุชฺฏ ููุฏ ฺฉ ูพุงุฑุงูุชุฑ ุฏูุฎูุงู ุฑุง ุชุนุฑู ฺฉูู ุชุง ุฏุฑ ููฺฏุงู ุงุฌุฑุง ูุณุชูุ ุฏุฑ ูุถุง ูพุงุฑุงูุชุฑูุง ุงุฌุฑุง ุดูุฏ (ุชูุฌู ุดูุฏ ููุน ูพุงุฑุงูุชุฑ ู ุชูุงูุฏ str ุ int ุ bool ุ float). ุฏุฑ ุตูุฑุชฺฉู ุชุนุฏุงุฏ ูพุงุฑุงูุชุฑูุง ุจุฑูุงูู ูุง ุฒุงุฏ ูุณุช ู ุชูุงูู ุขูุฑุง ุฏุฑ ุฏุงุฎู ฺฉ ูุงู ุฐุฎุฑู ฺฉูู ู ุฏุฑ ุฏุงุฎู ูุงูฺ ูุงููุงู ุขูุฑุง ูุฑุงุฎูุงู ฺฉูู. ุจูุชุฑ ุงุณุช ฺฉู ุงู ูุงู ุฏุฑ ฺฉ ูพูุดู ูุฌุฒุง ุจู ูุงู param ุณุงุฎุชู ุดูุฏ:

```bash
$ roscd beginner_tuts
$ mkdir params
$ cd params/
$ touch param
```

ุฏุฑ ุฏุงุฎู ูุงู param ูุซูุง ูุชุบุฑ ุฒุฑ ุฑุง ุฐุฎุฑู ู ฺฉูู:

```
hello world!
```

ุฏุฑ ุงุฏุงูู ุฏุฑ ฺฉุฏ ูุงูฺ ูุงู:

```xml
<launch>
    <node pkg="turtlesim" type="turtlesim_node" name="sim">
        <remap from="/turtle1/cmd_vel" to="vel2" />
        <param name="fromFile" type="str" textfile="$(find beginner_tuts)/params/param" />

    </node>
    <node pkg="turtlesim" type="turtle_teleop_key" name="control">
        <remap from="/turtle1/cmd_vel" to="vel2" />
    </node>
</launch>
```

ุงูุจุชู ุจูุชุฑ ุจุฑุง ุญุงูุช ฺฉู ูุฑุงุฑ ุงุณุช ุชุนุฏุงุฏ ุฒุงุฏ ูพุงุฑุงูุชุฑุง ุฑุง ุงุฌุฑุง ฺฉููุ ุญุชูุง ุงุฒ ูุฑูุช yaml ุจูุฑู ุจุจุฑู. ุจุฑุง ุงูฺฉุงุฑ ฺฉ ูพูุดู yaml ุงุฌุงุฏ ู ฺฉูู ู ูพุงุฑุงูุชุฑูุงูุงู ุฑุง ุฏุฑ ุฏุงุฎู ุขู ุฐุฎุฑู ฺฉูู:

```bash
$ roscd beginner_tuts/
$ mkdir yaml
$ cd yaml
$ touch param.yaml
```

ุฏุฑ ุฏุงุฎู ูุงู param.yaml ู ุชูุงูู ุจุง ฺฉูฺฉ ูุฑูุช ุฏุงุฏู ุงุณุชุงูุฏุงุฑุฏ Yaml ูพุงุฑุงูุชุฑูุง ูุฏูุธุฑูุงู ุฑุง ุชุนุฑู ฺฉููุ ุจุฑุง ูุซุงู:

```yaml
paramGroup1:
  intPAram: 1
  floatParam: 5.2323
paramGroup2:
  listParam: [1, 2, 3, "four"]
  dicParam:
    a: "This is a"
    b: "and this is b"
```

ุญุงู ุจุฑุง ุฎูุงูุฏู ุงู ูุงู ุฏุงุฎู ูุงูฺ ูุงู ุจู ุชุฑุชุจ ุฒุฑ ุนูู ู ฺฉูู:

```xml
<launch>
    <node pkg="turtlesim" type="turtlesim_node" name="sim">
        <remap from="/turtle1/cmd_vel" to="vel2" />
        <param name="fromFile" type="str" textfile="$(find beginner_tuts)/params/param" />
        <rosparam command="load" file="$(find beginner_tuts)/yaml/param.yaml" />

    </node>
    <node pkg="turtlesim" type="turtle_teleop_key" name="control">
        <remap from="/turtle1/cmd_vel" to="vel2" />
    </node>
</launch>
```

ู ุจุฑุง ุงุฌุฑุง ููุงููุฏ ุณุงุจู ุนูู ู ฺฉูู:

```bash
$ roslaunch beginner_tuts turtle_run.launch
```

ููฺูู ุจุง ฺฉูฺฉ ุชฺฏ rosparam ูุฒ ู ุชูุงูู ูุชุบุฑ ุฎุงุต ุฏุฑ ูุญุท ููุฏุงุฑ ุฏู ฺฉููุ ุจู ุดฺฉู ุฒุฑ:

```xml
<launch>
    <node pkg="turtlesim" type="turtlesim_node" name="sim">
        <rosparam param="NN">1212</rosparam>
    </node>
    <node pkg="turtlesim" type="turtle_teleop_key" name="control">
        <remap from="/turtle1/cmd_vel" to="vel2" />
    </node>
</launch>
```

ุจุฑุง ูุงูฺ ูุงู ูุง ูุฒ ู ุชูุงู ุขุฑฺฏููุงู ูุฑูุฏ ุชุนุฑู ฺฉุฑุฏุ ุนู ฺฉุงุฑ ฺฉุฑุฏ ฺฉู ููฺฏุงู ุงุฌุฑุง ฺฉ ูุงูฺ ูุงู ุฏุฑ ุชุฑููุงู ูุฑูุฏ ุงุฒ ุขู ุจฺฏุฑู. ุฏุฑ ูุซุงู ุฒุฑ ูุงู ูุงูฺ ฺฉ ุขุฑฺฏููุงู ู ฺฏุฑุฏ ู ุขูุฑุง ุฏุฑ ูุชุบุฑ ุจู ูุงู myArg ุฐุฎุฑู ู ฺฉูุฏ ฺฉู ุฏุฑ ุฌุง ุฌุง ูุงู ูุงูฺ ูุงุจู ุงุณุชูุงุฏู ุงุณุช (ู ุชูุงู ฺฉ ููุฏุงุฑ ุฏูุงูุช ูุฒ ุชุนุฑู ฺฉุฑุฏ):

```xml
<launch>
    <arg name="myArg" default="[2,3]" />

    <node pkg="turtlesim" type="turtlesim_node" name="sim">
        <remap from="/turtle1/cmd_vel" to="vel2" />
        <param name="fromFile" type="str" textfile="$(find beginner_tuts)/params/param" />
        <rosparam command="load" file="$(find beginner_tuts)/yaml/param.yaml" />
        <param name="NN" value="$(arg myArg)" />
    </node>
    <node pkg="turtlesim" type="turtle_teleop_key" name="control">
        <remap from="/turtle1/cmd_vel" to="vel2" />
    </node>

</launch>
```

ููฺูู ุฏุฑ ูุงู ูุง ูุงูฺ ู ุชูุงูู ฺฉ ูุงู ูุงูฺ ุฏฺฏุฑ ุฑุง ูุฑุงุฎูุงู ู ุงูฺฉููุฏ ฺฉูู:

```xml
<launch>
    <include file="$(find beginner_tuts)/launch/somefile.launch" />
    ...
</launch>
```

ูพุณ ุงุฒ ุงูฺฉููุฏ ฺฉุฑุฏูุ ูุจู ุงุฒ ุงุฌุฑุง ุจุฏูู ุงุตู ูุงูฺ ูุงูุ ูุงู ุงูฺฉููุฏ ุดุฏู ุงุฌุฑุง ู ุดูุฏ. ุจุฑุง ฺฉุงููุช ฺฉุฑุฏู ุฏุฑ ูุงู xml ุงุฒ ููุงู ุฑูุด html ุจูุฑู ู ุจุฑู:

```xml
<!-- my comment -->
```

ููฺูู ู ุชูุงูู ฺฉ ูุงู ูุงูฺ ุฑุง ุจุง ูู ุงุณูพุณ ูุง ฺฏููุงฺฏูู (ns) ฺฏุฑููพ ุจูุฏ ฺฉูู (ุฒุงุฏ ฺฉุงุฑุจุฑุฏ ูุฏุงุฑู ูู ุจุฏ ูุณุช ุจุฏููู):

```xml
<launch>
    <group ns="group1">
    <node pkg="turtlesim" type="turtlesim_node" name="sim">
        <remap from="/turtle1/cmd_vel" to="vel2" />
        <param name="fromFile" type="str" textfile="$(find beginner_tuts)/params/param" />
        <rosparam command="load" file="$(find beginner_tuts)/yaml/param." />

    </node>
    <node pkg="turtlesim" type="turtle_teleop_key" name="control">
        <remap from="/turtle1/cmd_vel" to="vel2" />
    </node>
    </group>

    <group ns="group2">
        .... other nodes ...
    </group>

</launch>
```

ุจุฑุง ูุดุงูุฏู ุฌุฒุฆุงุช ุจุดุชุฑ ุจู ุฏุงฺฉูููุช ุฑุงุณ ูุฑุงุฌุนู ููุงุฏ:

http://wiki.ros.org/roslaunch

http://wiki.ros.org/ROS/Tutorials/UsingRqtconsoleRoslaunch

## ุขุดูุง ุจุง TFูุง

ุฏุฑ ุงู ูุณูุช ูุตุฏ ูพุฑุฏุงุฎุชู ุจู tf ูุง ุฑุง ุฏุงุฑู ฺฉู ฺฉูุชุฑ ุจู ุขููุง ูพุฑุฏุงุฎุชู ู ุดูุฏ. tf ูุง ุฏุฑ ูุงูุน ููุงู ุฏุณุชฺฏุงู ูุง ูุฎุชุตุงุช ูุณุชูุฏ ฺฉู ุจู ุฑุจุงุช ู ุงุฌุฒุงุก ูุฎุชูู ุขู ู ฺุณุจูุฏ ู ุจุฑุง ูุญุงุณุจุงุช ุฑุจุงุชฺฉ ููุฑุฏ ุงุณุชูุงุฏู ูุฑุงุฑ ู ฺฏุฑูุฏ. ุจุฑุง ุขุดูุง ุงููู ุจุง tf ูุง ุงุจุชุฏุง ฺฉ ูุซุงู ุงุฌุฑุง ู ฺฉูู:

```bash
$ roslaunch turtle_tf turtle_tf_demo.launch
```

ุจุนุฏ ูุดุงุจู ุงู ูุงูฺ ูุงู ุฎูุฏูุงู ุงุฌุงุฏ ู ฺฉูู ู ุฎุฑูุฌ ุฑุง ูุดุงูุฏู ูฺฉ ฺฉูู. ุจุง ฺฉูฺฉ ุฏุณุชูุฑ ุฒุฑ ู ุชูุงูู ูุณุช tf ูุง ูุนุงู ุฏุฑ ุจุฑูุงูู ุฑุง ุจู ุตูุฑุช ูููุฏุงุฑ ูุดุงูุฏู ฺฉูู:

```bash
$ rosrun rqt_tf_tree rqt_tf_tree
```

ุจุฑุง ุจุฏุณุช ุขูุฑุฏู ุงุฎุชูุงู ูฺฉุงู ุฏู tf ู ุชูุงูู ุงุฒ ุฏุณุชูุฑ ุฒุฑ ุจูุฑู ุจุจุฑู:

```bash
$ rosrun tf tf_echo turtle1 turtle2
```

ุงุฎุชูุงู ูููุนุช ุฏุฑ ุฏุณุชฺฏุงู ูุง ูุฎุชูู ุจู ูุง ุฏุงุฏู ู ุดูุฏ.

ุจู ุจุฑูุงูู ุง ฺฉู ฺฉ tf ุฑุง ุฏุฑูู ุชุงูพฺฉ ููุชุดุฑ ู ฺฉูุฏุ ุจู ุงุตุทูุงุญ tf broadcaster ู ฺฏููุฏ ฺฉู ูุญูู ุงุฌุงุฏ ฺฉุฑุฏู ุขู ุจู ฺฉูฺฉ ุณ ูพูุงุณ ูพูุงุณ ู ูพุงุชูู ุฑุง ุชูุถุญ ู ุฏูู. ุจุฏู ููุธูุฑ ฺฉ ูพฺฉุฌ ูุฌุฒุงุก ุงุฒ ูพฺฉุฌ beginner_tuts ุงุฌุงุฏ ู ฺฉูู:

```bash
$ cd Desktop/catkin_ws/src/
$ catkin_create_pkg learning_tf tf rospy roscpp turtlesim
$ cd ..
$ catkin_make
```

ุชูุฌู ุดูุฏ ฺฉู ฺูู ูุง ูุจูุง ุงู ูุฑฺฉ ุงุณูพุณ ุฑุง ุฏุฑ ูุงู .bashrc ูุนุฑู ฺฉุฑุฏู ุงู ูุงุฒ ุจู ุงู ุณูุฑุณ ฺฉุฑุฏู ูุฌุฏุฏ ูุณุช. ุฏุฑ ุงุจุชุฏุง ู ุฎูุงูู ุงู ุจุฑูุงูู ุฑุง ุจุง ฺฉูฺฉ ุณ ูพูุงุณ ูพูุงุณ ุจููุณูุ ูพุณ ุงุจุชุฏุง ูุงุฑุฏ ูพูุดู ูุฑุจูุทู ุดุฏู ู ฺฉ ูุงู ุณ ูพูุงุณ ูพูุงุณ ู ุดูู:

```bash
$ cd src/learning_tf/src/
$ touch turtle_tf_broadcaster.cpp
```

ฺฉุฏ ูุฑุจูุท ุจู ูุงู ุณ ูพูุงุณ ูพูุงุณ ุจุฑุงุฏฺฉุณุชุฑ ุจู ุดฺฉู ุฒุฑ ู ุจุงุดุฏ (ุชูุถุญุงุช ูุฑุจูุทู ฺฉุงููุช ุดุฏู ุงุณุช)ุ ุฏุฑ ฺฉุฏ ุฒุฑ ฺฉ ุชุงุจุน ฺฉุงูุจฺฉ ููุฌูุฏ ุงุณุช ู ฺฉ ุชุงุจุน ุงุตูุ ุฏุฑ ุชุงุจุน ุงุตู ุงุจุชุฏุง ฺฉ ููุฏ ุงุฌุงุฏ ฺฉุฑุฏู ู ุณูพุณ ูุฑูุฏ ฺฉ ุขุฑฺฏููุงู ุฑุง ุจุฑุง ุขู ุถุฑูุฑ ู ฺฉูู (ฺฉู ุขุฑฺฏููุงู ูุฑูุฏุ ูุงู ูุงฺฉูพุดุช ุงุณุช). ุณูพุณ ุฏุฑ ุฏุงุฎู ุชุงูพฺฉ ูพูุฒุดู ูุงฺฉูพุดุช ุณุงุจุณฺฉุฑุงุจ ู ฺฉูู ู ุงุทูุงุนุงุช ูุงฺฉูพุดุช ุฑุง ุจู ุชุงุจุน poseCallback ูพุงุณ ู ุฏูู. ุฏุฑูู ุงู ุชุงุจุน ูุฒ ุงุจุชุฏุง ฺฉ ุขุจุฌฺฉุช ุจุฑุงุฏฺฉุณุชุฑ ู ุณุงุฒู ู ุณูพุณ ูุฎุชุตุงุช ฺฉุงุฑุชุฒู ู ุฒูุงู ุง ุฑุง ุฏุฑ ูุฑูุช ุงุณุชุงูุฏุงุฑุฏ tf ูุง ุฐุฎุฑู ฺฉุฑุฏู ู ุฏุฑ ููุงุช ุขูุฑุง ุจุฑุงุฏฺฉุณุช ู ฺฉูู:

```c++
#include <ros/ros.h>
#include <tf/transform_broadcaster.h> // For creating tf
#include <turtlesim/Pose.h> // Reading Pose of turtles from pose topic


std::string turtle_name; // Name of turtle as string value


// We make this call-back fcn for excute after receiving data from "pose" topic
void poseCallback(const turtlesim::PoseConstPtr& msg)
{
  // Create A Transform Broadcaster Obj
  static tf::TransformBroadcaster br;


  // Katezian Specs.
  tf::Transform transform;
  transform.setOrigin( tf::Vector3(msg->x, msg->y, 0.0) ); // x y z


  // Angular Specs.
  tf::Quaternion q;
  q.setRPY(0, 0, msg->theta); // roll pitch yaw
  transform.setRotation(q);


  // Broadcaster The Created Tf
  br.sendTransform(tf::StampedTransform(transform, ros::Time::now(), "world", turtle_name));
}


// Main Fcn
int main(int argc, char** argv)
{
  ros::init(argc, argv, "my_tf_broadcaster"); // Create Node

  // At least one argument needed, Arg #1 => turtle_name
  if (argc != 2){ROS_ERROR("need turtle name as argument"); return -1;};
  turtle_name = argv[1];


  ros::NodeHandle node;
  // Subscibe to turtle#/pose and pass it to "poseCallback" fcn
  ros::Subscriber sub = node.subscribe(turtle_name+"/pose", 10, &poseCallback);


  ros::spin();
  return 0;
};
```

ููฺูู ฺฉุฏ ุฒุฑ ุฑุง ุจู ูุงู CMakeLists.txt ุงุถุงูู ู ฺฉูู ุชุง ูุงู ุณ ูพูุงุณ ูพูุงุณ ูุง ูุงุจูุช ุงุฌุฑุง ูพุฏุง ฺฉูุฏ:

```c
add_executable(turtle_tf_broadcaster src/turtle_tf_broadcaster.cpp)
target_link_libraries(turtle_tf_broadcaster ${catkin_LIBRARIES})
```

ุฏุฑ ุจูุชุฑ ุงุณุช ุจุฑุง ุงู ูพฺฉุฌ ูุฒ ฺฉ ูุงู ูุงูฺ ุงุฌุงุฏ ฺฉูู ฺุฑุง ฺฉู ููุฒูุงู ูุฑุงุฑ ุงุณุช ุจุฑูุงูู ูุงฺฉูพุดุช ุฑุง ูุฒ ุงุฌุฑุง ฺฉููุ ฺฉ ูุงู ูุงูฺ ุฏุฑ ูพูุดู ูุงูฺ ุจุง ูุงู start_demo.launch ุงุฌุงุฏ ูฺฉูู ู ฺฉุฏ ุฒุฑ ุฑุง ุฏุฑ ุฏุงุฎู ุขู ูุฑุงุฑ ู ุฏูู:

```xml
<launch>
    <!-- Turtlesim Node-->
    <node pkg="turtlesim" type="turtlesim_node" name="sim"/>
    <node pkg="turtlesim" type="turtle_teleop_key" name="teleop" output= "screen"/>


    <node pkg="learning_tf" type="turtle_tf_broadcaster"
          args="/turtle1" name="turtle1_tf_broadcaster" />


    <node pkg="learning_tf" type="turtle_tf_broadcaster"
          args="/turtle2" name="turtle2_tf_broadcaster" />

</launch>
```

ุชูุฌู ุดูุฏ ฺฉู ุฏุฑ ุงู ูุฑุญูู ุจุฑุง ูุง ููุท ฺฉ ูุงฺฉูพุดุช turtle1 ุงุฌุงุฏ ู ุดูุฏ ู ูุฎุชุตุงุช ุขู ูุณุจุช ุจู world ุฏุฑ ุชุงูพฺฉ tf ฺุงูพ ู ุดูุฏ. ุฏุฑ ุงุฏุงูู ุจู ูุญูู ุงุฌุฑุง ุงู ฺฉุฏ ุฏุฑ ุฒุจุงู ูพุงุชูู ุชูุถุญุงุช ุงุฑุงู ุฎูุงูุฏ ุดุฏ.

ุฎุฑูุฌ ุงู ุจุฑูุงูู ุจู ุดฺฉู ุฒุฑ ุฎูุงูุฏ ุจูุฏ:

![ุชุตูุฑ ุงุฌุฑุง ุจุฑูุงูู](image-7.png)

ููฺูู ุจุง ุฏุณุชูุฑ rqt_tf_tree ู ุชูุงู ูุณุช tfูุง ุฑุง ูุณุจุช ุจู ุตูุฑุช ุฏุฑุฎุช ูุดุงูุฏู ฺฉุฑุฏ:

![ุฎุฑูุฌ ุฏุณุชูุฑ](image-8.png)

ุชูุฌู ุดูุฏ ฺฉู ุฏุฑ ุงู ูุฑุญูู ุจุฑุง ูุง ููุท ฺฉ ูุงฺฉูพุดุช turtle1 ุงุฌุงุฏ ู ุดูุฏ ู ูุฎุชุตุงุช ุขู ูุณุจุช ุจู world ุฏุฑ ุชุงูพฺฉ tf ฺุงูพ ู ุดูุฏ. ุฏุฑ ุงุฏุงูู ุจู ูุญูู ุงุฌุฑุง ุงู ฺฉุฏ ุฏุฑ ุฒุจุงู ูพุงุชูู ุชูุถุญุงุช ุงุฑุงู ุฎูุงูุฏ ุดุฏ.

ุฏุฑ ุงุฏุงูู ูุตุฏ ุฏุงุฑู ุจุฑูุงูู ุจุฑุงุจุฏฺฉุณุชุฑ ุฑุง ุจุง ูพุงุชูู ูฺฏุงุฑุด ฺฉูู. ุจุฑุง ุงูฺฉุงุฑ ฺฉ ูพูุดู ุจุง ูุงู script ุฏุฑ ุฏุงุฑฺฉุชูุฑ ุงุตู ู ุณุงุฒู ู ฺฉ ูุงู ูพุงุชูู ุจุง ูุงู ุงุฌุฑุง ู ฺฉูู:

```py
#!/usr/bin/env python
import roslib
roslib.load_manifest('learning_tf')
import rospy


import tf
import turtlesim.msg # Importing Turtlesim Messages


# Call-Back Fcn.
def handle_turtle_pose(msg, turtlename):
    # Make a tf broadcaster object
    br = tf.TransformBroadcaster()


    # Broadcasting the tf in standard format
    br.sendTransform((msg.x, msg.y, 0),
                     tf.transformations.quaternion_from_euler(0, 0, msg.theta),
                     rospy.Time.now(),
                     turtlename,
                     "world")



# Main Fcn.
if __name__ == '__main__':
    # Initiate A Node
    rospy.init_node('turtle_tf_broadcaster')


    # Read The Turtle Name
    turtlename = rospy.get_param('~turtle')


    # Subscribe in /turtle#/pose and pass it to handle_turtle_pose
    rospy.Subscriber('/%s/pose' % turtlename,
                     turtlesim.msg.Pose,
                     handle_turtle_pose,
                     turtlename)
    rospy.spin()
```

ุญุชูุง ูพูุดู ูุงู ุงุณฺฉุฑูพ ุชุง ุฑุง ุจุง ฺฉุงููุฏ ุฒุฑ ุงุฌุฑุง ูพุฐุฑ ฺฉูุฏ:

```bash
$ chmod +x scripts/
```

ุจุฑุง ุงุฌุฑุง ุฑุงุญุชุฑ ฺฉุฏ ุฒุฑ ุฑุง ุฏุฑูู ูุงู ูุงูฺ ูุฑุงุฑ ู ุฏูู:

```xml
<launch>
    <!-- Turtlesim Node-->
    <node pkg="turtlesim" type="turtlesim_node" name="sim"/>
    <node pkg="turtlesim" type="turtle_teleop_key" name="teleop" output="screen"/>


    <node name="turtle1_tf_broadcaster" pkg="learning_tf" type="turtle_tf_broadcaster.py" respawn="false" output="screen" >
      <param name="turtle" type="string" value="turtle1" />
    </node>
    <node name="turtle2_tf_broadcaster" pkg="learning_tf" type="turtle_tf_broadcaster.py" respawn="false" output="screen" >
      <param name="turtle" type="string" value="turtle2" />
    </node>
</launch>
```

ุฎุฑูุฌ ูุดุงุจู ูุงู ุณ ูพูุงุณ ูพูุงุณ ุฎูุงูุฏ ุจูุฏ. ุฏุฑ ุงุฏุงูู ูุตุฏ ุฏุงุฑู ูุงฺฉูพุดุช ุฏูู ุฑุง ูุฒ ุจู ุจุฑูุงูู ุงุถุงูู ฺฉููุ ุจู ฺฏููู ุง ฺฉู ูุงฺฉูพุดุช ุงูู ุงฺฏุฑ ุญุฑฺฉุช ฺฉุฑุฏุ ูุงฺฉูพุดุช ุฏูู ุขูุฑุง ุฏูุจุงู ฺฉูุฏ. ฺฉ ูุงู ุณ ูพูุงุณ ูพูุงุณ ุฌุฏุฏ ุจู ูุงู turtle_tf_listener.cpp ุงุฌุงุฏ ู ฺฉูู ู ฺฉุฏ ุฒุฑ ุฑุง ุฏุฑ ุฏุงุฎู ุขู ูุฑุงุฑ ู ุฏูู. (ฺฉุงููุช ูุง ฺฏุฐุงุฑ ุดุฏู):

```c
#include <ros/ros.h>
#include <tf/transform_listener.h>
#include <geometry_msgs/Twist.h>
#include <turtlesim/Spawn.h> // Fpr making new turtle


// Main loop
int main(int argc, char** argv){
  ros::init(argc, argv, "my_tf_listener"); // Initiate node


  ros::NodeHandle node;


  // Use turtlesim spawn service to make a new turtle
  ros::service::waitForService("spawn");


  // Make a client for spawn service
  ros::ServiceClient add_turtle =
   node.serviceClient<turtlesim::Spawn>("spawn");
  turtlesim::Spawn srv;


  // Calling service for adding new turtle => name: turtle2
  add_turtle.call(srv);


  // Make a topic publisher (turtle2/cmd_vel)
  ros::Publisher turtle_vel =
    node.advertise<geometry_msgs::Twist>("turtle2/cmd_vel", 10);


  // Create a tf listner for finding relative pose betwen turtle1 & turtle2
  tf::TransformListener listener;


  ros::Rate rate(10.0);
  while (node.ok()){
    tf::StampedTransform transform;
    try{
      ros::Time now = ros::Time::now();
      ros::Time past = now - ros::Duration(5.0);


      // Wait for calc of t1 & t2 pose
      listener.waitForTransform("/turtle2", now ,"/turtle1",past , "/world" ,ros::Duration(1.0));


      //  Find the diff. pose betwen t1 & t2 and put it in transform obj.
      listener.lookupTransform("/turtle2", now, "/turtle1", past,"/world" , transform);
    }
    catch (tf::TransformException &ex) {
      ROS_ERROR("%s",ex.what());
      ros::Duration(1.0).sleep();
      continue;
    }


    // Calc of linear and angular velocity
    geometry_msgs::Twist vel_msg;
    vel_msg.angular.z = 8.0 * atan2(transform.getOrigin().y(),
                                    transform.getOrigin().x());
    vel_msg.linear.x = 1.0 * sqrt(pow(transform.getOrigin().x(), 2) +
                                  pow(transform.getOrigin().y(), 2));
    turtle_vel.publish(vel_msg);


    rate.sleep();
  }
  return 0;
};
```

ููฺูู ฺฉุฏ ุฒุฑ ุฑุง ุฏุฑ CMakeList.txt ุงุถุงูู ู ฺฉูู:

```c
add_executable(turtle_tf_listener src/turtle_tf_listener.cpp)
target_link_libraries(turtle_tf_listener ${catkin_LIBRARIES})
```

ู ฺฉุฏ ูุฑุจูุท ุจู ูุงูฺ ูุงู ุฑุง ุจู ุตูุฑุช ุฒุฑ ุชุบุฑ ู ุฏูู (ููุฏ ูุฑุจูุท ุจู ูุงฺฉูพุดุช ุฏูู ุงุถุงูู ุดุฏ):

```xml
<launch>
    <!-- Turtlesim Node-->
    <node pkg="turtlesim" type="turtlesim_node" name="sim"/>
    <node pkg="turtlesim" type="turtle_teleop_key" name="teleop" output= "screen"/>


    <node pkg="learning_tf" type="turtle_tf_broadcaster" args="/turtle1" name="turtle1_tf_broadcaster" />


    <node pkg="learning_tf" type="turtle_tf_broadcaster" args="/turtle2" name="turtle2_tf_broadcaster" />

    <node pkg="learning_tf" type="turtle_tf_listener" name="turtle2_tf_listener" />


</launch>
```

ุญุงู ูุงูฺ ูุงู ุฑุง ุงุฌุฑุง ู ฺฉูู. ููฺูู ุฏุฑ ฺฉ ุชุฑููุงู ูุฌุฒุงุก ูููุฏุงุฑ ุฏุฑุฎุช tfูุง ุฑุง ุจู ููุงุด ู ฺฏุฐุงุฑู. ุฎุฑูุฌ ุจู ุดฺฉู ุฒุฑ ุฎูุงูุฏ ุจูุฏ:

![ุชุตูุฑ ุฎุฑูุฌ](image-9.png)

ุญุงูุง ุจุง ฺฉูฺฉ ูพุงุชูู ุงู ฺฉุงุฑ ุฑุง ุงูุฌุงู ู ุฏูู. ฺฉ ูุงู ุฌุฏุฏ ุจุง ูุงู turtle_tf_listener.py ุงุฌุงุฏ ู ฺฉูู ู ฺฉุฏ ุฒุฑ ุฑุง ุฏุฑ ุฏุงุฎู ุขู ูุฑุงุฑ ู ุฏูู. ฺฉุฏ ูพุงู ฺฉ ูพุงุจูุดุฑ ุงุฌุงุฏ ฺฉุฑุฏู ู ุจุง ูุญุงุณุจู ุงุฎุชูุงู ูฺฉุงู ู ุฒุงูู ุง ุจู ุฏู ูุงฺฉูพุดุช ฺฉ ุณุฑุนุช ุฎุท ู ุฒุงูู ูุญุงุณุจู ุฏุฑ ุชุงูพฺฉ turtle2/cmd_vel ูพุงุจูุด ู ฺฉูุฏ:

```py
#!/usr/bin/env python3
import roslib
roslib.load_manifest('learning_tf')
import rospy
import math
import tf
import geometry_msgs.msg
import turtlesim.srv


if __name__ == '__main__':


    # Initizate The Node
    rospy.init_node('turtle_tf_listener')


    # Create tf listner obj.
    listener = tf.TransformListener()


    # Make new turtle using spawn service
    rospy.wait_for_service('spawn')
    spawner = rospy.ServiceProxy('spawn', turtlesim.srv.Spawn)
    spawner(4, 2, 0, 'turtle2') # Turtle2 position


    # Create publisher for publish data in trutlesim "turtle2/cmd_vel" topic
    turtle_vel = rospy.Publisher('turtle2/cmd_vel', geometry_msgs.msg.Twist,queue_size=1)


    # Find diff. pose betwen 2 trutle
    rate = rospy.Rate(10.0)
    while not rospy.is_shutdown():
        try:
            now = rospy.Time.now()
            past = now - rospy.Duration(5.0)
            #listener.waitForTransformFull("/turtle2", now,"/turtle1", past,"/world", rospy.Duration(1.0))
            #(trans, rot) = listener.lookupTransformFull("/turtle2", now,"/turtle1", past,"/world")

            (trans, rot) = listener.lookupTransformFull('/turtle2',rospy.Time(0),'/turtle1', rospy.Time(0), "/world")


        except (tf.LookupException,  tf.ConnectivityException,  tf.ExtrapolationException):
            continue


        # Calc Angular and Linear velocity
        angular = 4 * math.atan2(trans[1], trans[0])
        linear = 0.5 * math.sqrt(trans[0] ** 2 + trans[1] ** 2)
        cmd = geometry_msgs.msg.Twist()
        cmd.linear.x = linear
        cmd.angular.z = angular


        # Publish data to "turtle2/cmd_vel" topic
        turtle_vel.publish(cmd)


        rate.sleep()
```

ูุงู ูุงูฺ ูพุงุชูู ูู ุจู ุดฺฉู ุฒุฑ ุชุบุฑ ู ฺฉูุฏ:

```xml
<launch>
    <!-- Turtlesim Node-->
    <node pkg="turtlesim" type="turtlesim_node" name="sim"/>
    <node pkg="turtlesim" type="turtle_teleop_key" name="teleop" output="screen"/>


    <node name="turtle1_tf_broadcaster" pkg="learning_tf" type="turtle_tf_broadcaster.py" respawn="false" output="screen" >
      <param name="turtle" type="string" value="turtle1" />
    </node>
    <node name="turtle2_tf_broadcaster" pkg="learning_tf" type="turtle_tf_broadcaster.py" respawn="false" output="screen" >
      <param name="turtle" type="string" value="turtle2" />
    </node>


    <node name="listener" pkg="learning_tf" type="turtle_tf_listener.py" respawn="false" output="screen" >
    </node>
</launch>
```

ูุงู ูุงูฺ ุฑุง ุงุฌุฑุง ู ฺฉูู. ุฎุฑูุฌ ูุดุงุจู ุจุฑูุงูู ุณ ูพูุงุณ ูพูุงุณ ุฎูุงูุฏ ุจูุฏ.

ุชุง ุงูุงู ูุง ุชูุงู ูุฑู ูุง ฺฉู ุงุฌุงุฏ ฺฉุฑุฏู ูุณุจุช ุจู world ุจูุฏ ูู ู ุชูุงูู ูุณุจุช ุจู ฺฉ ูุฑู ุฏูุฎูุงู (ูุซูุง turtle1) ฺฉ ูุฑู ุฑุง ุงุฌุงุฏ ฺฉูู. ุจุฑุง ุงู ฺฉุงุฑ ฺฉ ูุงู ุจุง ูุงู frame_tf_broadcaster.cpp ุงุฌุงุฏ ฺฉุฑุฏู ู ฺฉุฏ ุฒุฑ ุฑุง ุฏุฑ ุฏุงุฎู ุขู ูุฑุงุฑ ู ุฏูู (ฺฉ tf ุฌุฏุฏ ุงุฌุงุฏ ุดุฏู ู ุจุฑุงุฏฺฉุณุช ู ุดูุฏ)

```c
#include <ros/ros.h>
#include <tf/transform_broadcaster.h>

int main(int argc, char\*\* argv){
ros::init(argc, argv, "my_tf_broadcaster");
ros::NodeHandle node;

tf::TransformBroadcaster br;
tf::Transform transform;

ros::Rate rate(10.0);
while (node.ok()){
transform.setOrigin( tf::Vector3(0.0, 2.0, 0.0) ); // relative kartezian pose to turtle1
transform.setRotation( tf::Quaternion(0, 0, 0, 1) ); // relative angular pose to turtle1

    // Make new frame relative to turtle1 with the name of carrot1
    br.sendTransform(tf::StampedTransform(transform, ros::Time::now(), "turtle1", "carrot1"));
    rate.sleep();

}
return 0;
};
```

ูุฑุงููุด ูุดูุฏ ฺฉู ฺฉุฏ ุฒุฑ ุฏุฑ ุงูุชูุง ูุงู CMakeList.txt ุงุถุงูู ุดูุฏ:

```c
add_executable(frame_tf_broadcaster src/frame_tf_broadcaster.cpp)
target_link_libraries(frame_tf_broadcaster ${catkin_LIBRARIES})
```

ู ุชูุงู ุงุฒ ุงู tf ุฌุฏุฏ ุฏุฑ ุฌุงูุง ูุฎุชูู ุงุณุชูุงุฏู ฺฉุฑุฏุ ุจุฑุง ูุซุงู ู ุชูุงู ุฏุฑ ุจุฑูุงูู ุฏูุจุงู ุฑู ูุงฺฉูพุดุช ูุง ุงุฒ carrot1 ุจุฌุง turtle1 ุจูุฑู ุจุจุฑู. ุงู ูุงู ุฑุง ูู ุจู ูุงูฺ ูุงู ุงุถุงูู ู ฺฉูู:

```xml
<launch>
    <!-- Turtlesim Node-->
    <node pkg="turtlesim" type="turtlesim_node" name="sim"/>
    <node pkg="turtlesim" type="turtle_teleop_key" name="teleop" output= "screen"/>

    <node pkg="learning_tf" type="turtle_tf_broadcaster" args="/turtle1" name="turtle1_tf_broadcaster" />

    <node pkg="learning_tf" type="turtle_tf_broadcaster" args="/turtle2" name="turtle2_tf_broadcaster" />

    <node pkg="learning_tf" type="turtle_tf_listener" name="turtle2_tf_listener" />

    <node pkg="learning_tf" type="frame_tf_broadcaster" name="frame_tf_broadcaster" />
</launch>
```

ุญุงู ุจุฑูุงูู ุฑุง ุงุฌุฑุง ู ฺฉูู. ุฎุฑูุฌ ุจู ุดฺฉู ุฒุฑ ุฎูุงูุฏ ุจูุฏ:

![ุฎุฑูุฌ ุชุตูุฑ](image-10.png)

ูุฑุขูุฏ ุงุถุงูู ฺฉุฑุฏู ูุฑู ุจุง ฺฉูฺฉ ูพุงุชูู ูุฒ ฺฉุงููุง ูุดุงุจู ุงุณุชุ ฺฉ ูุงู ูพุงุชูู ุจุง ูุงู frame_tf_broadcaster.py ุงุฌุงุฏ ู ฺฉูู ู ฺฉุฏ ุฒุฑ ุฑุง ุฏุฑ ุฏุงุฎู ุขู ูุฑุงุฑ ู ุฏูู:

```py
#!/usr/bin/env python3
import roslib
roslib.load_manifest('learning_tf')


import rospy
import tf


if __name__ == '__main__':
    rospy.init_node('fixed_tf_broadcaster')
    br = tf.TransformBroadcaster()
    rate = rospy.Rate(10.0)
    while not rospy.is_shutdown():
        br.sendTransform((0.0, 2.0, 0.0),
                         (0.0, 0.0, 0.0, 1.0),
                         rospy.Time.now(),
                         "carrot1",
                         "turtle1")
        rate.sleep()

```

ุณูพุณ ุฏุงุฎู ูุงูฺ ูุงู ูพุงุชูู ุฑุง ุจู ุงู ุดฺฉู ุชุบุฑ ู ุฏูู:

```xml
<launch>
    <!-- Turtlesim Node-->
    <node pkg="turtlesim" type="turtlesim_node" name="sim"/>
    <node pkg="turtlesim" type="turtle_teleop_key" name="teleop" output="screen"/>


    <node name="turtle1_tf_broadcaster" pkg="learning_tf" type="turtle_tf_broadcaster.py" respawn="false" output="screen" >
      <param name="turtle" type="string" value="turtle1" />
    </node>
    <node name="turtle2_tf_broadcaster" pkg="learning_tf" type="turtle_tf_broadcaster.py" respawn="false" output="screen" >
      <param name="turtle" type="string" value="turtle2" />
    </node>


    <node name="listener" pkg="learning_tf" type="turtle_tf_listener.py" respawn="false" output="screen" >
    </node>


    <node name="frame_tf_broadcaster" pkg="learning_tf" type="frame_tf_broadcaster.py" respawn="false" output="screen" />

</launch>
```

ฺฏุงูุง ูุงุฒ ู ุดูุฏ ฺฉู ฺฉ tf ุซุงุจุช ูุณุจุช ุจู ฺฉ tf ุฏฺฏุฑ ุงุฌุงุฏ ฺฉูู. ููุงููุฏ ูุซุงู ูุจู ฺฉู carrot1 ุฑุง ูุณุจุช ุจู turtle1 ุชุนุฑู ฺฉุฑุฏู. ุจุฑุง ุชุนุฑู ุงูฺฏููู ุงุฒ tf ูุง ุงุณุชุงุชฺฉ (ฺฉู ูุณุจุช ุจู ฺฉ ูุฑู ุฏฺฏุฑ ฺฉุงููุง ุซุงุจุช ูุณุชูุฏ) ูุงุฒ ุจู ุชุนุฑู ุจุฑูุงูู ูุณุชูู ูุณุช ู ู ุชูุงู ุจุง ฺฉูฺฉ ูุงูฺ ูุงู ุงู ฺฉุงุฑ ุฑุง ุงูุฌุงู ุฏุงุฏ ุจุฑุง ูุซุงู ููุฏ ุฒุฑ ฺฉ ูุฑู ุซุงุจุช ูุณุจุช ุจู ูุฑู turtle1 ุชุนุฑู ู ฺฉูุฏ ฺฉู ูููุนุช ูุณุจุช ุขู ุจุง ุชุฑุชุจ x y z ุจุฑุงุจุฑ 0 2 0 ู ูุดุฎุตุงุช ฺฉูุงุชุฑูู 0 0 0 1 ุชุนุฑู ู ุดูุฏ (w=1) ู ุงู ฺฉุงุฑ ุจุง ูุฑฺฉุงูุณ 100 ุตูุฑุช ู ูพุฐุฑุฏุ ูุงู ูุฑู ุฌุฏุฏ ูู carrot1 ุงุณุช:

```xml
<node pkg="tf" type="static_transform_publisher" args="0 2 0 0 0 0 1 turtle1 carrot1 100 name="frame1" />
```

ุจูุชุฑ ุงุณุช ููุดู ุจุฌุง ุงููุฑ ุงุฒ ฺฉูุงุชุฑููู ุงุณุชูุงุฏู ฺฉูู. ุงุณุชุงูุฏุงุฑุงุฏ ุฑุงุณ ุฏุฑ ูุญุท ุณู ุจุนุฏ ฺฉูุงุชุฑููู ุงุณุช.

ุฏุฑ ุงุฏุงูู ุฏุฑ ููุฑุฏ rviz ุตุญุจุช ุดุฏ ฺฉู ฺฉ ุงุจุฒุงุฑ ฺฏุฑุงูฺฉ ุจุฑุง ููุงุด ุฏุงุฏู ูุง ู ุจุงุดุฏ. ุจุง ฺฉูฺฉ ฺฉุงููุฏ Rviz ู ุชูุงูุฏ ุงู ูุญุท ุฑุง ุจุงุฒ ููุงุฏ. ุฏุฑ ุดุงุฎู ฺฉูุงุฑ Display ู ุชูุงูุฏ ูุณุช ููุงุฑุฏ ููุงุด ุฑุง ฺฉูุชุฑู ฺฉูุฏ. ุญุชูุง Fixed Frame ุฑุง ุจุฑ ุฑู world ูุฑุงุฑ ุฏูุฏ ู ุจุง ุฏฺฉูู Add ูุณุช tf ูุง ุฑุง ุงุถุงูู ููุงุฏ. ุฎุฑูุฌ ุจู ุดฺฉู ุฒุฑ ุฎูุงูุฏ ุจูุฏ:

![ูุญุท rviz](image-11.png)

ุจุฑุง ุฐุฎุฑู ููู ุณุชุงูพ ููุงุด ฺฉุงูุณุช ุงุฒ ููู File ฺฏุฒูู Save Config As .. ุงูุฏุงู ููุงุฏ. ุจูุชุฑ ุงุณุช ฺฉ ูพูุดู ุฏุฑ ูพฺฉุฌ ุฎูุฏ ุชุญุช ุนููุงู rviz ุงุฌุงุฏ ฺฉูู ู ูุงู ูุง rviz ุฑุง ุฏุฑ ุฏุงุฎู ุขู ุฐุฎุฑู ฺฉูู. ุจุฑุง ุงุถุงูู ฺฉุฑุฏู ููุฏ rviz ุจู ูุงู ูุงูฺ ุจู ุชุฑุชุจ ุฒุฑ ุนูู ู ฺฉูู:

```xml
<launch>
    <!-- Turtlesim Node-->
    <node pkg="turtlesim" type="turtlesim_node" name="sim"/>
    <node pkg="turtlesim" type="turtle_teleop_key" name="teleop" output= "screen"/>

    <node pkg="learning_tf" type="turtle_tf_broadcaster" args="/turtle1" name="turtle1_tf_broadcaster" />


    <node pkg="learning_tf" type="turtle_tf_broadcaster" args="/turtle2" name="turtle2_tf_broadcaster" />

    <node pkg="learning_tf" type="turtle_tf_listener" name="turtle2_tf_listener" />


    <node pkg="learning_tf" type="frame_tf_broadcaster" name="frame_tf_broadcaster" />

    <node pkg="rviz" type="rviz" name="vizualiator" args="-d $(find learning_tf)/rviz/turtle.rviz" />

</launch>
```

ุจุฑุง ูุดุงูุฏู ุฌุฒุฆุงุช ุจุดุชุฑ ุฏุฑ ููุฑุฏ tf ุจู ุฏุงฺฉูููุช ุฑุงุณ ูุฑุงุฌุนุช ููุงุฏ

http://wiki.ros.org/tf/Tutorials

## ุฒูุงู ุฏุฑ ROS

ุฏุฑ ุงุจุชุฏุง ุงู ุจุฎุด ูุตุฏ ุฏุงุฑู ุชุง ุฏุฑ ููุฑุฏ ุฒูุงู ูุง ุตุญุจุช ฺฉูู. ุจุฑุง ุฏุฑุงูุช ุฒูุงู ุญุงู (ุขุจุฌฺฉุช begin) ุฏุฑ ุณ ูพูุงุณ ูพูุงุณ ุจู ุชุฑุชุจ ุฒุฑ ุนูู ู ฺฉูู:

```c++
ros::Time begin = ros::Time::now();
ROS_INFO("Seconds from 1/1/1970 = %d and nanaoSeconds = %d", begin.sec, begin.nsec)
```

ุจุฑุง ุฏุฑุงูุช ุฏุฑุงูุช ุฒูุงู ุญุงู ุฏุฑ ุฒุจุงู ูพุงุชูู ุจู ุดฺฉู ุฒุฑ ุนูู ู ฺฉูู:

```py
now = rospy.get_rostime()
rospy.loginfo("Current time %i %i", now.secs, now.nsecs)
```

ุจุฑุง ุฏุฑุงูุช ุจู ุตูุฑุช ูุชุบุฑ float ุฏุฑ ุณ ูพูุงุณ ูพูุงุณ ุจู ุดฺฉู ุฒุฑ:

```c++
double secs =ros::Time::now().toSec();
```

ู ุฏุฑ ูพุงุชูู ุจู ุดฺฉู ุฒุฑ ุนูู ู ฺฉูู:

```py
seconds = rospy.get_time()
```

ุจุฑุง ุชุนุฑู ฺฉ ุฒูุงู ุฎุงุต (Time) (ุชูุฌู ุดูุฏ ฺฉู ุจุง Duration ูุชูุงูุช ุงุณุช) ุฎุงุต ู ุชูุงูุฏ ุงุฒ ุชุงุจุน ุฏู ุญุงูุช ุฒุฑ ุงุณุชูุงุฏู ฺฉูุฏ:

```c++
ros::Time a_little_after_the_beginning(0.001); // in Seconds

// or

ros::Time a_little_after_the_beginning(0, 1000000); // in (Seconds, nanoSeconds)
```

ุฏุฑ ูพุงุชูู ูุฒ ุจู ุดฺฉู ุฒุฑ ุงุฌุงุฏ ู ุดูุฏ:

```py
t = rospy.Time.from_sec(123456.789) # 123456 seconds and 789000000 nano-seconds

# or

t = rospy.Time(12345, 6789) # 12345 seconds and 6789 nano-seconds
```

ุงฺฉููู ฺฉู ุจู ูุญูู ุงุฌุงุฏ ฺฉ ุฒูุงู ุฎุงุต ุง ุจู ุงุตุทูุงุญ Time ูพุฑุฏุงุฎุชู ู ุชูุงูู ุจู ูุญูู ุงุฌุงุฏ ฺฉ ุจุงุฒู ุฒูุงู ุฎุงุต ุง ุจู ุงุตุทูุงุญ Duration ุจูพุฑุฏุงุฒู. ุจุฑุง ูุซุงู ุฏุฑ ฺฉุฏ ุณ ูพูุงุณ ูพูุงุณ ุฒุฑ 60.1 ุซุงูู ุฑุง ุจู ุฏู ุฑูุด ุฏุฑ ุขุจุฌฺฉุช five_seconds ุฐุฎุฑู ฺฉุฑุฏู ุงู:

```c++
ros::Duration five_seconds(60.1);

// or

ros::Duration five_seconds(60, 100000000);
```

ุฏุฑ ูพุงุชูู ูุฒ ุจู ุดฺฉู ุฒุฑ ุงุณุช:

```py
d = rospy.Duration.from_sec(60.1)
```

ุจุฑุง ูุซุงู ุงุฒ Duration ู ุชูุงูู ุจุฑุง ูุชููู ฺฉุฑุฏู ุจุฑูุงูู ุจุฑุง ุจุงุฒู ุฒูุงู ุฎุงุต ุงุณุชูุงุฏู ฺฉูู. ุจุฑุง ูุซุงู ฺฉุฏ ุฒุฑ ุฏุฑ ุณ ูพูุงุณ ูพูุงุณ ุจุฑูุงูู ุฑุง ุจุฑุง 10 ุซุงูู ูุชููู ู ฺฉูุฏ:

```c++
ros::Duration(0.5).sleep(); // sleep for half a second
```

ุฏุฑ ูพุงุชูู ุจู ุฏู ุดฺฉู ุฒุฑ ุงูฺฉุงู ูพุฐุฑ ุงุณุช:

```py
# sleep for 10 seconds
rospy.sleep(10.)

# or

# sleep for duration
d = rospy.Duration(10, 0)
rospy.sleep(d)
```

ููฺูู ู ุชูุงูู ุจู ุตูุฑุช ูุฑฺฉุงูุณ ุงุฒ ุฒูุงู ุงุณุชูุงุฏู ฺฉูู (ูุซูุง ุจฺฏูู ุจุฑูุงูู ุจุง ูุฑฺฉุงูุณ ุฎุงุต ูุชููู ุดูุฏ) ฺฉู ุฏุฑ ุงูุฌุง ุงุฒ Rate ุจูุฑู ู ุจุฑู. ฺฉุฏ ุณ ูพูุงุณ ูพูุงุณ ุจู ุชุฑุชุจ ุฒุฑ ุงุณุช:

```c++
ros::Rate r(10); // 10 hz
while (ros::ok())
{
  ... do some work ...
  r.sleep();
}
```

ู ฺฉุฏ ูพุงุชูู ุจู ุชุฑุชุจ ุฒุฑ ุงุณุช:

```py
r = rospy.Rate(10) # 10hz
while not rospy.is_shutdown():
    pub.publish("hello")
    r.sleep()
```

ุชูุฌู ุดูุฏ ฺฉู ุงฺฏุฑ ููุทู ูุง ุฒุฑ ุฏุฑ ุงุนูุงู ุฌุจุฑ ุฌูุน ู ุชูุฑู ุฒูุงู ุจุฑูุฑุงุฑ ุงุณุช:

```
D = Duration
T = Time

---

D+D = D
D-D = D
T+D = T
T-D = T
T-T = D
T+T = Not Defined
```

ุฏุฑ ุงุฏุงูู ุฏุฑ ููุฑุฏ ุชุงูุฑ ุฑุง ูุง ุตุญุจุช ู ฺฉูู. ุชุงูุฑ ุฒูุงู ุงุณุชูุงุฏู ู ุดูุฏ ฺฉู ูุง ูุตุฏ ุฏุงุฑู ฺฉ ฺฉุงุฑ ุฑุง ุจุง ูุงุตูู ุฒูุงู ุฎุงุต ุงูุฌุงู ุฏูู. ุจุฑุง ูุซุงู ูุชุฏ ุฒุฑ ุฏุฑ ุจุงุฒู ุฒูุงู ุชุนุฑู ุดุฏู ุจุฑุง ูุง ุชุงุจุน timerCallback ุฑุง ุงุฌุฑุง ู ฺฉูุฏ:

```c++
ros::Timer timer = nh.createTimer(ros::Duration(0.1), timerCallback);
```

ููฺูู ู ุชูุงูู ุชุงูุฑ ุฑุง ุจู ฺฏููู ุง ุชุนุฑู ฺฉูู ฺฉู ููุท ฺฉ ุจุงุฑ ุงุฌุฑุง ุดูุฏุ ููุท ฺฉุงู ุงุณุช ฺฉู bool_oneshot ุฑุง ุจุฑุงุจุฑ false ูุฑุงุฑ ุฏูู:

```c++
ros::Timer ros::NodeHandle::createTimer(ros::Duration period, <callback>, bool oneshot = false);
```

ููฺูู ุงฺฏุฑ ุจุฎูุงูู ฺฉ ุชุงูุฑ ุฑุง ูุชููู ฺฉูู ู ุชูุงูู ุงุฒ ุฏุณุชูุฑ ุฒุฑ ุงุณุชูุงุฏู ฺฉูู:

```py
timer.stop()
```

ููฺูู ุจุฑุง ุดุฑูุน ูุฌุฏุฏ ุชุงูุฑ ู ุชูุงูู ุงุฒ ุชุงุจุน .start() ุงุณุชูุงุฏู ฺฉูู. ูพุณ ุฏุฑ ุฌูุน ุจูุฏ ฺฉ ุชุงุจุน ฺฉุงู ุจฺฉ ุฏุงุฑู ู ฺฉ ุชุงูุฑ ฺฉู ุขู ุชุงุจุน ุฑุง ุฏุฑ ุจุงุฒู ุฒูุงู ฺฉู ูุง ุจุฑุงุด ูุดุฎุต ฺฉุฑุฏู ุงุฌุฑุง ู ฺฉูุฏ:

```c++

void callback(const ros::TimerEvent& event)
{
...
}

...
ros::Timer timer = nh.createTimer(ros::Duration(0.1), callback);
```

ุงฺฏุฑ ูุฑุงุฑ ุจูุฏ ุงุฒ ูุชุฏ ุจู ุนููุงู ุชุงุจุน ฺฉุงู ุจฺฉ ุงุณุชูุงุฏู ฺฉูู (ุจุฑุง ูุซุงู ูุชุฏ callback ุงุฒ ฺฉูุงุณ foo ฺฉู ุขุจุฌฺฉุช foo_object ุงุฒ ุงู ฺฉูุงุณ ุงุณุช) ฺฉุงู ุงุณุช ฺฉู ุจู ุดูู ุฒุฑ ูุชุฏ ฺฉุงู ุจฺฉ ู ุขุจุฌฺฉุช ุฑุง ุจู ุชุงูุฑ ุจุฏูู:

```c++
class Foo
{
public:
  void Foo::callback(const ros::TimerEvent& event)
  {
  ...
  }

  ros::Timer timer;
};

...
// then, during initialization, etc
timer = nh.createTimer(ros::Duration(0.1), &Foo::callback, &foo_object);

...
Foo foo_object;
```

ุงฺฉููู ุจู ุณุฑุงุบ ุงุฌุงุฏ ุงู ุชุงูุฑูุง ุจู ุฒุจุงู ูพุงุชูู ู ุฑูู:

```py
def my_callback(event):
print 'Timer called at ' + str(event.current_real)

rospy.Timer(rospy.Duration(2), my_callback)
```

ุจุฑุง ูุชููู ฺฉุฑุฏู ุชุงูุฑ ู ุชูุงูู ุงุฒ ูุชุฏ ุฒุฑ ุจูุฑู ุจุจุฑู:

```py
t = rospy.Timer(rospy.Duration(2), my_callback)
t.shutdown()
```

## ุงุฌุฑุง ุชุญุช ุดุจฺฉู ROS

ุจุฑุง ุฑุงู ุงูุฏุงุฒ ุฑุงุณ ุฏุฑ ุดุจฺฉู ฺฉุงู ุงุณุช ุจุฏุงูู ฺฉู ูุณุชู ุฏุฑ ฺฉุงููพูุชุฑ master ุงุฌุฑุง ู ุดูุฏ ู ุงูฺฉุงู ูพุฎุด ฺฉุฑุฏู ููุฏูุง ุฏุฑ ฺฉุงููพูุชุฑ ูุง slave ุงูฺฉุงู ูพุฐุฑ ุงุณุช.

```
ุงู ุจุฎุด ูุงูุต ุงุณุช ู ุชฺฉูู ุฎูุงูุฏ ุดุฏ
```

## ุงุฑุชุจุงุท Action ุฏุฑ ูุญุท ROS

ุฏุฑ ุงุฏุงูู ูุตุฏ ุฏุงุฑู ุฏุฑ ููุฑุฏ ูุญูู ุงุฑุชุจุงุท actionlib ุชูุถุญ ุจุฏูู. ุชูุงูุช ุงฺฉุดู ูุจ ุจุง ุณุฑูุณ ุงู ุงุณุช ฺฉู ุฏุฑ ุณุฑูุณ ูุง ููฺฏุงู ฺฉู request ุงุฑุณุงู ู ุดูุฏุ ุชุง ุจุงุฒฺฏุดุช respond ุจุฑูุงูู ูุชููู ุงุณุช ูู ุฏุฑ actionlib ุฏุฑุฎูุงุณุช ุงุฑุณุงู ุดุฏู ูู ุชุง ุฒูุงู ุจุงุฒฺฏุดุช ูพุงุณุฎุ ุจุฑูุงูู ูุชููู ูู ุดูุฏ ู ุจุฑูุงูู ุงุตู ุฏุฑ ุญุงู ุงุฌุฑุง ู ูุงูุฏ. ุญุช ุฏุฑ ุงู ููุน ุงุฑุชุจุงุท ุชุง ูุจู ุงุฒ ุจุงุฒฺฏุดุช ูพุงุณุฎุ ุณุฑูุณ actionlib ู ุชูุงูุฏ ูุฏุจฺฉ ุจุฏูุฏ.

ูฺฉุชู: ุฏุฑ ุงู ุฑูุด ุงฺฉุดูุ ุณุฑูุฑ ู ฺฉูุงูุช ุฑุง ุฏุงุฑูุ ุจู ูพุงู ฺฉู ุงุฒ ููุฏ ฺฉูุงูุช ุจู ุณุฑูุฑ ุงุฑุณุงู ู ุดูุฏ ูุฏู (ุง Goal) ู ฺฏููุฏ ู ุจู ูพุงู ฺฉู ุณุฑูุฑ ุฏุฑ ุฌูุงุจ ุจู ฺฉูุงูุช ุงุฑุณุงู ู ฺฉูุฏ ูุชุฌู (ุง Result) ู ฺฏููุฏ. ููฺูู ููุงูฺฏููู ฺฉู ุฐฺฉุฑ ุดุฏุ ุฏุฑ ุฑูุด ุงฺฉุดู ุณุฑูุฑ ุชุง ูุจู ุงุฑุณุงู ูุชุฌู ู ุชูุงูุฏ ุจุงุฒุฎูุฑุฏูุง ูุญุธู ุง (ุง Feedback) ูุฒ ุจุฏูุฏ.

ุฏุฑ ุงุฏุงูู ุจู ูุญูู ุงุฌุงุฏ ุณุฑูุฑ ู ฺฉูุงูุช ุงฺฉุดู ุฏุฑ ุฒุจุงู ูุง ูพุงุชูู ู ุณ ูพูุงุณ ูพูุงุณ ุฎูุงูู ูพุฑุฏุงุฎุช. ุจูุชุฑ ุงุณุช ุจุฑุง ุงูฺฉุงุฑ ฺฉ ูพฺฉุฌ ูุฌุฒุงุก ุจุณุงุฒู ุชุง ฺฉุฏ ูุงูุงู ูุงุท ูุดููุฏ:

```bash
$ cd catkin_ws/
$ catkin_create_pkg actionlib_tutorials actioblib rospy roscpp message_generation std_msgs actionlib_msgs
```

ุชูุฌู ุดูุฏ ฺฉู ุฏุฑ ุงฺฉุดู ูุง ูุฒ ูุง ููุน ูุณุฌ ุฎูุฏ ุฑุง ููุงููุฏ ุณุฑูุณ ูุง ุทุฑุงุญ ู ฺฉูู (ุณุงุฎุชุงุฑ ูุฏูุ ุจุงุฒุฎูุฑุฏ ู ูุชุฌู ุฑุง ูุดุฎุต ู ฺฉูู)ุ ูพุณ ุฎูุจ ุงุณุช ฺฉ ูพูุดู ุจุฑุง ุงู ูุณุฌ ูุง ุงุฎุชุตุงุต ุจุง ูุงู action ุฏุฑ ูพฺฉุฌ ุฎูุฏ ุงุฌุงุฏ ฺฉูู:

```bash
$ mkdir actionlib_tutorials/action
```

ุฏุฑ ูุซุงู ฺฉู ูุตุฏ ูพุงุฏู ุณุงุฒ ุขูุฑุง ุฏุงุฑูุ ู ุฎูุงู ฺฉ ุงฺฉุดู ุงุฌุงุฏ ฺฉูู ฺฉู ุจุฑุง ูุง ุณุฑ ูุจููุงฺ ุฑุง ุงุฑุณุงู ฺฉูุฏ. ุจุฏู ููุธูุฑ ูุณุฌ ุงุฎุชุตุงุต ุงู ุงฺฉุดู ุฑุง ุงุฌุงุฏ ูฺฉูู:

```bash
$ touch actionlib_tutorials/action/Fibonacci.action
```

ุฏุฑูู ุงู ูุงู ุณุงุฎุชุงุฑ ูุฏูุ ูุฏุจฺฉ ู ูุชุฌู ุฑุง ูุดุฎุต ู ฺฉูู:

```py
#goal definition
int32 order
---
#result definition
int32[] sequence
---
#feedback
int32[] sequence
```

ุฏุฑ ฺฉุฏ ุจุงูุง order ุจู ูุง ุงฺฉุดู ู ูููุงูุฏ ฺฉู ุชุง ฺู ุนุฏุฏ ุงุฒ ุณุฑ ูุจููุงฺ ุฑุง ุจุงุฏ ูุญุงุณุจู ฺฉูุฏ ฺฉู ุนุฏุฏ ุชฺฉ int32 ุฑุง ุจุฑุง ููุน ุขู ูุฑุงุฑ ุฏุงุฏู ุงูุ ุจุฑุง ุจุฏุณุช ุขูุฑุฏู ูุชุฌู ุงุฒ ฺฉ ุขุฑุงู int32 ุจุง ูุงู sequence ุงุณุชูุงุฏู ู ฺฉูู ู ุจุฑุง ูุฏุจฺฉ ูุฒ ุงุฒ ููุงู sequence ุงุณุชูุงุฏู ูฺฉูู. ุญุงูุง ุจู ูุงู CMakeList.txt ู ุฑููุ ุญุชูุง ฺฺฉ ฺฉูุฏ ฺฉู ูพฺฉุฌ ูุง ุฒุฑ ููุฌูุฏ ุจุงุดูุฏ:

```
find_package(catkin REQUIRED COMPONENTS
  actioblib
  actionlib_msgs
  message_generation
  roscpp
  rospy
  std_msgs
)
```

ุฏุฑ ุจุฎุด ูุฑุจูุท ุจู ุงฺฉุดู ูู ูุชุฏ add_action_files() ุฑุง ุงุฒ ุญุงูุช ฺฉุงููุช ุฏุฑ ู ุขูุฑู ู ูุงู ูุงู ุงฺฉุดู ููุฌูุฏ ุฏุฑ ูพูุดู action ุฑุง ุงุถุงูู ู ฺฉูู:

```
## Generate actions in the 'action' folder
 add_action_files(
  FILES
  Fibonacci.action
 )
```

ุฏุฑ ุจุฎุด generation_message ูู actionlib_msgs ู std_msgs ุฑุง ุงุฒ ุญุงูุช ฺฉุงููุช ุฏุฑ ู ุขูุฑู:

```
## Generate added messages and services with any dependencies listed here
 generate_messages(
   DEPENDENCIES
   actionlib_msgs
   std_msgs
 )
```

ุฏุฑ ุจุฎุด catkin_package ูู ุฎุท ูุฑุจูุท ุจู ุงฺฉุดู ุฑุง ุจู ุตูุฑุช ุฒุฑ ุงุฒ ุญุงูุช ฺฉุงูุช ุฏุฑ ู ุขูุฑู:

```
catkin_package(
#  INCLUDE_DIRS include
#  LIBRARIES actionlib_tutorials
  CATKIN_DEPENDS actioblib actionlib_msgs message_generation roscpp rospy std_msgs
#  DEPENDS system_lib
)
```

ุงู ูุงู ุฑุง ุฐุฎุฑู ฺฉุฑุฏู ู ุจู ุฏุงุฎู ูุงู package.xml ู ุฑูู. ุฏุฑ ุงู ูุงู ุฏุฑ ุฏุงุฎู ุชฺฏ <package> ุฏุฑ ุฒุฑ ูพุด ูุงุฒ std_msgุ ูพุด ูุงุฒ ุฒุฑ ุฑุง ูุฒ ูุงุฑุฏ ู ฺฉูู:

```xml
<?xml version="1.0"?>
<package format="2">
  <name>actionlib_tutorials</name>
  <version>0.0.0</version>
  <description>The actionlib_tutorials package</description>
  <maintainer email="ahmad@todo.todo">ahmad</maintainer>
  <license>TODO</license>
  <buildtool_depend>catkin</buildtool_depend>
  <build_depend>actioblib</build_depend>
  <build_depend>actionlib_msgs</build_depend>
  <build_depend>message_generation</build_depend>
  <build_depend>roscpp</build_depend>
  <build_depend>rospy</build_depend>
  <build_depend>std_msgs</build_depend>
  <build_export_depend>actioblib</build_export_depend>
  <build_export_depend>actionlib_msgs</build_export_depend>
  <build_export_depend>roscpp</build_export_depend>
  <build_export_depend>rospy</build_export_depend>
  <build_export_depend>std_msgs</build_export_depend>
  <exec_depend>actioblib</exec_depend>
  <exec_depend>actionlib_msgs</exec_depend>
  <exec_depend>roscpp</exec_depend>
  <exec_depend>rospy</exec_depend>
  <exec_depend>std_msgs</exec_depend>
  <exec_depend>message_generation</exec_depend>



  <export></export>
</package>
```

ุฏุฑ ุงู ูุฑุญูู ูุตุฏ ุฏุงุฑู ูุญูู ุงุฌุงุฏ ุงฺฉุดู ุณุฑูุฑ ุฑุง ุจุง ฺฉูฺฉ ุณ ูพูุงุณ ูพูุงุณ ุงุฌุงุฏ ฺฉููุ ุฏุฑ ูพูุดู src ฺฉ ูุงู ุณ ูพูุงุณ ูพูุงุณ ุจุง ูุงู fibonacci_server.cpp ุงุฌุงุฏ ู ฺฉูู ู ฺฉุฏ ุฒุฑ ุฑุง ุฏุฑ ุฏุงุฎู ุขู ูุฑุงุฑ ู ุฏูู:

```c++
#include <ros/ros.h>
#include <actionlib/server/simple_action_server.h>
#include <actionlib_tutorials/FibonacciAction.h>


// Create A Class For Run This Action Server
class FibonacciAction
{
  protected: // Define Protected Properties
    ros::NodeHandle nh_; // Define node name
    actionlib::SimpleActionServer<actionlib_tutorials::FibonacciAction> as_; // Define action server
    std::string action_name_; // Define action name
    actionlib_tutorials::FibonacciFeedback feedback_; // Define Action Feed-back
    actionlib_tutorials::FibonacciResult result_; // Define Action Result

  public:
    FibonacciAction(std::string name) : // Class Constructer Input: name
      // Create action server and setting properties
      as_(nh_, name, boost::bind(&FibonacciAction::executeCB, this, _1), false),
    action_name_(name)
    {
      as_.start(); // Run Server
    }
    ~FibonacciAction(void){ }


    // Call-Back Function: executeCB -> Input: goal
    void executeCB(const actionlib_tutorials::FibonacciGoalConstPtr &goal)
    {
       ros::Rate r(1); // 1Hz Freq.
       bool success = true;


       // Calculate Fibbonacci ...
       feedback_.sequence.clear();
       feedback_.sequence.push_back(0); // push_back puts item in "sequence" array
       feedback_.sequence.push_back(1);
       for(int i=1; i<=goal->order; i++)
       {
          if (as_.isPreemptRequested() || !ros::ok())
          {
            ROS_INFO("%s: Preempted", action_name_.c_str());
            as_.setPreempted();
            success = false;
            break;
          }
         feedback_.sequence.push_back(feedback_.sequence[i] + feedback_.sequence[i-1]);
         as_.publishFeedback(feedback_);
         r.sleep();
       }
       if(success)
       {
         result_.sequence = feedback_.sequence;
         as_.setSucceeded(result_); // Send Results
       }
    }
};



// Main Function
int main(int argc, char** argv)
{
  ros::init(argc, argv, "fibonacci");


  FibonacciAction fibonacci("fibonacci");
  ros::spin();


  return 0;
}
```

ุฏุฑ ฺฉุฏ ุจุงูุง ูุชุฏ push_back ฺฉ ุขุชู ุฌุฏุฏ ุจู ุชู ุขุฑุงู sequence ุงุถุงูู ู ฺฉูุฏ. ูุฑุงููุด ูุดูุฏ ฺฉู ฺฉุฏ ุฒุฑ ุฑุง ุฏุฑ ุขุฎุฑ ูุงู CmakeList.txt ุงุถุงูู ููุงุฏ:

```c++
add_executable(fibonacci_server src/fibonacci_server.cpp)

target_link_libraries(
  fibonacci_server
  ${catkin_LIBRARIES}
)

add_dependencies(
  fibonacci_server
  ${actionlib_tutorials_EXPORTED_TARGETS}
)
```

ุญุงู ููู ูุงู ูุง ุฑุง ุฐุฎุฑู ฺฉุฑุฏู ู ุงุฒ ูุฑฺฉ ุงุณูพุณ ุฑุง ฺฉ ุฏูุฑ ุจุง ฺฉูฺฉ catkin_make ฺฉุงููพุงู ู ฺฉูู. ุฏุฑ ูุณุฎู ุฑุงุณ ูุฆูุชฺฉ ุฏฺฏุฑ ุจู ูุชุฏ ุณูู ูุงุฒ ูุณุช ู ููุท ููุงู ุฏู ุฎุท ุงูู ฺฉูุงุช ู ฺฉูุฏ:

```c++
add_executable(fibonacci_server src/fibonacci_server.cpp)

target_link_libraries(
  fibonacci_server
  ${catkin_LIBRARIES}
)
```

ุญุงู ูุณุชู ุฑุง ุงุฌุฑุง ู ุฏุฑ ุณูพุณ ุงู ุณุฑูุฑ ุฑุง ุงุฌุฑุง ฺฉุฑุฏู ู ูุณุช ุชุงูพฺฉ ูุง ุฑุง ุจุง ฺฉูฺฉ ฺฉุงููุฏ ูุง ุฒุฑ ุจู ุตูุฑุช ูุฑุชุจ ุดุฏู ู ุจูู:

```bash
$ roscore
$ rosrun actionlib_tutorials fibonacci_server
$ rostopic list -v
```

ุฎุฑูุฌ ุจู ุดฺฉู ุฒุฑ ุฎูุงูุฏ ุจูุฏ:

![ุฎุฑูุฌ](image-12.png)

ุฏุฑ ุงุฏุงูู ูุญูู ุงุฌุงุฏ ุณุฑูุฑ ุจู ุฒุจุงู ูพุงุชูู ุฑุง ุชูุถุญ ู ุฏูู ู ุณูพุณ ุจู ุณุฑุงุบ ุงุฌุงุฏ ฺฉูุงูุช ุจู ุฒุจุงู ูพุงุชูู ู ุณ ูพูุงุณ ูพูุงุณ ู ุฑูู. ุงฺฉููู ุจุง ฺฉูฺฉ ฺฉุงููุฏูุง ุฒุฑ ูพูุดู ุงุณฺฉุฑูพ ู ูุงู ูพุงุชูู ุณุฑูุฑ ุฑุง ุงุฌุงุฏ ู ฺฉูู ู ุจู ุขู ูุงุจูุช ุงุฌุฑุง ุดุฏู ู ุฏูู:

```bash
$ mkdir scripts && touch scripts/fibonacci_server.py
$ cd scripts/
$ chmod +x fibonacci_server.py
```

ุฏุฑูู ูุงู ฺฉุฏ ูพุงุชูู ุฒุฑ ุฑุง ูุฑุงุฑ ู ุฏูู:

```py
#! /usr/bin/env python3

import rospy
import actionlib
import actionlib_tutorials.msg


class FibonacciAction(object):
    _feedback = actionlib_tutorials.msg.FibonacciFeedback() # Feed-Back Message
    _result = actionlib_tutorials.msg.FibonacciResult() # Result Message
    def __init__(self, name): # Costructor Fcn.
        # Name, Create and Start server
        self._action_name = name
        self._as = actionlib.SimpleActionServer(self._action_name, actionlib_tutorials.msg.FibonacciAction, execute_cb=self.execute_cb, auto_start = False)
        self._as.start()

    # Define Call-Back Fcn.
    def execute_cb(self, goal):
        r = rospy.Rate(1) # 1 Hz
        success = True
        self._feedback.sequence = []
        self._feedback.sequence.append(0) # append() add an item to end of "sequence" list
        self._feedback.sequence.append(1)

        # Calculting The Fib. Series
        for i in range(1, goal.order):
            if self._as.is_preempt_requested():
                rospy.loginfo('%s: Preempted' % self._action_name)
                self._as.set_preempted()
                success = False
                break
            self._feedback.sequence.append(self._feedback.sequence[i] + self._feedback.sequence[i-1])
            self._as.publish_feedback(self._feedback)
            r.sleep()
        if success:
            self._result.sequence = self._feedback.sequence
            rospy.loginfo('%s: Succeeded' % self._action_name)
            self._as.set_succeeded(self._result)



# Running Server
if __name__ == '__main__':
    rospy.init_node('fibonacci')
    server = FibonacciAction(rospy.get_name())
    rospy.spin()
```

ุฎุฑูุฌ ูุดุงุจู ุจุฑูุงูู ุณ ูพูุงุณ ูพูุงุณ ุฎูุงูุฏ ุจูุฏ. ุญุงู ุจู ุณุฑุงุบ ุงุฌุงุฏ ุจุฑูุงูู ฺฉูุงูุช ุจุง ฺฉูฺฉ ุณ ูพูุงุณ ูพูุงุณ ู ุฑูู. ุฏุฑ ุฏุงุฎู ูพูุดู src ฺฉ ูุงู ุจุง ูุงู fibonacci_client.cpp ุงุฌุงุฏ ู ฺฉูู ู ฺฉุฏ ุฒุฑ ุฑุง ุฏุฑ ุฏุงุฎู ุขู ูุฑุงุฑ ู ุฏูู:

```c++
#include <ros/ros.h>
#include <actionlib/client/simple_action_client.h>
#include <actionlib_tutorials/FibonacciAction.h>


using namespace actionlib_tutorials;
typedef actionlib::SimpleActionClient<FibonacciAction> Client; // Make Client


// Done Call-Back Fcn.
void doneCb(const actionlib::SimpleClientGoalState& state,const FibonacciResultConstPtr& result)
{
  ROS_INFO("Finished in state [%s]", state.toString().c_str());
  ROS_INFO("Answer: %i", result->sequence.back());
  ros::shutdown();
}


// Active Call-Back Fcn.
void activeCb()
{
  ROS_INFO("Goal just went active");
}


// Feed-Back Call-Back Fcn.
void feedbackCb(const FibonacciFeedbackConstPtr& feedback)
{
  ROS_INFO("Got Feedback of length %lu", feedback->sequence.size());
}


// Main Fcn.
int main (int argc, char **argv)
{
  ros::init(argc, argv, "test_fibonacci_callback");


  Client ac("fibonacci", true); // Connect Client To "fibonacci" Action


  ROS_INFO("Waiting for action server to start.");
  ac.waitForServer(); // Wait for Connecting to Action Server
  ROS_INFO("Action server started, sending goal.");


  FibonacciGoal goal; // Define Goal
  goal.order = 20;


  // Passing Call Back Fcn. for "Done", "Active or Start", "Feedback" status
  ac.sendGoal(goal, &doneCb, &activeCb, &feedbackCb);


  // Define 30s limit for doing the loop
  bool finished_before_timeout = ac.waitForResult(ros::Duration(30.0));
  ros::spin();
  return 0;
}
```

ุฏุฑ ูุงู CMakeList.txt ฺฉุฏ ุฒุฑ ุฑุง ูุฑุงุฑ ู ุฏูู:

```c
add_executable(fibonacci_client src/fibonacci_client.cpp)

target_link_libraries(
  fibonacci_client
  ${catkin_LIBRARIES}
)
```

ุญุงู ุฏุฑ ุดุงุฎู ุงุตู ุงุฒ ูุงู ฺฉ ุฏูุฑ ฺฉุงููพุงู ู ฺฏุฑู ู ุณูพุณ ุจุง ฺฉูฺฉ ุฏุณุชูุฑ ุฒุฑ ฺฉูุงูุช ู ุณุฑูุฑ ุฑุง ุงุฌุฑุง ู ฺฉูู:

```bash
$ roscore
$ rosrun actionlib_tutorials fibonacci_server
$ rosrun actionlib_tutorials fibonacci_client
```

ุชูุฌู ุดูุฏ ฺฉู ุฏุฑ ุฎุฑูุฌ ฺฉูุงูุช ุชุง 20 ุงูู ุนุฏุฏ ูุจููุงฺ ุฑุง ุจุฑุง ูุง ุญุณุงุจ ู ฺฉูุฏ. ุฎุฑูุฌ:

![ุฎุฑูุฌ](image-13.png)

ุฏุฑ ุงุฏุงูู ุงู ฺฉูุงูุช ุฑุง ุจุง ฺฉูฺฉ ุฒุจุงู ูพุงุชูู ุงุฌุงุฏ ูฺฉูู. ุฏุฑ ูพูุดู scripts ฺฉ ูุงู ุจุง ูุงู fibonacci_client.py ุงุฌุงุฏ ู ฺฉูู ู ฺฉุฏ ุฒุฑ ุฑุง ุฏุฑ ุฏุงุฎู ุขู ูุฑุงุฑ ู ุฏูู:

```py
#! /usr/bin/env python3
import rospy
import actionlib
import actionlib_tutorials.msg


# Define Active Call-Back (Start Fcn.)
def active_cb():
    print('active')


# Define Feed-Back Call-Back
def feedback_cb(feedback):
    print(len(feedback.sequence))


# Define Done Call-Back
def done_cb(status, result):
    print(status)
    print(result)


# Main Fcn.
if __name__ == '__main__':
       rospy.init_node('fibonacci_client_py') # init node


       # Add Client
       client = actionlib.SimpleActionClient('fibonacci', actionlib_tutorials.msg.FibonacciAction)
       client.wait_for_server() # Wait For Client


       # Define Goal
       goal = actionlib_tutorials.msg.FibonacciGoal(order=20)


       # Passing Call Back Fcn. for "Done", "Active or Start", "Feedback" status
       client.send_goal(goal,done_cb,active_cb,feedback_cb)
       client.wait_for_result()
       #client.get_result()
       #client.cancel_goal() # Stop Server
```

ุจุฑุง ุงุฌุฑุง ูุฒ ุจู ุดุฑุญ ุฒุฑ ุนูู ู ฺฉูู:

```bash
$ roscore
$ rosrun actionlib_tutorials fibonacci_server.py
$ rosrun actionlib_tutorials fibonacci_client.py
```

ุฎุฑูุฌ ูุดุงุจู ุจุฑูุงูู ุณ ูพูุงุณ ูพูุงุณ ุฎูุงูุฏ ุจูุฏ. ุชูุฌู ุดูุฏ ฺฉู ุฏุฑ ุงฺฉุดู ูุง ุจุง ฺฉูฺฉ ุงุนุฏุงุฏ ูุถุนุช ููุงุด ุฏุงุฏู ู ุดูุฏ ฺฉู ุฏุฑ ูุณุช ุฒุฑ ู ุชูุงูุฏ ุขูุฑุง ูุดุงูุฏู ููุงุฏ:

- 0 : Pending : ุณุฑูุฑ ุฏุฑ ุญุงูุช ุขูุงุฏู ุจู ฺฉุงุฑ ุงุณุช
- 1 : Active : ูพุงู Goal ุฏุฑุงูุช ุดุฏู ู ุณุฑูุฑ ุฏุฑ ุญุงูุช ุงูุฌุงู ูุฑุขูุฏ ุงุณุช.
- 2 : Preempted : ูพุณ ุงุฒ ุดุฑูุน ูุฑุขูุฏุ ุนููุงุช ฺฉูุณู ุดุฏู ุงุณุช.
- 3 : Succeeded : ูุฑุขูุฏ ุจุง ููููุช ุจู ูพุงุงู ุฑุณุฏู ุงุณุช.
- 4 : Aborted : ูพุงู goal ุฏุฑ ุญู ูุฑุขูุฏ ุชูุณุท ุณุฑูุฑ ุฑุฏ ุดุฏู ุงุณุช.
- 5 : Rejected : ูพุงู goal ูุจู ุงุฒ ุงุฌุฑุง ูุฑุขูุฏ ุชูุณุท ุณุฑูุฑ ุฑุฏ ุดุฏู ุงุณุช.
- 6 : Preempting : ูพุงู goal ุชูุณุท ุณุฑูุฑ ุฏุฑุงูุช ุดุฏู ูู ูุฑุขูุฏ ุฏุฑ ุญุงู ฺฉูุณู ฺฉุฑุฏู ฺฉุงุฑ ุงุณุช.
- 7 : Recalling : ุณุฑูุฑ ูุจู ุงุฒ ุดุฑูุน ูุฑุขูุฏ ูพุงู ฺฉูุณู ุฑุง ุฏุฑุงูุช ฺฉุฑุฏู ูู ุฑุง ุดุฑูุน ุง ฺฉูุณู ูฺฉุฑุฏู ุงุณุช.
- 8 : Recalled : ุณุฑูุฑ ูุจู ุงุฒ ุดุฑูุน ูุฑุขูุฏ ูพุงู ฺฉูุณู ุฑุง ุฏุฑุงูุช ฺฉุฑุฏู ู ูุฑุขูุฏ ุฏุฑุณุช ฺฉูุณู ุดุฏู ุงุณุช.
- 9 : Lost : ูพุงู goal ุงุฒ ุจู ุฑูุชู ุงุณุช.

## ุชูุธู ูุฌุฏุฏ ูพุงุฑุงูุชุฑูุง ุจุง ฺฉูฺฉ Dynamic Reconfigure

ุณุณุชู ุนุงูู ROS ุฏุฑ ูุงูุน ุงุณุชูุงุฏู ุงุฒ ฺฉุชุงุจุฎุงูู ู ูพฺฉุฌ ูุง ูุฎุชูู ู ุชูุธู ูพุงุฑุงูุชุฑูุง ูุฑุจูุท ุจู ุขููุง ู ุจุงุดุฏ. ุจุฑุง ุชูุธู ุงู ูพุงุฑุงูุชุฑูุงุ ุฎูุฏ ุฑุงุณ ฺฉ ุงุจุฒุงุฑ ููุงุณุจ ุฏุงุฑุฏ ุจู ูุงู dynamic Reconfigure ฺฉู ุงูฺฉุงู ุชุนู ูพุงุฑุงูุชุฑ ูุง ุฑุงุณ ุฑุง ุจู ูุง ู ุฏูุฏ. ุจุฑุง ุชุณุช ุงู ุงุจุฒุงุฑ ฺฉ ูพฺฉุฌ ุฌุฏุฏ ุงุฌุงุฏ ู ฺฉูู (ุจุฑุง ูุซุงู dynamic_tuts):

```bash
$ cd catkin_ws/src
$ catkin_create_pkg dynamic_tuts rospy roscpp dynamic_reconfigure
```

ุณูพุณ ูุงุฑุฏ ุงู ูพฺฉุฌ ุดุฏู ู ฺฉ ูพูุดู ุจุฑุง ฺฉุงููฺฏ ูุง ุจู ูุงู cfg ู ุณุงุฒู ุชุง ูุณุช ฺฉุงููฺฏ ูุง ุฏูุงูฺฉ ุฑุง ุฏุฑ ุฏุฎู ุงู ูููุฏุฑ ูุฑุงุฑ ุฏูู. ุจุฑุง ูุซุงู ฺฉ ูุงู tuts.cfg ุงุฌุงุฏ ู ฺฉูู:

```bash
$ mkdir cfg && cd cfg
$ touch tuts.cfg
```

ุฏุฑ ุฏุงุฎู ูููุฏุฑ tuts.cfg ุงุฌุงุฏ ู ฺฉูู ู ฺฉุฏ ุฒุฑ ุฑุง ุฏุฑ ุฏุงุฎู ุขู ูุฑุงุฑ ู ุฏูู (ุชูุฌู ุดูุฏ ฺฉู ุงุฒ ููุงู ุฒุจุงู ูพุงุชูู ุจุฑุง ูฺฏุงุฑุด ูุงู ูุง cfg ุงุณุชูุงุฏู ู ฺฉูู.

```py
#!/usr/bin/env python3
PACKAGE = "dynamic_tutorials"

# Import libs
from dynamic_reconfigure.parameter_generator_catkin import *

# Create Parameter Generator Obj
gen = ParameterGenerator()

# Define Parameters and add it to dyna-confg: name, type, level, description, default, *min, *max
gen.add("int_param",    int_t,    0,   "An Integer parameter", 50,  0,   100)
gen.add("double_param", double_t, 0,   "A double parameter",   .5,    0,   1)
gen.add("str_param",    str_t,    0,   "A string parameter",   "Hello World")
gen.add("bool_param",   bool_t,   0,   "A Boolean parameter",  True)

# Drop-List Parameter (enum)
size_enum = gen.enum([ gen.const("Small",      int_t, 0, "A small constant"),
                       gen.const("Medium",     int_t, 1, "A medium constant"),
                       gen.const("Large",      int_t,  2, "A large constant"),
                       gen.const("ExtraLarge", int_t,  3, "An extra large constant")],
                     "An enum to set size")

# Add enum to dyna-confg
gen.add("size", int_t, 0, "A size parameter which is edited via an enum",
                     1, 0, 3, edit_method=size_enum)

# End
exit(gen.generate(PACKAGE, "dynamic_tutorials", "Tutorials"))
```

ุญุชูุง ุจุง ฺฉูฺฉ ฺฉุฏ ุฒุฑ ุจู ูุงู ุงุฌุงุฒู ุงุฌุงุฑู ุดุฏู ุจุฏูุฏ:

```bash
$ chmod +x cfg/tuts.cfg
```

ุฏุฑ ูุงู CMakeList.txt ูุฒ ุฏุฑ ุจุฎุด ูุฑุจูุท ุจู ฺฉุงููฺฏ ูุง ุฏุณุชูุฑ ุฒุฑ ุฑุง ุงุฒ ุญุงูุช ฺฉุงููุช ุฏุฑ ุจุงูุฑุฏ ู ุขุฏุฑุณ ูุงู ฺฉุงููฺฏ ุงุฌุงุฏ ุดุฏู ุฑุง ุจุฏูุฏ:

```
## Generate dynamic reconfigure parameters in the 'cfg' folder
generate_dynamic_reconfigure_options(
  cfg/tuts.cfg
#   cfg/DynReconf2.cfg
 )
```

ุณูพุณ ุจู ุดุงุฎู ุงุตู ุฑูุชู catkin_make ุจฺฏุฑุฏ. ุฏุฑ ุงุฏุงูู ฺฉ ูุงู ูพุงุชูู ุงุฌุงุฏ ูฺฉูู ฺฉู ุงุฒ ุงู ูพุงุฑุงูุชุฑูุง ุงุฌุงุฏ ุดุฏู ุฏุฑ ุจุฎุด ูุจู ุจุชูุงูู ุฏุฑ ุฏุงุฎู ฺฉ ููุฏ ุงุณุชูุงุฏู ฺฉูู. ฺฉ ูพูุดู scripts ุงุฌุงุฏ ฺฉุฑุฏู ู ุฏุฑ ุฏุงุฎู ุขู ฺฉ ูุงู ูพุงุชูู ุจุง ูุงู server.py ุฏุฑ ุฏุงุฎู ุขู ุงุฌุงุฏ ู ฺฉูู ู ฺฉุฏ ุฒุฑ ุฑุง ุฏุฑ ุฏุงุฎู ุขู ูุฑุงุฑ ู ุฏูู:

```py
#!/usr/bin/env python3
import rospy
from dynamic_reconfigure.server import Server
from dynamic_tuts.cfg import tutsConfig

# Call Back Fcn.
def callback(config, level):
    rospy.loginfo("""Reconfigure Request: {int_param}, {double_param},\
          {str_param}, {bool_param}, {size}""".format(**config))
    return config

# Main Part
if __name__ == "__main__":
    rospy.init_node("dynamic_tutorials", anonymous = False)


    srv = Server(tutsConfig, callback)
    rospy.spin()
```

ูุงุฒู ุงุณุช ุญุชูุง ุจู ุงู ุจุฑูุงูู ูุงุจูุช ุงุฌุฑุง ุจุฏูู. ุชูุฌู ุดูุฏ ฺฉู ุงุฒ ุทุฑู ูุชุบุฑ level ุจุฑูุงูู ุฑฺฉุงููฺฏุฑ ูุชูุฌู ุชุบุฑุงุช ุฏุฑ ูพุงุฑุงูุชุฑ ูุง ู ุดูุฏ. ุญุงู ูุณุชู ุฑุงุณุ ุงู ุจุฑูุงูู ุณุฑูุฑ ู ุจุฑูุงูู rqt_reconfigure ุฑุง ุงุฌุฑุง ู ฺฉูู ู ุชุบุฑ ูพุงุฑุงูุชุฑูุง ุฑุง ุชุณุช ู ฺฉูู:

```bash
$ roscore
$ rosrun dynamic_tuts server.py
$ rosrun rqt_reconfigure rqt_reconfigure
```

ุฎุฑูุฌ ุจู ุดฺฉู ุฒุฑ ุฎูุงูุฏ ุจูุฏ:

![ุฎุฑูุฌ](image-14.png)

ุชูุฌู ุดูุฏ ฺฉู ู ุชูุงู ฺูุฏู ูุงู ฺฉุงููฺฏ ุงุฌุงุฏ ฺฉุฑุฏ ู ูพุงุฑุงูุชุฑ ุขููุง ุฑุง ุงุฒ ุทุฑู rqt_reconfigure ฺฉูุชุฑู ฺฉุฑุฏ. ุจุง ูุฑ ุจุงุฑ ุชุบุฑ ุฏุงุฏู ฺฉ ููุฏุงุฑ ุฏุฑ rqt ุณุฑูุฑ ูุงฺฏ ุงุฌุงุฏ ู ฺฉูุฏ (ุชูุฌู ุดูุฏ ุญุชูุง ุณุฑูุฑ ุจุงุฏ ุงุฌุฑุง ุดูุฏ ฺฉู ฺฉุงููฺฏ ุงุฌุงุฏ ุดุฏู ุฏุฑ rqt ูุฑุงุฑ ุจฺฏุฑุฏ.)

ุญุงูุง ููู ฺฉุฏ ุฑุง ุฏุฑ ุฏุงุฎู ุณ ูพูุงุณ ูพูุงุณ ุงุฌุฑุง ู ฺฉูู. ุฏุฑ ุฏุงุฎู ูพูุดู src ฺฉ ูุงู ุจู ูุงู server.cpp ุงุฌุงุฏ ู ฺฉูู ู ฺฉุฏ ุฒุฑ ุฑุง ูุฑุงุฑ ู ุฏูู. (ุฑููุฏ ูุดุงุจู ููุงู ูพุงุชูู ูุณุช):

```c++
#include <ros/ros.h>
#include <dynamic_reconfigure/server.h>
#include <dynamic_tuts/tutsConfig.h>


void callback(dynamic_tuts::tutsConfig &config, uint32_t level) {
  ROS_INFO("Reconfigure Request: %d %f %s %s %d",
            config.int_param, config.double_param, config.str_param.c_str(),
            config.bool_param?"True":"False", config.size);
}


int main(int argc, char **argv) {
  ros::init(argc, argv, "dynamic_tuts");
  dynamic_reconfigure::Server<dynamic_tuts::tutsConfig> server;
  dynamic_reconfigure::Server<dynamic_tuts::tutsConfig>::CallbackType f;
  f = boost::bind(&callback, _1, _2);
  server.setCallback(f);
  ROS_INFO("Spinning node");
  ros::spin();
  return 0;
}
```

ุฎุฑูุฌ ูุดุงุจู ูพุงุชูู ุฎูุงูุฏ ุจูุฏ. ุชุง ุจู ุงูุฌุง ฺฉุงุฑ ุชูุงู ุจุฑูุงูู ูุง ฺฉู ุงุฌุงุฏ ฺฉุฑุฏู ุงู ุณุฑูุฑ ุจูุฏูุฏ ู ุจู ุงูฺฉุงู ุงุฌุงุฏ ุชุบุฑุงุช ู ุฏุงุฏูุฏ ูู ุฏุฑ ุตูุฑุช ฺฉู ุจุฎูุงูู ุชุบุฑุงุช ุฑุง ูุดุงูุฏู ููุงู ูุงุฒ ุจู ุงุฌุงุฏ ฺฉ ุจุฑูุงูู ฺฉูุงูุช ุงุณุช ฺฉู ุขูุฑุง ุจุง ฺฉูฺฉ ูพุงุชูู ุงุฌุงุฏ ู ฺฉูู. ฺฉ ูุงู ูพุงุชูู ุฏุฑ ูพูุดู script ุจุง ูุงู client.py ุงุฌุงุฏ ฺฉุฑุฏู ู ูุงุจูุช ุงุฌุฑุง ุจู ุขู ู ุฏูู. ุฏุฑูู ุงู ูุงู ฺฉุฏ ุฒุฑ ุฑุง ูุฑุงุฑ ู ุฏูู:

```py
#!/usr/bin/env python3
import rospy
import dynamic_reconfigure.client


def callback(config):
    rospy.loginfo("Config set to {int_param}, {double_param}, {str_param}, {bool_param}, {size}".format(**config))


if __name__ == "__main__":
    rospy.init_node("dynamic_client")
    client = dynamic_reconfigure.client.Client("dynamic_tutorials", timeout=30, config_callback=callback)


    r = rospy.Rate(1)


    x = 0
    b = False


    while not rospy.is_shutdown():
        x = x+1
        if x>10:
            x=0
        b = not b
        client.update_configuration({"int_param":x, "double_param":(float(1)/(x+1)), "str_param":str(rospy.get_rostime()), "bool_param":b, "size":1})
        r.sleep()
```

ุฏุฑ ุงุฏุงูู ูุณุชู ุฑุงุณุ ุณุฑูุฑ ู ฺฉูุงูุช ุฑุง ุฑุงู ุงูุฏุงุฒ ู ฺฉูู. ููฺู ุจุฑูุงูู rqt_reconfigure ุฑุง ูุฒ ุงุฌุฑุง ู ฺฉูู. ูุดุงูุฏู ู ุดูุฏ ฺฉู ูพุงุฑุงูุชุฑูุง ุชุบุฑ ู ฺฉููุฏ.

## ุขุดูุง ุจุง ูุญุท rviz ู ุงุฌุฑุง ฺูุฏ ูุซุงู

ูุฑู ุงูุฒุงุฑ rviz ฺฉ ูุฑู ุงูุฒุงุฑ ุจุฑุง ููุงุด ฺฏุฐุงุดุชู ุฏุงุฏู ูุง ูุฎุชูู ู ุจุงุดุฏ. ุจุฑุฎ ุงู ูุฑู ุงูุฒุงุฑ ุฑุง ุจุง ฺฉ ูุฑู ุงูุฒุงุฑ ุดุจู ุณุงุฒ ุฌุงุจุฌุง ู ฺฏุฑูุฏ ุฏุฑ ุญุงูฺฉู ูุธูู rviz ุชููุง ุจุตุฑ ฺฉุฑุฏู ุฏุงุฏู ูุง ู ุจุงุดุฏ ู ููุงุณุจ ุดุจู ุณุงุฒ ูุฏู ูุง ุฑุจุงุชฺฉ ูู ุจุงุดุฏ. ุชูุฌู ุดูุฏ ฺฉู ูุงุญุฏูุง ุงุณุชุงูุฏุงุฑุฏ ุฏุฑ ุฏุงุฎู rviz ููุงู ูุงุญุฏ ูุง ุงุณุชุงูุฏุงุฑุฏ ros ู ุจุงุดุฏ. ุจุฑุง ุงุฌุฑุง ฺฉุฑุฏู rviz ฺฉุงู ุงุณุช ฺฉุฏ ุฒุฑ ุฑุง ุฏุฑ ุฏุงุฎู ุชุฑููุงู ุงุฌุฑุง ฺฉูุฏ:

```bash
$ roscore
$ rviz
```

ูุฑู ุงูุฒุงุฑ rviz ุจุฑุงุชุงู ุจุงุฒ ุฎูุงูุฏ ุดุฏ. ุงู ูุฑู ุงูุฒุงุฑ ุงุฒ ุจุฎุด ูุง ูุฎุชูู ุชุดฺฉู ุดุฏู ุงุณุช ฺฉู ู ุชูุงู ุจู ูููุชุฑู ุขู ุนู ุจูุด display ุงุดุงุฑู ฺฉุฑุฏ. ููฺูู ุงุฒ ุทุฑู ููู panel ู ุชูุงูุฏ ุจุฎุด ูุง ูุฎุชูู rviz ุฑุง ุขุดฺฉุงุฑ/ูพููุงู ฺฉูุฏ.

![ูุญุท ุขุฑูุฒ](image-15.png)

ุจุฑุง ุงุถุงูู ฺฉุฑุฏู ฺฉ ุฏุชุง ุง ููุงุดฺฏุฑ ุฎุงุต ุจุง ฺฉูฺฉ ฺฏุฒูู Add ุฏุฑ ูพูู Display ู ุชูุงูุฏ ุนูู ุงูุฒูุฏู ุฑุง ุงูุฌุงู ุฏูุฏ. ุจู ุฏู ุฑูุด ู ุชูุงูุฏ ุขุชู ูุง ุจุตุฑ ุฑุง ุงุถุงูู ููุงุฏ. ฺฉ ุจุง ฺฉูฺฉ ููุน ุขุชู (By display type) ู ฺฉ ูู ุจุง ฺฉูฺฉ ุชุงูพฺฉ ูุง (By topic) ฺฉู ุฏุฑ ุดฺฉู ุฒุฑ ู ุชูุงูุฏ ูุดุงูุฏู ููุงุฏ:

![ฺฏุฒูู ุงุถุงูู ฺฉุฑุฏู ุขุชู](image-16.png)

ุจุง ฺฉู ุณุน ู ุฎุทุง ู ุชูุงูุฏ ุจุง ุณุงุฑ ุขูพุดู ูุง ุงู ูุญุท ุขุดูุง ุดูุฏ (ฺฉู ุงูุจุชู ุงุฒ ุงููุช ฺฉูุชุฑ ุจุฑุฎูุฑุฏุงุฑ ูุณุชู). ุฏุฑ ุงุฏุงูู ู ุฎูุงูู ฺฉ ุจุฑูุงูู ุงุฌุงุฏ ฺฉูู ฺฉ ุชุนุฏุงุฏ ุฏุงุฏู ฺฏุฑุงูฺฉ ุงุฌุงุฏ ฺฉูุฏ ู ูุง ุขู ุฏุงุฏู ูุง ฺฏุฑุงูฺฉ ุฑุง ุฏุฑ rviz ูุดุงูุฏู ฺฉูู. ุจู ูพูุดู catkin_ws/src ู ุฑูู ู ฺฉ ูพฺฉุฌ ุฌุฏุฏ ุจู ูุงู using_markers ุงุฌุงุฏ ู ฺฉูู ฺฉู ุฏุฑ ุขู ุงุฒ rocpp ู visualization_msgs ุงุณุชูุงุฏู ุดุฏู ุงุณุช. ุฏุฑ ุงุฏุงูู ุจู ุฏุงุฎู ูพูุดู src ูพฺฉุฌ ุงุฌุงุฏ ุดุฏู ู ุฑูู ู ฺฉ ูุงู ุฌุฏุฏ ุจู ูุงู basic_shapes.cpp ุงุฌุงุฏ ู ฺฉูู:

```bash
$ catkin_create_pkg using_markers roscpp visualization_msgs rospy
$ touch basic_shapes.cpp
```

ุฏุฑ ุฏุงุฎู ุงู ูุงู ุจุฑูุงูู ุฒุฑ ุฑุง ูุฑุงุฑ ู ุฏูู:

```c++
#include <ros/ros.h>
#include <visualization_msgs/Marker.h>


int main( int argc, char** argv )
{
  ros::init(argc, argv, "basic_shapes"); // make a node
  ros::NodeHandle n;
  ros::Rate r(1); // 1 Hz Freq.


  // Create a topic with the name of "visualization_marker" contains the marker datas
  ros::Publisher marker_pub = n.advertise<visualization_msgs::Marker>("visualization_marker", 1);


  // Create a cube marker
  uint32_t shape = visualization_msgs::Marker::CUBE;


  // Main Loop
  while (ros::ok())
  {
    visualization_msgs::Marker marker;
    marker.header.frame_id = "/my_frame"; // Pose Origin
    marker.header.stamp = ros::Time::now(); // Time Origin


    marker.ns = "basic_shapes"; // Name
    marker.id = 0; // id
    marker.type = shape;
    marker.action = visualization_msgs::Marker::ADD; // Action Add to visualization_msgs::Marker


    // Position of cube
    marker.pose.position.x = 0;
    marker.pose.position.y = 0;
    marker.pose.position.z = 0;
    marker.pose.orientation.x = 0.0;
    marker.pose.orientation.y = 0.0;
    marker.pose.orientation.z = 0.0;
    marker.pose.orientation.w = 1.0;


    // Marker Scale
    marker.scale.x = 1.0;
    marker.scale.y = 1.0;
    marker.scale.z = 1.0;


    // Marker Color
    marker.color.r = 0.0f; // red = 0
    marker.color.g = 1.0f; // green = 1
    marker.color.b = 0.0f; // blue = 0
    marker.color.a = 1.0; // opacity = 1
    marker.lifetime = ros::Duration();


    // Wait for a subscriber (rviz)
    while (marker_pub.getNumSubscribers() < 1)
    {
      if (!ros::ok())
      {
        return 0;
      }
      ROS_WARN_ONCE("Please create a subscriber to the marker");
      sleep(1);
    }


    // Publish marker data
    marker_pub.publish(marker);


    // Shape Loop
    switch (shape)
    {
    case visualization_msgs::Marker::CUBE:
      shape = visualization_msgs::Marker::SPHERE;
      break;
    case visualization_msgs::Marker::SPHERE:
      shape = visualization_msgs::Marker::ARROW;
      break;
    case visualization_msgs::Marker::ARROW:
      shape = visualization_msgs::Marker::CYLINDER;
      break;
    case visualization_msgs::Marker::CYLINDER:
      shape = visualization_msgs::Marker::CUBE;
      break;
    }
    r.sleep();
  }
}

```

ุฏุฑ ุจุฑูุงูู ุจุงูุง ุจุง ุงุณุชูุงุฏู ุงุฒ ูุงุฑฺฉุฑูุง ุงุดฺฉุงู ุฑุง ุฏุฑ ูุญุท rviz ุจู ููุงุด ฺฏุฐุงุดุชู. ุชูุฌู ุดูุฏ ฺฉู ุญุชูุง fixed frame ุฑุง ุจุฑ ุฑู iframe ูุฑุงุฑ ุฏูุฏ. ุชูุฌู ุดูุฏ ฺฉู ฺฉุฏ ุฒุฑ ุฑุง ุฏุฑ ุฏุงุฎู ูุงู CMakeList.txt ูุฑุงุฑ ุฏูุฏ:

```
add_executable(basic_shapes src/basic_shapes.cpp)
target_link_libraries(basic_shapes ${catkin_LIBRARIES})
```

ุจุง ุงุฌุฑุง ูุณุชู ุฑุงุณ ู ููฺูู ุจุฑูุงูู ุจุงูุง ู ุจุฑูุงูู rviz ุฎุฑูุฌ ุฑุง ูุดุงูุฏู ู ฺฉูู:

![ุฎุฑูุฌ](image-17.png)

ุฏุฑ ุงุฏุงูู ุฏุฑ ููุฑุฏ point ุ line-stream ู line-list ุตุญุจุช ูฺฉูู. ููุงูฺฏููู ฺฉู ูุดุฎุต ุงุณุช point ูุง ููุงุท ูุดุฎุต ุงุฒ ูุถุง ูุณุชูุฏ ฺฉู ุจุง x,y,z ูุดุฎุต ู ุดููุฏ. line-stream ูู ฺฉ ุฎุท ุงุณุช ฺฉู ุงุฒ ูุงู ฺูุฏ ููุทู ุนุจูุฑ ู ฺฉูุฏ. line-list ูู ุจู ูุฌููุนู ุงุฒ ุฎุท ูุง ู ฺฏููุฏ ฺฉู ููุงุท ูุฎุชูู ุฑุง ุจู ูู ูุชุตู ู ฺฉููุฏ. ุฏุฑ ุงุฏุงูู ฺฉ ูุงู ุจุง ูุงู point_and_lines.cpp ุงุฌุงุฏ ู ฺฉูู ู ุจุฑูุงูู ุฒุฑ ุฑุง ุฏุฑ ุฏุงุฎู ุขู ูุฑุงุฑ ู ุฏูู (ฺฉ ุฏฺฏุฑ ุงุฒ ูุซุงู ูุง ุณุงุช ุฎูุฏ ุฑุงุณ):

```c++
#include <ros/ros.h>
#include <visualization_msgs/Marker.h>
#include <cmath>


int main( int argc, char** argv )
{
  ros::init(argc, argv, "points_and_lines"); // Make A Node
  ros::NodeHandle n;


  // Create A Publisher Topic
  ros::Publisher marker_pub = n.advertise<visualization_msgs::Marker>("visualization_marker", 10);
  ros::Rate r(30); // 30Hz
  float f = 0.0;
  while (ros::ok())
  {
    // Create points, line_strip, line_list
    visualization_msgs::Marker points, line_strip, line_list;
    points.header.frame_id = line_strip.header.frame_id = line_list.header.frame_id = "my_frame";
    points.header.stamp = line_strip.header.stamp = line_list.header.stamp = ros::Time::now();
    points.ns = line_strip.ns = line_list.ns = "points_and_lines";
    points.action = line_strip.action = line_list.action =  visualization_msgs::Marker::ADD;


    // Make it non-rotate
    points.pose.orientation.w = line_strip.pose.orientation.w =  line_list.pose.orientation.w = 1.0;


    // Id
    points.id = 0;
    line_strip.id = 1;
    line_list.id = 2;


    // Define Type
    points.type = visualization_msgs::Marker::POINTS;
    line_strip.type = visualization_msgs::Marker::LINE_STRIP;
    line_list.type = visualization_msgs::Marker::LINE_LIST;


    // Scale
    points.scale.x = 0.2;
    points.scale.y = 0.2;


    line_strip.scale.x = 0.1;
    line_list.scale.x = 0.1;


    // Color
    points.color.g = 1.0f;
    points.color.a = 1.0;


    line_strip.color.b = 1.0;
    line_strip.color.a = 1.0;


    line_list.color.r = 1.0;
    line_list.color.a = 1.0;


    // Make sinudsial wave
    for (uint32_t i = 0; i < 100; ++i)
    {
      float y = 5 * sin(f + i / 100.0f * 2 * M_PI);
      float z = 5 * cos(f + i / 100.0f * 2 * M_PI);


      geometry_msgs::Point p;
      p.x = (int32_t)i - 50;
      p.y = y;
      p.z = z;


      points.points.push_back(p); // Append
      line_strip.points.push_back(p);


      line_list.points.push_back(p);
      p.z += 1.0;
      line_list.points.push_back(p);
    }



    // Publish data
    marker_pub.publish(points);
    marker_pub.publish(line_strip);
    marker_pub.publish(line_list);


    r.sleep();


    f += 0.04; // Offset
  }
}
```

ุฏุฑ ูุงู CMakeList.txt ูู ฺฉุฏ ุฒุฑ ุฑุง ุงุถุงูู ู ฺฉูู:

```
add_executable(point_and_lines src/point_and_lines.cpp)
target_link_libraries(point_and_lines ${catkin_LIBRARIES})
```

ุงฺฉููู ุจุฑูุงูู ุฑุง ุงุฌุฑุง ูฺฉูู:

```bash
$ roscore
$ rosrun using_markers point_and_lines
$ rviz
```

ุฎุฑูุฌ ุจู ุดฺฉู ุฒุฑ ุฎูุงูุฏ ุจูุฏ:

![ุฎุฑูุฌ](image-18.png)

ุฎุฑูุฌ ุฏุณุชู ูพููุช ู ูุงู ุงุณุชุฑู ุฎูุงูุฏ ุจูุฏ. ุชูุฌู ุดูุฏ ฺฉู ุงฺฏุฑ ุฏุฑ ุฑุงุณ ูููุฏฺฉ ูุณุชุฏ ุญุชูุง ูุจู ุงุฒ ูุฑู ูุง ุงุฒ ุจฺฉ ุงุณูุด (/) ุงุณุชูุงุฏู ููุงุฏ.

ููุงุท ุณุจุฒ ูพููุช ูุง ูุณุชูุฏุ ุฎุทูุท ุขุจ ูุงู ุงุณุชุฑู ูุณุชูุฏ ู ุฎุทูุท ูุฑูุฒ ูุงู ูุณุช ูุณุชูุฏ.

ุฏุฑ ุตูุฑุชฺฉู ุจุฎูุงูู ุงุฒ ูุญุท Rviz ุงุทูุงุนุงุช ุจุฑุง ูุญุท ุฑุงุณ ุงุฑุณุงู ฺฉููุ ูุงุฒ ุงุณุช ุชุง ุจุง interactive markers ฺฉุงุฑ ฺฉูู. ุงู ูุงุฑฺฉุฑูุง ุงุฒ ฺฉูุชุฑูุฑูุง ูุฎุชูู ุงุฌุงุฏ ุดุฏู ุงูุฏ. ุฏุฑ ุงุฏุงูู ฺฉ ุณุฑูุฑ ุงุฌุงุฏ ู ฺฉูู ฺฉู ุญุงู ฺฉ interactive marker ู ุจุงุดุฏ. ฺฉ ุจุฑูุงูู ุณ ูพูุงุณ ูพูุงุณ ุจุง ูุงู simple_interactive_marker.cpp ุงุฌุงุฏ ู ฺฉูู ู ฺฉุฏ ุฒุฑ ุฑุง ุฏุฑ ุฏุงุฎู ุขู ูุฑุงุฑ ู ุฏูู:

```c++
#include <ros/ros.h>
#include <interactive_markers/interactive_marker_server.h>


// This Fcn. will called when user make change about the marker in Rviz
void processFeedback(
    const visualization_msgs::InteractiveMarkerFeedbackConstPtr &feedback )
{
  ROS_INFO_STREAM( feedback->marker_name << " is now at "
      << feedback->pose.position.x << ", " << feedback->pose.position.y
      << ", " << feedback->pose.position.z );
}



// Main Fcn.
int main(int argc, char** argv)
{
  ros::init(argc, argv, "simple_marker"); // Initiate A Node


  // Create A Server Marker
  interactive_markers::InteractiveMarkerServer server("simple_marker");


  // Make An Interactive Marker
  visualization_msgs::InteractiveMarker int_marker;
  int_marker.header.frame_id = "base_link";
  int_marker.header.stamp=ros::Time::now();
  int_marker.name = "my_marker";
  int_marker.description = "Simple 1-DOF Control";


  visualization_msgs::Marker box_marker;
  box_marker.type = visualization_msgs::Marker::CUBE; // Cube
  box_marker.scale.x = 0.45;
  box_marker.scale.y = 0.45;
  box_marker.scale.z = 0.45;
  box_marker.color.r = 0.5;
  box_marker.color.g = 0.5;
  box_marker.color.b = 0.5;
  box_marker.color.a = 1.0;


  // Create A Control
  visualization_msgs::InteractiveMarkerControl box_control;
  box_control.always_visible = true;
  box_control.markers.push_back( box_marker );


  int_marker.controls.push_back( box_control );
  visualization_msgs::InteractiveMarkerControl rotate_control;
  rotate_control.name = "move_x";
  rotate_control.interaction_mode = visualization_msgs::InteractiveMarkerControl::MOVE_AXIS; // Constrain


  int_marker.controls.push_back(rotate_control);
  server.insert(int_marker, &processFeedback);
  server.applyChanges();
  ros::spin();
}
```

ุฏุฑ ูุงู CMakeList.txt ูุฒ ฺฉุฏ ุฒุฑ ุฑุง ูุฑุงุฑ ู ุฏูู:

```
add_executable(simple_interactive_marker src/simple_interactive_marker.cpp)
target_link_libraries(simple_interactive_marker ${catkin_LIBRARIES})
```

ุญุชูุง ุฏุฑ ูุณุช depencyูุง interactive_markers ุฑุง ูุฑุงุฑ ุฏูุฏ:

```
find_package(catkin REQUIRED COMPONENTS
  roscpp
  rospy
  visualization_msgs
  interactive_markers
)
```

ุฏุฑ ุงุฏุงูู ุจุฑูุงูู ุฑุง ุงุฌุฑุง ู ฺฉูู:

```bash
$ roscore
$ rosrun using_markers simple_interactive_marker
$ rviz
```

ุฎุฑูุฌ ุจู ุดฺฉู ุฒุฑ ุฎูุงูุฏ ุจูุฏ:

![ุฎุฑูุฌ](image-19.png)

ุฏุฑ ุจุฑูุงูู rviz ุญุชูุง ูฺฉุณ ูุฑู ุฑุง ุจุฑ ุฑู base_link ูุฑุงุฑ ุฏูุฏ. ูุดุงูุฏู ู ุดูุฏ ฺฉู ุจุง ุฌุงุจุฌุง ฺฉุฑุฏู ูุงุฑฺฉุฑุ ุชุบุฑุงู ุขู ุฏุฑ ุชุฑููุงู ูุฑุจูุท ุจู ุณุฑูุฑ ฺุงูพ ู ุดูุฏ. ููู ูุงุฑฺฉุฑ ู ุฎูุงูู ุจุง ูพุงุชูู ุงุฌุงุฏ ฺฉูู. ุฏุฑ ูพูุดู ุงุตู ูพฺฉุฌ ฺฉ ุฏุงุฑฺฉุชูุฑ ุจุง ูุงู scripts ุงุฌุงุฏ ู ฺฉูู ู ุฏุฑ ุฏุงุฎู ุขู ฺฉ ูุงู ูพุงุชูู ุจุง ูุงู simple_interactive_marker.py ุงุฌุงุฏ ฺฉุฑุฏู ู ุจู ุขู ูุงุจูุช ุงุฌุฑุง ู ุฏูู. ุฏุงุฎู ูุงู ูพุงุชูู ฺฉุฏ ุฒุฑ ุฑุง ูุฑุงุฑ ู ุฏูู:

```py
#!/usr/bin/env python3
import rospy
from interactive_markers.interactive_marker_server import *
from visualization_msgs.msg import *


# This Fcn. will called when user make change about the marker in Rviz
def processFeedback(feedback):
    p = feedback.pose.position
    print(feedback.marker_name+" is now at "+str(p.x)+", "+str(p.y)+", "+str(p.z))


# Main
if __name__=="__main__":
    rospy.init_node("simple_marker") # Initiate Node
    server = InteractiveMarkerServer("simple_marker") # Creater A Marker Server

    # Make Marker
    int_marker = InteractiveMarker()
    int_marker.header.frame_id = "base_link"
    int_marker.name = "my_marker"
    int_marker.description = "Simple 1-DOF Control"


    box_marker = Marker()
    box_marker.type = Marker.CUBE
    box_marker.scale.x = 0.45
    box_marker.scale.y = 0.45
    box_marker.scale.z = 0.45
    box_marker.color.r = 0.0
    box_marker.color.g = 0.5
    box_marker.color.b = 0.5
    box_marker.color.a = 1.0


    box_control = InteractiveMarkerControl()
    box_control.always_visible = True
    box_control.markers.append( box_marker )


    int_marker.controls.append( box_control )


    rotate_control = InteractiveMarkerControl()
    rotate_control.name = "move_x"
    rotate_control.interaction_mode = InteractiveMarkerControl.MOVE_AXIS
    int_marker.controls.append(rotate_control);
    server.insert(int_marker, processFeedback)
    server.applyChanges()
    rospy.spin()
```

ุฎุฑูุฌ ุงู ุจุฑูุงูู ูุดุงุจู ูุณุฎู ุณ ูพูุงุณ ูพูุงุณ ุขู ุฎูุงูุฏ ุจูุฏ. (ุชูุฌู ุดูุฏ ฺฉู rospy ุจุงุฏ ุจู ุฌูุน ูพุด ูุงุฒ ูุง ุงุถุงูู ุดูุฏ.)
ุชุง ุจู ุงูุฌุง ฺฉุงุฑ ูุง ูุงุฑฺฉุฑูุง ุจุง ุฏุฑุฌู ุขุฒุงุฏ ูุญุฏูุฏ ุงุฌุงุฏ ฺฉุฑุฏู ุฏุฑ ุญุงูฺฉู ุฏุณุช ูุง ุจุฑุง ุงุฌุงุฏ ูุงุฑฺฉุฑูุง ุจุณุงุฑ ุจุงุฒ ุงุณุช. ุจุง ฺฉูฺฉ ฺฉุงููุฏ ุฒุฑ ู ุชูุงูู ูุณุช ุจุฑุฎ ุงุฒ ุงู ุฏุฑุฌู ูุง ุขุฒุงุฏ ูุฎุชูู ุฑุง ูุดุงูุฏู ููุงู:

```bash
$ roscore
$ rosrun interactive_marker_tutorials basic_controls
$ rviz
```

ุฏุฑ ุจุฎุด ูฺฉุณ ูุฑูุ ุจุฑ ุฑู base_link ุชูุธู ุดูุฏ (ุฏู ูุฑู ุฏฺฏุฑ ูุฑุจูุท ุจู ูฺฉุนุจ ฺุฑุฎูุฏู ู ูุชุญุฑฺฉ ู ุจุงุดุฏ) ุจุฑุง ุฏุณุชุฑุณ ุจู ูุงู ูพุงุชูู ุงู ุจุฑูุงูู ฺฉุงู ุงุณุช ุจู ุขุฏุฑุณ ุฒุฑ ุจุฑูุฏ:

```
/opt/ros/noetic/lib/interactive_marker_tutorials/basic_controls.py
```

ฺฉู ู ุชูุงูุฏ ูุฑ ฺฉุฏุงู ุงุฒ ูุงุฑฺฉุฑ ูุง ุฑุง ุฎูุฏุชุงู ุชูุณุฑ ฺฉูุฏ. ูุณุฎู ุณ ูพูุงุณ ูพูุงุณ ูู ุฏุฑ ูุงู ุถููู ูุฑุงุฑ ฺฏุฑูุชู ุงุณุช ฺฉู ู ุชูุงูุฏ ูุดุงูุฏู ู ุชุญูู ฺฉูุฏ (ุงฺฏุฑ ูุงุฒ ุจู ุงู ูุงุฑฺฉุฑูุง ุดุฏ ุจุง ูุทุงูุนู ฺฉู)

ุตูุฑุช ูุดฺฉู: ูฺฉุชู ุนุฌุจ ุฏุฑ ููุฑุฏ ุงู ุจุฑูุงูู ฺฉู ุฏุฑ ros ูุณุฎู ูููุฏฺฉ ฺฉุงุฑ ุฏุงุฏ ูู ุฏุฑ ูุณุฎู ูุฆูุชฺฉ ฺฉุงุฑ ูุฏุงุฏ!

ุญู ูุดฺฉู: ุฏุฑ ูุณุฎู ูุฆูุชฺฉ ุฏุฑ ุจุฎุด frame_id ุงุฒ / ุงุณุชูุงุฏู ูฺฉูู ูุดฺฉู ุญู ู ุดูุฏ:

```py
marker.header.frame_id = "my_frame"; // Pose Origin
```

ุจุฑุง ูุดุงูุฏู ูุฏุฑุช ุงู ูุงุฑฺฉุฑูุง ุจุฑูุงูู ุฒุฑ ุฑุง ุงุฌุฑุง ฺฉูุฏ:

```bash
$ roscore
$ rosrun interactive_marker_tutorials pong
$ rviz
```

ูุชุบุฑ fixed_frame ุจุฑ ุฑู base_link ุชูุธู ุดูุฏ. ุฎุฑูุฌ ุจู ุดฺฉู ุฒุฑ ุฎูุงูุฏ ุจูุฏ:

ุงูุจุชู ููุงูฺฏููู ฺฉู ูพุด ุชุฑ ูู ุฐฺฉุฑ ุดุฏ ูุง ุจุฑุง ุดุจู ุณุงุฒ ุงุฒ ุงุจุฒุงุฑ ุญุฑูู ุง ุชุฑ ุจู ูุงู Gazebo ุจูุฑู ุฎูุงูู ุจุฑุฏ ู ุงุฒ ูพฺฉุฌ rviz ุตุฑูุง ุจุฑุง ุดุจู ุณุงุฒ ุฏุงุฏู ูุง ุงุณุชูุงุฏู ุฎูุงูู ฺฉุฑุฏ.
